var nm=h=>{throw TypeError(h)};var nh=(h,t,e)=>t.has(h)||nm("Cannot "+e);var $t=(h,t,e)=>(nh(h,t,"read from private field"),e?e.call(h):t.get(h)),Ln=(h,t,e)=>t.has(h)?nm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e),Ve=(h,t,e,s)=>(nh(h,t,"write to private field"),s?s.call(h,e):t.set(h,e),e),On=(h,t,e)=>(nh(h,t,"access private method"),e);var im=(h,t,e,s)=>({set _(a){Ve(h,t,a,e)},get _(){return $t(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Ov(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var ih={exports:{}},yr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function Nv(){if(sm)return yr;sm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:h,type:s,key:l,ref:a!==void 0?a:null,props:o}}return yr.Fragment=t,yr.jsx=e,yr.jsxs=e,yr}var am;function kv(){return am||(am=1,ih.exports=Nv()),ih.exports}var I=kv(),sh={exports:{}},At={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function Pv(){if(rm)return At;rm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function _(D,$,J){this.props=D,this.context=$,this.refs=S,this.updater=J||v}_.prototype.isReactComponent={},_.prototype.setState=function(D,$){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,$,"setState")},_.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function E(){}E.prototype=_.prototype;function T(D,$,J){this.props=D,this.context=$,this.refs=S,this.updater=J||v}var C=T.prototype=new E;C.constructor=T,w(C,_.prototype),C.isPureReactComponent=!0;var N=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function U(D,$,J,K,et,yt){return J=yt.ref,{$$typeof:h,type:D,key:$,ref:J!==void 0?J:null,props:yt}}function V(D,$){return U(D.type,$,void 0,void 0,void 0,D.props)}function q(D){return typeof D=="object"&&D!==null&&D.$$typeof===h}function Q(D){var $={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(J){return $[J]})}var Z=/\/+/g;function lt(D,$){return typeof D=="object"&&D!==null&&D.key!=null?Q(""+D.key):$.toString(36)}function ht(){}function rt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ht,ht):(D.status="pending",D.then(function($){D.status==="pending"&&(D.status="fulfilled",D.value=$)},function($){D.status==="pending"&&(D.status="rejected",D.reason=$)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ct(D,$,J,K,et){var yt=typeof D;(yt==="undefined"||yt==="boolean")&&(D=null);var at=!1;if(D===null)at=!0;else switch(yt){case"bigint":case"string":case"number":at=!0;break;case"object":switch(D.$$typeof){case h:case t:at=!0;break;case g:return at=D._init,ct(at(D._payload),$,J,K,et)}}if(at)return et=et(D),at=K===""?"."+lt(D,0):K,N(et)?(J="",at!=null&&(J=at.replace(Z,"$&/")+"/"),ct(et,$,J,"",function(Xt){return Xt})):et!=null&&(q(et)&&(et=V(et,J+(et.key==null||D&&D.key===et.key?"":(""+et.key).replace(Z,"$&/")+"/")+at)),$.push(et)),1;at=0;var wt=K===""?".":K+":";if(N(D))for(var Rt=0;Rt<D.length;Rt++)K=D[Rt],yt=wt+lt(K,Rt),at+=ct(K,$,J,yt,et);else if(Rt=b(D),typeof Rt=="function")for(D=Rt.call(D),Rt=0;!(K=D.next()).done;)K=K.value,yt=wt+lt(K,Rt++),at+=ct(K,$,J,yt,et);else if(yt==="object"){if(typeof D.then=="function")return ct(rt(D),$,J,K,et);throw $=String(D),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return at}function k(D,$,J){if(D==null)return D;var K=[],et=0;return ct(D,K,"","",function(yt){return $.call(J,yt,et++)}),K}function G(D){if(D._status===-1){var $=D._result;$=$(),$.then(function(J){(D._status===0||D._status===-1)&&(D._status=1,D._result=J)},function(J){(D._status===0||D._status===-1)&&(D._status=2,D._result=J)}),D._status===-1&&(D._status=0,D._result=$)}if(D._status===1)return D._result.default;throw D._result}var tt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function dt(){}return At.Children={map:k,forEach:function(D,$,J){k(D,function(){$.apply(this,arguments)},J)},count:function(D){var $=0;return k(D,function(){$++}),$},toArray:function(D){return k(D,function($){return $})||[]},only:function(D){if(!q(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},At.Component=_,At.Fragment=e,At.Profiler=a,At.PureComponent=T,At.StrictMode=s,At.Suspense=d,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,At.__COMPILER_RUNTIME={__proto__:null,c:function(D){return M.H.useMemoCache(D)}},At.cache=function(D){return function(){return D.apply(null,arguments)}},At.cloneElement=function(D,$,J){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var K=w({},D.props),et=D.key,yt=void 0;if($!=null)for(at in $.ref!==void 0&&(yt=void 0),$.key!==void 0&&(et=""+$.key),$)!B.call($,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&$.ref===void 0||(K[at]=$[at]);var at=arguments.length-2;if(at===1)K.children=J;else if(1<at){for(var wt=Array(at),Rt=0;Rt<at;Rt++)wt[Rt]=arguments[Rt+2];K.children=wt}return U(D.type,et,void 0,void 0,yt,K)},At.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},At.createElement=function(D,$,J){var K,et={},yt=null;if($!=null)for(K in $.key!==void 0&&(yt=""+$.key),$)B.call($,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(et[K]=$[K]);var at=arguments.length-2;if(at===1)et.children=J;else if(1<at){for(var wt=Array(at),Rt=0;Rt<at;Rt++)wt[Rt]=arguments[Rt+2];et.children=wt}if(D&&D.defaultProps)for(K in at=D.defaultProps,at)et[K]===void 0&&(et[K]=at[K]);return U(D,yt,void 0,void 0,null,et)},At.createRef=function(){return{current:null}},At.forwardRef=function(D){return{$$typeof:u,render:D}},At.isValidElement=q,At.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:G}},At.memo=function(D,$){return{$$typeof:p,type:D,compare:$===void 0?null:$}},At.startTransition=function(D){var $=M.T,J={};M.T=J;try{var K=D(),et=M.S;et!==null&&et(J,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(dt,tt)}catch(yt){tt(yt)}finally{M.T=$}},At.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},At.use=function(D){return M.H.use(D)},At.useActionState=function(D,$,J){return M.H.useActionState(D,$,J)},At.useCallback=function(D,$){return M.H.useCallback(D,$)},At.useContext=function(D){return M.H.useContext(D)},At.useDebugValue=function(){},At.useDeferredValue=function(D,$){return M.H.useDeferredValue(D,$)},At.useEffect=function(D,$,J){var K=M.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(D,$)},At.useId=function(){return M.H.useId()},At.useImperativeHandle=function(D,$,J){return M.H.useImperativeHandle(D,$,J)},At.useInsertionEffect=function(D,$){return M.H.useInsertionEffect(D,$)},At.useLayoutEffect=function(D,$){return M.H.useLayoutEffect(D,$)},At.useMemo=function(D,$){return M.H.useMemo(D,$)},At.useOptimistic=function(D,$){return M.H.useOptimistic(D,$)},At.useReducer=function(D,$,J){return M.H.useReducer(D,$,J)},At.useRef=function(D){return M.H.useRef(D)},At.useState=function(D){return M.H.useState(D)},At.useSyncExternalStore=function(D,$,J){return M.H.useSyncExternalStore(D,$,J)},At.useTransition=function(){return M.H.useTransition()},At.version="19.1.1",At}var om;function Ph(){return om||(om=1,sh.exports=Pv()),sh.exports}var L=Ph(),ah={exports:{}},br={},rh={exports:{}},oh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function Bv(){return lm||(lm=1,(function(h){function t(k,G){var tt=k.length;k.push(G);t:for(;0<tt;){var dt=tt-1>>>1,D=k[dt];if(0<a(D,G))k[dt]=G,k[tt]=D,tt=dt;else break t}}function e(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var G=k[0],tt=k.pop();if(tt!==G){k[0]=tt;t:for(var dt=0,D=k.length,$=D>>>1;dt<$;){var J=2*(dt+1)-1,K=k[J],et=J+1,yt=k[et];if(0>a(K,tt))et<D&&0>a(yt,K)?(k[dt]=yt,k[et]=tt,dt=et):(k[dt]=K,k[J]=tt,dt=J);else if(et<D&&0>a(yt,tt))k[dt]=yt,k[et]=tt,dt=et;else break t}}return G}function a(k,G){var tt=k.sortIndex-G.sortIndex;return tt!==0?tt:k.id-G.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,y=null,b=3,v=!1,w=!1,S=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function N(k){for(var G=e(p);G!==null;){if(G.callback===null)s(p);else if(G.startTime<=k)s(p),G.sortIndex=G.expirationTime,t(d,G);else break;G=e(p)}}function M(k){if(S=!1,N(k),!w)if(e(d)!==null)w=!0,B||(B=!0,lt());else{var G=e(p);G!==null&&ct(M,G.startTime-k)}}var B=!1,U=-1,V=5,q=-1;function Q(){return _?!0:!(h.unstable_now()-q<V)}function Z(){if(_=!1,B){var k=h.unstable_now();q=k;var G=!0;try{t:{w=!1,S&&(S=!1,T(U),U=-1),v=!0;var tt=b;try{e:{for(N(k),y=e(d);y!==null&&!(y.expirationTime>k&&Q());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,b=y.priorityLevel;var D=dt(y.expirationTime<=k);if(k=h.unstable_now(),typeof D=="function"){y.callback=D,N(k),G=!0;break e}y===e(d)&&s(d),N(k)}else s(d);y=e(d)}if(y!==null)G=!0;else{var $=e(p);$!==null&&ct(M,$.startTime-k),G=!1}}break t}finally{y=null,b=tt,v=!1}G=void 0}}finally{G?lt():B=!1}}}var lt;if(typeof C=="function")lt=function(){C(Z)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,rt=ht.port2;ht.port1.onmessage=Z,lt=function(){rt.postMessage(null)}}else lt=function(){E(Z,0)};function ct(k,G){U=E(function(){k(h.unstable_now())},G)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(k){k.callback=null},h.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<k?Math.floor(1e3/k):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(k){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var tt=b;b=G;try{return k()}finally{b=tt}},h.unstable_requestPaint=function(){_=!0},h.unstable_runWithPriority=function(k,G){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var tt=b;b=k;try{return G()}finally{b=tt}},h.unstable_scheduleCallback=function(k,G,tt){var dt=h.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?dt+tt:dt):tt=dt,k){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=tt+D,k={id:g++,callback:G,priorityLevel:k,startTime:tt,expirationTime:D,sortIndex:-1},tt>dt?(k.sortIndex=tt,t(p,k),e(d)===null&&k===e(p)&&(S?(T(U),U=-1):S=!0,ct(M,tt-dt))):(k.sortIndex=D,t(d,k),w||v||(w=!0,B||(B=!0,lt()))),k},h.unstable_shouldYield=Q,h.unstable_wrapCallback=function(k){var G=b;return function(){var tt=b;b=G;try{return k.apply(this,arguments)}finally{b=tt}}}})(oh)),oh}var cm;function Fv(){return cm||(cm=1,rh.exports=Bv()),rh.exports}var lh={exports:{}},Le={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um;function Uv(){if(um)return Le;um=1;var h=Ph();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Le.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Le.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(d,p,null,g)},Le.flushSync=function(d){var p=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=p,s.p=g,s.d.f()}},Le.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},Le.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Le.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Le.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},Le.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Le.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},Le.requestFormReset=function(d){s.d.r(d)},Le.unstable_batchedUpdates=function(d,p){return d(p)},Le.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},Le.useFormStatus=function(){return l.H.useHostTransitionStatus()},Le.version="19.1.1",Le}var hm;function zv(){if(hm)return lh.exports;hm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),lh.exports=Uv(),lh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm;function Hv(){if(dm)return br;dm=1;var h=Fv(),t=Ph(),e=zv();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,r=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(r=i.return),n=i.return;while(n)}return i.tag===3?r:null}function l(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(o(n)!==n)throw Error(s(188))}function d(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var r=n,c=i;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return u(f),n;if(m===c)return u(f),i;m=m.sibling}throw Error(s(188))}if(r.return!==c.return)r=f,c=m;else{for(var A=!1,x=f.child;x;){if(x===r){A=!0,r=f,c=m;break}if(x===c){A=!0,c=f,r=m;break}x=x.sibling}if(!A){for(x=m.child;x;){if(x===r){A=!0,r=m,c=f;break}if(x===c){A=!0,c=m,r=f;break}x=x.sibling}if(!A)throw Error(s(189))}}if(r.alternate!==c)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function lt(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var ht=Symbol.for("react.client.reference");function rt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ht?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case B:return"SuspenseList";case q:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case v:return"Portal";case C:return(n.displayName||"Context")+".Provider";case T:return(n._context.displayName||"Context")+".Consumer";case N:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case U:return i=n.displayName||null,i!==null?i:rt(n.type)||"Memo";case V:i=n._payload,n=n._init;try{return rt(n(i))}catch{}}return null}var ct=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},dt=[],D=-1;function $(n){return{current:n}}function J(n){0>D||(n.current=dt[D],dt[D]=null,D--)}function K(n,i){D++,dt[D]=n.current,n.current=i}var et=$(null),yt=$(null),at=$(null),wt=$(null);function Rt(n,i){switch(K(at,i),K(yt,n),K(et,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Dg(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Dg(i),n=Lg(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(et),K(et,n)}function Xt(){J(et),J(yt),J(at)}function It(n){n.memoizedState!==null&&K(wt,n);var i=et.current,r=Lg(i,n.type);i!==r&&(K(yt,n),K(et,r))}function Ue(n){yt.current===n&&(J(et),J(yt)),wt.current===n&&(J(wt),dr._currentValue=tt)}var Ye=Object.prototype.hasOwnProperty,Mt=h.unstable_scheduleCallback,Bt=h.unstable_cancelCallback,ae=h.unstable_shouldYield,ue=h.unstable_requestPaint,Ee=h.unstable_now,Bi=h.unstable_getCurrentPriorityLevel,ps=h.unstable_ImmediatePriority,Yr=h.unstable_UserBlockingPriority,zn=h.unstable_NormalPriority,jl=h.unstable_LowPriority,$r=h.unstable_IdlePriority,Gl=h.log,Vl=h.unstable_setDisableYieldValue,Fi=null,ee=null;function ke(n){if(typeof Gl=="function"&&Vl(n),ee&&typeof ee.setStrictMode=="function")try{ee.setStrictMode(Fi,n)}catch{}}var ne=Math.clz32?Math.clz32:bb,Aa=Math.log,yb=Math.LN2;function bb(n){return n>>>=0,n===0?32:31-(Aa(n)/yb|0)|0}var Wr=256,Kr=4194304;function Ui(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Qr(n,i,r){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var x=c&134217727;return x!==0?(c=x&~m,c!==0?f=Ui(c):(A&=x,A!==0?f=Ui(A):r||(r=x&~n,r!==0&&(f=Ui(r))))):(x=c&~m,x!==0?f=Ui(x):A!==0?f=Ui(A):r||(r=c&~n,r!==0&&(f=Ui(r)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,r=i&-i,m>=r||m===32&&(r&4194048)!==0)?i:f}function Sa(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function vb(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dd(){var n=Wr;return Wr<<=1,(Wr&4194048)===0&&(Wr=256),n}function fd(){var n=Kr;return Kr<<=1,(Kr&62914560)===0&&(Kr=4194304),n}function ql(n){for(var i=[],r=0;31>r;r++)i.push(n);return i}function wa(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ab(n,i,r,c,f,m){var A=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var x=n.entanglements,R=n.expirationTimes,z=n.hiddenUpdates;for(r=A&~r;0<r;){var X=31-ne(r),W=1<<X;x[X]=0,R[X]=-1;var H=z[X];if(H!==null)for(z[X]=null,X=0;X<H.length;X++){var j=H[X];j!==null&&(j.lane&=-536870913)}r&=~W}c!==0&&pd(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(A&~i))}function pd(n,i,r){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-ne(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|r&4194090}function gd(n,i){var r=n.entangledLanes|=i;for(n=n.entanglements;r;){var c=31-ne(r),f=1<<c;f&i|n[c]&i&&(n[c]|=i),r&=~f}}function Xl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Yl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function md(){var n=G.p;return n!==0?n:(n=window.event,n===void 0?32:Kg(n.type))}function Sb(n,i){var r=G.p;try{return G.p=n,i()}finally{G.p=r}}var ci=Math.random().toString(36).slice(2),Me="__reactFiber$"+ci,ze="__reactProps$"+ci,gs="__reactContainer$"+ci,$l="__reactEvents$"+ci,wb="__reactListeners$"+ci,Eb="__reactHandles$"+ci,yd="__reactResources$"+ci,Ea="__reactMarker$"+ci;function Wl(n){delete n[Me],delete n[ze],delete n[$l],delete n[wb],delete n[Eb]}function ms(n){var i=n[Me];if(i)return i;for(var r=n.parentNode;r;){if(i=r[gs]||r[Me]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(n=Pg(n);n!==null;){if(r=n[Me])return r;n=Pg(n)}return i}n=r,r=n.parentNode}return null}function ys(n){if(n=n[Me]||n[gs]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function _a(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function bs(n){var i=n[yd];return i||(i=n[yd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function me(n){n[Ea]=!0}var bd=new Set,vd={};function zi(n,i){vs(n,i),vs(n+"Capture",i)}function vs(n,i){for(vd[n]=i,n=0;n<i.length;n++)bd.add(i[n])}var _b=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ad={},Sd={};function xb(n){return Ye.call(Sd,n)?!0:Ye.call(Ad,n)?!1:_b.test(n)?Sd[n]=!0:(Ad[n]=!0,!1)}function Zr(n,i,r){if(xb(i))if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+r)}}function Jr(n,i,r){if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+r)}}function Hn(n,i,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(i,r,""+c)}}var Kl,wd;function As(n){if(Kl===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);Kl=i&&i[1]||"",wd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kl+n+wd}var Ql=!1;function Zl(n,i){if(!n||Ql)return"";Ql=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(j){var H=j}Reflect.construct(n,[],W)}else{try{W.call()}catch(j){H=j}n.call(W.prototype)}}else{try{throw Error()}catch(j){H=j}(W=n())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(j){if(j&&H&&typeof j.stack=="string")return[j.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),A=m[0],x=m[1];if(A&&x){var R=A.split(`
`),z=x.split(`
`);for(f=c=0;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(c===R.length||f===z.length)for(c=R.length-1,f=z.length-1;1<=c&&0<=f&&R[c]!==z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(R[c]!==z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||R[c]!==z[f]){var X=`
`+R[c].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=c&&0<=f);break}}}finally{Ql=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?As(r):""}function Tb(n){switch(n.tag){case 26:case 27:case 5:return As(n.type);case 16:return As("Lazy");case 13:return As("Suspense");case 19:return As("SuspenseList");case 0:case 15:return Zl(n.type,!1);case 11:return Zl(n.type.render,!1);case 1:return Zl(n.type,!0);case 31:return As("Activity");default:return""}}function Ed(n){try{var i="";do i+=Tb(n),n=n.return;while(n);return i}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function on(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _d(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Cb(n){var i=_d(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var f=r.get,m=r.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(A){c=""+A,m.call(this,A)}}),Object.defineProperty(n,i,{enumerable:r.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function to(n){n._valueTracker||(n._valueTracker=Cb(n))}function xd(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return n&&(c=_d(n)?n.checked?"true":"false":n.value),n=c,n!==r?(i.setValue(n),!0):!1}function eo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Rb=/[\n"\\]/g;function ln(n){return n.replace(Rb,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Jl(n,i,r,c,f,m,A,x){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),i!=null?A==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+on(i)):n.value!==""+on(i)&&(n.value=""+on(i)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),i!=null?tc(n,A,on(i)):r!=null?tc(n,A,on(r)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+on(x):n.removeAttribute("name")}function Td(n,i,r,c,f,m,A,x){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;r=r!=null?""+on(r):"",i=i!=null?""+on(i):r,x||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=x?n.checked:!!c,n.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A)}function tc(n,i,r){i==="number"&&eo(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Ss(n,i,r,c){if(n=n.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<n.length;r++)f=i.hasOwnProperty("$"+n[r].value),n[r].selected!==f&&(n[r].selected=f),f&&c&&(n[r].defaultSelected=!0)}else{for(r=""+on(r),i=null,f=0;f<n.length;f++){if(n[f].value===r){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Cd(n,i,r){if(i!=null&&(i=""+on(i),i!==n.value&&(n.value=i),r==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=r!=null?""+on(r):""}function Rd(n,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(s(92));if(ct(c)){if(1<c.length)throw Error(s(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=on(i),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c)}function ws(n,i){if(i){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=i;return}}n.textContent=i}var Mb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Md(n,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,r):typeof r!="number"||r===0||Mb.has(i)?i==="float"?n.cssFloat=r:n[i]=(""+r).trim():n[i]=r+"px"}function Dd(n,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&r[f]!==c&&Md(n,f,c)}else for(var m in i)i.hasOwnProperty(m)&&Md(n,m,i[m])}function ec(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Db=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(n){return Lb.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var nc=null;function ic(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Es=null,_s=null;function Ld(n){var i=ys(n);if(i&&(n=i.stateNode)){var r=n[ze]||null;t:switch(n=i.stateNode,i.type){case"input":if(Jl(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ln(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==n&&c.form===n.form){var f=c[ze]||null;if(!f)throw Error(s(90));Jl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===n.form&&xd(c)}break t;case"textarea":Cd(n,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&Ss(n,!!r.multiple,i,!1)}}}var sc=!1;function Od(n,i,r){if(sc)return n(i,r);sc=!0;try{var c=n(i);return c}finally{if(sc=!1,(Es!==null||_s!==null)&&(jo(),Es&&(i=Es,n=_s,_s=Es=null,Ld(i),n)))for(i=0;i<n.length;i++)Ld(n[i])}}function xa(n,i){var r=n.stateNode;if(r===null)return null;var c=r[ze]||null;if(c===null)return null;r=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break t;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ac=!1;if(In)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){ac=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{ac=!1}var ui=null,rc=null,io=null;function Nd(){if(io)return io;var n,i=rc,r=i.length,c,f="value"in ui?ui.value:ui.textContent,m=f.length;for(n=0;n<r&&i[n]===f[n];n++);var A=r-n;for(c=1;c<=A&&i[r-c]===f[m-c];c++);return io=f.slice(n,1<c?1-c:void 0)}function so(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ao(){return!0}function kd(){return!1}function He(n){function i(r,c,f,m,A){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=A,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(r=n[x],this[x]=r?r(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ao:kd,this.isPropagationStopped=kd,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),i}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=He(Hi),Ca=g({},Hi,{view:0,detail:0}),Ob=He(Ca),oc,lc,Ra,oo=g({},Ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ra&&(Ra&&n.type==="mousemove"?(oc=n.screenX-Ra.screenX,lc=n.screenY-Ra.screenY):lc=oc=0,Ra=n),oc)},movementY:function(n){return"movementY"in n?n.movementY:lc}}),Pd=He(oo),Nb=g({},oo,{dataTransfer:0}),kb=He(Nb),Pb=g({},Ca,{relatedTarget:0}),cc=He(Pb),Bb=g({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fb=He(Bb),Ub=g({},Hi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),zb=He(Ub),Hb=g({},Hi,{data:0}),Bd=He(Hb),Ib={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vb(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Gb[n])?!!i[n]:!1}function uc(){return Vb}var qb=g({},Ca,{key:function(n){if(n.key){var i=Ib[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=so(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jb[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(n){return n.type==="keypress"?so(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?so(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xb=He(qb),Yb=g({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=He(Yb),$b=g({},Ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),Wb=He($b),Kb=g({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qb=He(Kb),Zb=g({},oo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Jb=He(Zb),t0=g({},Hi,{newState:0,oldState:0}),e0=He(t0),n0=[9,13,27,32],hc=In&&"CompositionEvent"in window,Ma=null;In&&"documentMode"in document&&(Ma=document.documentMode);var i0=In&&"TextEvent"in window&&!Ma,Ud=In&&(!hc||Ma&&8<Ma&&11>=Ma),zd=" ",Hd=!1;function Id(n,i){switch(n){case"keyup":return n0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xs=!1;function s0(n,i){switch(n){case"compositionend":return jd(i);case"keypress":return i.which!==32?null:(Hd=!0,zd);case"textInput":return n=i.data,n===zd&&Hd?null:n;default:return null}}function a0(n,i){if(xs)return n==="compositionend"||!hc&&Id(n,i)?(n=Nd(),io=rc=ui=null,xs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ud&&i.locale!=="ko"?null:i.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!r0[n.type]:i==="textarea"}function Vd(n,i,r,c){Es?_s?_s.push(c):_s=[c]:Es=c,i=$o(i,"onChange"),0<i.length&&(r=new ro("onChange","change",null,r,c),n.push({event:r,listeners:i}))}var Da=null,La=null;function o0(n){xg(n,0)}function lo(n){var i=_a(n);if(xd(i))return n}function qd(n,i){if(n==="change")return i}var Xd=!1;if(In){var dc;if(In){var fc="oninput"in document;if(!fc){var Yd=document.createElement("div");Yd.setAttribute("oninput","return;"),fc=typeof Yd.oninput=="function"}dc=fc}else dc=!1;Xd=dc&&(!document.documentMode||9<document.documentMode)}function $d(){Da&&(Da.detachEvent("onpropertychange",Wd),La=Da=null)}function Wd(n){if(n.propertyName==="value"&&lo(La)){var i=[];Vd(i,La,n,ic(n)),Od(o0,i)}}function l0(n,i,r){n==="focusin"?($d(),Da=i,La=r,Da.attachEvent("onpropertychange",Wd)):n==="focusout"&&$d()}function c0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lo(La)}function u0(n,i){if(n==="click")return lo(i)}function h0(n,i){if(n==="input"||n==="change")return lo(i)}function d0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var $e=typeof Object.is=="function"?Object.is:d0;function Oa(n,i){if($e(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var r=Object.keys(n),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!Ye.call(i,f)||!$e(n[f],i[f]))return!1}return!0}function Kd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qd(n,i){var r=Kd(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=i&&c>=i)return{node:r,offset:i-n};n=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Kd(r)}}function Zd(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Zd(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Jd(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=eo(n.document);i instanceof n.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)n=i.contentWindow;else break;i=eo(n.document)}return i}function pc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var f0=In&&"documentMode"in document&&11>=document.documentMode,Ts=null,gc=null,Na=null,mc=!1;function tf(n,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mc||Ts==null||Ts!==eo(c)||(c=Ts,"selectionStart"in c&&pc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Na&&Oa(Na,c)||(Na=c,c=$o(gc,"onSelect"),0<c.length&&(i=new ro("onSelect","select",null,i,r),n.push({event:i,listeners:c}),i.target=Ts)))}function Ii(n,i){var r={};return r[n.toLowerCase()]=i.toLowerCase(),r["Webkit"+n]="webkit"+i,r["Moz"+n]="moz"+i,r}var Cs={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionrun:Ii("Transition","TransitionRun"),transitionstart:Ii("Transition","TransitionStart"),transitioncancel:Ii("Transition","TransitionCancel"),transitionend:Ii("Transition","TransitionEnd")},yc={},ef={};In&&(ef=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function ji(n){if(yc[n])return yc[n];if(!Cs[n])return n;var i=Cs[n],r;for(r in i)if(i.hasOwnProperty(r)&&r in ef)return yc[n]=i[r];return n}var nf=ji("animationend"),sf=ji("animationiteration"),af=ji("animationstart"),p0=ji("transitionrun"),g0=ji("transitionstart"),m0=ji("transitioncancel"),rf=ji("transitionend"),of=new Map,bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bc.push("scrollEnd");function vn(n,i){of.set(n,i),zi(i,[n])}var lf=new WeakMap;function cn(n,i){if(typeof n=="object"&&n!==null){var r=lf.get(n);return r!==void 0?r:(i={value:n,source:i,stack:Ed(i)},lf.set(n,i),i)}return{value:n,source:i,stack:Ed(i)}}var un=[],Rs=0,vc=0;function co(){for(var n=Rs,i=vc=Rs=0;i<n;){var r=un[i];un[i++]=null;var c=un[i];un[i++]=null;var f=un[i];un[i++]=null;var m=un[i];if(un[i++]=null,c!==null&&f!==null){var A=c.pending;A===null?f.next=f:(f.next=A.next,A.next=f),c.pending=f}m!==0&&cf(r,f,m)}}function uo(n,i,r,c){un[Rs++]=n,un[Rs++]=i,un[Rs++]=r,un[Rs++]=c,vc|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Ac(n,i,r,c){return uo(n,i,r,c),ho(n)}function Ms(n,i){return uo(n,null,null,i),ho(n)}function cf(n,i,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var f=!1,m=n.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&i!==null&&(f=31-ne(r),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=r|536870912),m):null}function ho(n){if(50<sr)throw sr=0,Tu=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ds={};function y0(n,i,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function We(n,i,r,c){return new y0(n,i,r,c)}function Sc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jn(n,i){var r=n.alternate;return r===null?(r=We(n.tag,i,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=i,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,i=n.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function uf(n,i){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,i=r.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function fo(n,i,r,c,f,m){var A=0;if(c=n,typeof n=="function")Sc(n)&&(A=1);else if(typeof n=="string")A=vv(n,r,et.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case q:return n=We(31,r,i,f),n.elementType=q,n.lanes=m,n;case w:return Gi(r.children,f,m,i);case S:A=8,f|=24;break;case _:return n=We(12,r,i,f|2),n.elementType=_,n.lanes=m,n;case M:return n=We(13,r,i,f),n.elementType=M,n.lanes=m,n;case B:return n=We(19,r,i,f),n.elementType=B,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case E:case C:A=10;break t;case T:A=9;break t;case N:A=11;break t;case U:A=14;break t;case V:A=16,c=null;break t}A=29,r=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=We(A,r,i,f),i.elementType=n,i.type=c,i.lanes=m,i}function Gi(n,i,r,c){return n=We(7,n,c,i),n.lanes=r,n}function wc(n,i,r){return n=We(6,n,null,i),n.lanes=r,n}function Ec(n,i,r){return i=We(4,n.children!==null?n.children:[],n.key,i),i.lanes=r,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ls=[],Os=0,po=null,go=0,hn=[],dn=0,Vi=null,Gn=1,Vn="";function qi(n,i){Ls[Os++]=go,Ls[Os++]=po,po=n,go=i}function hf(n,i,r){hn[dn++]=Gn,hn[dn++]=Vn,hn[dn++]=Vi,Vi=n;var c=Gn;n=Vn;var f=32-ne(c)-1;c&=~(1<<f),r+=1;var m=32-ne(i)+f;if(30<m){var A=f-f%5;m=(c&(1<<A)-1).toString(32),c>>=A,f-=A,Gn=1<<32-ne(i)+f|r<<f|c,Vn=m+n}else Gn=1<<m|r<<f|c,Vn=n}function _c(n){n.return!==null&&(qi(n,1),hf(n,1,0))}function xc(n){for(;n===po;)po=Ls[--Os],Ls[Os]=null,go=Ls[--Os],Ls[Os]=null;for(;n===Vi;)Vi=hn[--dn],hn[dn]=null,Vn=hn[--dn],hn[dn]=null,Gn=hn[--dn],hn[dn]=null}var Pe=null,ie=null,Nt=!1,Xi=null,Tn=!1,Tc=Error(s(519));function Yi(n){var i=Error(s(418,""));throw Ba(cn(i,n)),Tc}function df(n){var i=n.stateNode,r=n.type,c=n.memoizedProps;switch(i[Me]=n,i[ze]=c,r){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(r=0;r<rr.length;r++)Tt(rr[r],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":Tt("invalid",i),Td(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),to(i);break;case"select":Tt("invalid",i);break;case"textarea":Tt("invalid",i),Rd(i,c.value,c.defaultValue,c.children),to(i)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||Mg(i.textContent,r)?(c.popover!=null&&(Tt("beforetoggle",i),Tt("toggle",i)),c.onScroll!=null&&Tt("scroll",i),c.onScrollEnd!=null&&Tt("scrollend",i),c.onClick!=null&&(i.onclick=Wo),i=!0):i=!1,i||Yi(n)}function ff(n){for(Pe=n.return;Pe;)switch(Pe.tag){case 5:case 13:Tn=!1;return;case 27:case 3:Tn=!0;return;default:Pe=Pe.return}}function ka(n){if(n!==Pe)return!1;if(!Nt)return ff(n),Nt=!0,!1;var i=n.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||ju(n.type,n.memoizedProps)),r=!r),r&&ie&&Yi(n),ff(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){ie=Sn(n.nextSibling);break t}i--}else r!=="$"&&r!=="$!"&&r!=="$?"||i++;n=n.nextSibling}ie=null}}else i===27?(i=ie,Ti(n.type)?(n=Xu,Xu=null,ie=n):ie=i):ie=Pe?Sn(n.stateNode.nextSibling):null;return!0}function Pa(){ie=Pe=null,Nt=!1}function pf(){var n=Xi;return n!==null&&(Ge===null?Ge=n:Ge.push.apply(Ge,n),Xi=null),n}function Ba(n){Xi===null?Xi=[n]:Xi.push(n)}var Cc=$(null),$i=null,qn=null;function hi(n,i,r){K(Cc,i._currentValue),i._currentValue=r}function Xn(n){n._currentValue=Cc.current,J(Cc)}function Rc(n,i,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===r)break;n=n.return}}function Mc(n,i,r,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var A=f.child;m=m.firstContext;t:for(;m!==null;){var x=m;m=f;for(var R=0;R<i.length;R++)if(x.context===i[R]){m.lanes|=r,x=m.alternate,x!==null&&(x.lanes|=r),Rc(m.return,r,n),c||(A=null);break t}m=x.next}}else if(f.tag===18){if(A=f.return,A===null)throw Error(s(341));A.lanes|=r,m=A.alternate,m!==null&&(m.lanes|=r),Rc(A,r,n),A=null}else A=f.child;if(A!==null)A.return=f;else for(A=f;A!==null;){if(A===n){A=null;break}if(f=A.sibling,f!==null){f.return=A.return,A=f;break}A=A.return}f=A}}function Fa(n,i,r,c){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var A=f.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var x=f.type;$e(f.pendingProps.value,A.value)||(n!==null?n.push(x):n=[x])}}else if(f===wt.current){if(A=f.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(dr):n=[dr])}f=f.return}n!==null&&Mc(i,n,r,c),i.flags|=262144}function mo(n){for(n=n.firstContext;n!==null;){if(!$e(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Wi(n){$i=n,qn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function De(n){return gf($i,n)}function yo(n,i){return $i===null&&Wi(n),gf(n,i)}function gf(n,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},qn===null){if(n===null)throw Error(s(308));qn=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else qn=qn.next=i;return r}var b0=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(r){return r()})}},v0=h.unstable_scheduleCallback,A0=h.unstable_NormalPriority,pe={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dc(){return{controller:new b0,data:new Map,refCount:0}}function Ua(n){n.refCount--,n.refCount===0&&v0(A0,function(){n.controller.abort()})}var za=null,Lc=0,Ns=0,ks=null;function S0(n,i){if(za===null){var r=za=[];Lc=0,Ns=Nu(),ks={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Lc++,i.then(mf,mf),i}function mf(){if(--Lc===0&&za!==null){ks!==null&&(ks.status="fulfilled");var n=za;za=null,Ns=0,ks=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function w0(n,i){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var yf=k.S;k.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&S0(n,i),yf!==null&&yf(n,i)};var Ki=$(null);function Oc(){var n=Ki.current;return n!==null?n:qt.pooledCache}function bo(n,i){i===null?K(Ki,Ki.current):K(Ki,i.pool)}function bf(){var n=Oc();return n===null?null:{parent:pe._currentValue,pool:n}}var Ha=Error(s(460)),vf=Error(s(474)),vo=Error(s(542)),Nc={then:function(){}};function Af(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ao(){}function Sf(n,i,r){switch(r=n[r],r===void 0?n.push(i):r!==i&&(i.then(Ao,Ao),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Ef(n),n;default:if(typeof i.status=="string")i.then(Ao,Ao);else{if(n=qt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Ef(n),n}throw Ia=i,Ha}}var Ia=null;function wf(){if(Ia===null)throw Error(s(459));var n=Ia;return Ia=null,n}function Ef(n){if(n===Ha||n===vo)throw Error(s(483))}var di=!1;function kc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pc(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function fi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function pi(n,i,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(kt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=ho(n),cf(n,null,r),i}return uo(n,c,i,r),ho(n)}function ja(n,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,gd(n,r)}}function Bc(n,i){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var A={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=A:m=m.next=A,r=r.next}while(r!==null);m===null?f=m=i:m=m.next=i}else f=m=i;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=i:n.next=i,r.lastBaseUpdate=i}var Fc=!1;function Ga(){if(Fc){var n=ks;if(n!==null)throw n}}function Va(n,i,r,c){Fc=!1;var f=n.updateQueue;di=!1;var m=f.firstBaseUpdate,A=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var R=x,z=R.next;R.next=null,A===null?m=z:A.next=z,A=R;var X=n.alternate;X!==null&&(X=X.updateQueue,x=X.lastBaseUpdate,x!==A&&(x===null?X.firstBaseUpdate=z:x.next=z,X.lastBaseUpdate=R))}if(m!==null){var W=f.baseState;A=0,X=z=R=null,x=m;do{var H=x.lane&-536870913,j=H!==x.lane;if(j?(Lt&H)===H:(c&H)===H){H!==0&&H===Ns&&(Fc=!0),X!==null&&(X=X.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var mt=n,ft=x;H=i;var zt=r;switch(ft.tag){case 1:if(mt=ft.payload,typeof mt=="function"){W=mt.call(zt,W,H);break t}W=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=ft.payload,H=typeof mt=="function"?mt.call(zt,W,H):mt,H==null)break t;W=g({},W,H);break t;case 2:di=!0}}H=x.callback,H!==null&&(n.flags|=64,j&&(n.flags|=8192),j=f.callbacks,j===null?f.callbacks=[H]:j.push(H))}else j={lane:H,tag:x.tag,payload:x.payload,callback:x.callback,next:null},X===null?(z=X=j,R=W):X=X.next=j,A|=H;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;j=x,x=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);X===null&&(R=W),f.baseState=R,f.firstBaseUpdate=z,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),wi|=A,n.lanes=A,n.memoizedState=W}}function _f(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function xf(n,i){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)_f(r[n],i)}var Ps=$(null),So=$(0);function Tf(n,i){n=Jn,K(So,n),K(Ps,i),Jn=n|i.baseLanes}function Uc(){K(So,Jn),K(Ps,Ps.current)}function zc(){Jn=So.current,J(Ps),J(So)}var gi=0,Et=null,Ft=null,he=null,wo=!1,Bs=!1,Qi=!1,Eo=0,qa=0,Fs=null,E0=0;function re(){throw Error(s(321))}function Hc(n,i){if(i===null)return!1;for(var r=0;r<i.length&&r<n.length;r++)if(!$e(n[r],i[r]))return!1;return!0}function Ic(n,i,r,c,f,m){return gi=m,Et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,k.H=n===null||n.memoizedState===null?cp:up,Qi=!1,m=r(c,f),Qi=!1,Bs&&(m=Rf(i,r,c,f)),Cf(n),m}function Cf(n){k.H=Mo;var i=Ft!==null&&Ft.next!==null;if(gi=0,he=Ft=Et=null,wo=!1,qa=0,Fs=null,i)throw Error(s(300));n===null||ye||(n=n.dependencies,n!==null&&mo(n)&&(ye=!0))}function Rf(n,i,r,c){Et=n;var f=0;do{if(Bs&&(Fs=null),qa=0,Bs=!1,25<=f)throw Error(s(301));if(f+=1,he=Ft=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=D0,m=i(r,c)}while(Bs);return m}function _0(){var n=k.H,i=n.useState()[0];return i=typeof i.then=="function"?Xa(i):i,n=n.useState()[0],(Ft!==null?Ft.memoizedState:null)!==n&&(Et.flags|=1024),i}function jc(){var n=Eo!==0;return Eo=0,n}function Gc(n,i,r){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~r}function Vc(n){if(wo){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wo=!1}gi=0,he=Ft=Et=null,Bs=!1,qa=Eo=0,Fs=null}function Ie(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?Et.memoizedState=he=n:he=he.next=n,he}function de(){if(Ft===null){var n=Et.alternate;n=n!==null?n.memoizedState:null}else n=Ft.next;var i=he===null?Et.memoizedState:he.next;if(i!==null)he=i,Ft=n;else{if(n===null)throw Et.alternate===null?Error(s(467)):Error(s(310));Ft=n,n={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},he===null?Et.memoizedState=he=n:he=he.next=n}return he}function qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xa(n){var i=qa;return qa+=1,Fs===null&&(Fs=[]),n=Sf(Fs,n,i),i=Et,(he===null?i.memoizedState:he.next)===null&&(i=i.alternate,k.H=i===null||i.memoizedState===null?cp:up),n}function _o(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Xa(n);if(n.$$typeof===C)return De(n)}throw Error(s(438,String(n)))}function Xc(n){var i=null,r=Et.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=Et.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=qc(),Et.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(n),c=0;c<n;c++)r[c]=Q;return i.index++,r}function Yn(n,i){return typeof i=="function"?i(n):i}function xo(n){var i=de();return Yc(i,Ft,n)}function Yc(n,i,r){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var A=f.next;f.next=m.next,m.next=A}i.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var x=A=null,R=null,z=i,X=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(Lt&W)===W:(gi&W)===W){var H=z.revertLane;if(H===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===Ns&&(X=!0);else if((gi&H)===H){z=z.next,H===Ns&&(X=!0);continue}else W={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(x=R=W,A=m):R=R.next=W,Et.lanes|=H,wi|=H;W=z.action,Qi&&r(m,W),m=z.hasEagerState?z.eagerState:r(m,W)}else H={lane:W,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},R===null?(x=R=H,A=m):R=R.next=H,Et.lanes|=W,wi|=W;z=z.next}while(z!==null&&z!==i);if(R===null?A=m:R.next=x,!$e(m,n.memoizedState)&&(ye=!0,X&&(r=ks,r!==null)))throw r;n.memoizedState=m,n.baseState=A,n.baseQueue=R,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function $c(n){var i=de(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var c=r.dispatch,f=r.pending,m=i.memoizedState;if(f!==null){r.pending=null;var A=f=f.next;do m=n(m,A.action),A=A.next;while(A!==f);$e(m,i.memoizedState)||(ye=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),r.lastRenderedState=m}return[m,c]}function Mf(n,i,r){var c=Et,f=de(),m=Nt;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=i();var A=!$e((Ft||f).memoizedState,r);A&&(f.memoizedState=r,ye=!0),f=f.queue;var x=Of.bind(null,c,f,n);if(Ya(2048,8,x,[n]),f.getSnapshot!==i||A||he!==null&&he.memoizedState.tag&1){if(c.flags|=2048,Us(9,To(),Lf.bind(null,c,f,r,i),null),qt===null)throw Error(s(349));m||(gi&124)!==0||Df(c,i,r)}return r}function Df(n,i,r){n.flags|=16384,n={getSnapshot:i,value:r},i=Et.updateQueue,i===null?(i=qc(),Et.updateQueue=i,i.stores=[n]):(r=i.stores,r===null?i.stores=[n]:r.push(n))}function Lf(n,i,r,c){i.value=r,i.getSnapshot=c,Nf(i)&&kf(n)}function Of(n,i,r){return r(function(){Nf(i)&&kf(n)})}function Nf(n){var i=n.getSnapshot;n=n.value;try{var r=i();return!$e(n,r)}catch{return!0}}function kf(n){var i=Ms(n,2);i!==null&&tn(i,n,2)}function Wc(n){var i=Ie();if(typeof n=="function"){var r=n;if(n=r(),Qi){ke(!0);try{r()}finally{ke(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:n},i}function Pf(n,i,r,c){return n.baseState=r,Yc(n,Ft,typeof c=="function"?c:Yn)}function x0(n,i,r,c,f){if(Ro(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){m.listeners.push(A)}};k.T!==null?r(!0):m.isTransition=!1,c(m),r=i.pending,r===null?(m.next=i.pending=m,Bf(i,m)):(m.next=r.next,i.pending=r.next=m)}}function Bf(n,i){var r=i.action,c=i.payload,f=n.state;if(i.isTransition){var m=k.T,A={};k.T=A;try{var x=r(f,c),R=k.S;R!==null&&R(A,x),Ff(n,i,x)}catch(z){Kc(n,i,z)}finally{k.T=m}}else try{m=r(f,c),Ff(n,i,m)}catch(z){Kc(n,i,z)}}function Ff(n,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Uf(n,i,c)},function(c){return Kc(n,i,c)}):Uf(n,i,r)}function Uf(n,i,r){i.status="fulfilled",i.value=r,zf(i),n.state=r,i=n.pending,i!==null&&(r=i.next,r===i?n.pending=null:(r=r.next,i.next=r,Bf(n,r)))}function Kc(n,i,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,zf(i),i=i.next;while(i!==c)}n.action=null}function zf(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Hf(n,i){return i}function If(n,i){if(Nt){var r=qt.formState;if(r!==null){t:{var c=Et;if(Nt){if(ie){e:{for(var f=ie,m=Tn;f.nodeType!==8;){if(!m){f=null;break e}if(f=Sn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ie=Sn(f.nextSibling),c=f.data==="F!";break t}}Yi(c)}c=!1}c&&(i=r[0])}}return r=Ie(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hf,lastRenderedState:i},r.queue=c,r=rp.bind(null,Et,c),c.dispatch=r,c=Wc(!1),m=eu.bind(null,Et,!1,c.queue),c=Ie(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,r=x0.bind(null,Et,f,m,r),f.dispatch=r,c.memoizedState=n,[i,r,!1]}function jf(n){var i=de();return Gf(i,Ft,n)}function Gf(n,i,r){if(i=Yc(n,i,Hf)[0],n=xo(Yn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Xa(i)}catch(A){throw A===Ha?vo:A}else c=i;i=de();var f=i.queue,m=f.dispatch;return r!==i.memoizedState&&(Et.flags|=2048,Us(9,To(),T0.bind(null,f,r),null)),[c,m,n]}function T0(n,i){n.action=i}function Vf(n){var i=de(),r=Ft;if(r!==null)return Gf(i,r,n);de(),i=i.memoizedState,r=de();var c=r.queue.dispatch;return r.memoizedState=n,[i,c,!1]}function Us(n,i,r,c){return n={tag:n,create:r,deps:c,inst:i,next:null},i=Et.updateQueue,i===null&&(i=qc(),Et.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,i.lastEffect=n),n}function To(){return{destroy:void 0,resource:void 0}}function qf(){return de().memoizedState}function Co(n,i,r,c){var f=Ie();c=c===void 0?null:c,Et.flags|=n,f.memoizedState=Us(1|i,To(),r,c)}function Ya(n,i,r,c){var f=de();c=c===void 0?null:c;var m=f.memoizedState.inst;Ft!==null&&c!==null&&Hc(c,Ft.memoizedState.deps)?f.memoizedState=Us(i,m,r,c):(Et.flags|=n,f.memoizedState=Us(1|i,m,r,c))}function Xf(n,i){Co(8390656,8,n,i)}function Yf(n,i){Ya(2048,8,n,i)}function $f(n,i){return Ya(4,2,n,i)}function Wf(n,i){return Ya(4,4,n,i)}function Kf(n,i){if(typeof i=="function"){n=n();var r=i(n);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Qf(n,i,r){r=r!=null?r.concat([n]):null,Ya(4,4,Kf.bind(null,i,n),r)}function Qc(){}function Zf(n,i){var r=de();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&Hc(i,c[1])?c[0]:(r.memoizedState=[n,i],n)}function Jf(n,i){var r=de();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&Hc(i,c[1]))return c[0];if(c=n(),Qi){ke(!0);try{n()}finally{ke(!1)}}return r.memoizedState=[c,i],c}function Zc(n,i,r){return r===void 0||(gi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=r,n=ng(),Et.lanes|=n,wi|=n,r)}function tp(n,i,r,c){return $e(r,i)?r:Ps.current!==null?(n=Zc(n,r,c),$e(n,i)||(ye=!0),n):(gi&42)===0?(ye=!0,n.memoizedState=r):(n=ng(),Et.lanes|=n,wi|=n,i)}function ep(n,i,r,c,f){var m=G.p;G.p=m!==0&&8>m?m:8;var A=k.T,x={};k.T=x,eu(n,!1,i,r);try{var R=f(),z=k.S;if(z!==null&&z(x,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var X=w0(R,c);$a(n,i,X,Je(n))}else $a(n,i,c,Je(n))}catch(W){$a(n,i,{then:function(){},status:"rejected",reason:W},Je())}finally{G.p=m,k.T=A}}function C0(){}function Jc(n,i,r,c){if(n.tag!==5)throw Error(s(476));var f=np(n).queue;ep(n,f,i,tt,r===null?C0:function(){return ip(n),r(c)})}function np(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:tt},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:r},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function ip(n){var i=np(n).next.queue;$a(n,i,{},Je())}function tu(){return De(dr)}function sp(){return de().memoizedState}function ap(){return de().memoizedState}function R0(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var r=Je();n=fi(r);var c=pi(i,n,r);c!==null&&(tn(c,i,r),ja(c,i,r)),i={cache:Dc()},n.payload=i;return}i=i.return}}function M0(n,i,r){var c=Je();r={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ro(n)?op(i,r):(r=Ac(n,i,r,c),r!==null&&(tn(r,n,c),lp(r,i,c)))}function rp(n,i,r){var c=Je();$a(n,i,r,c)}function $a(n,i,r,c){var f={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ro(n))op(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var A=i.lastRenderedState,x=m(A,r);if(f.hasEagerState=!0,f.eagerState=x,$e(x,A))return uo(n,i,f,0),qt===null&&co(),!1}catch{}finally{}if(r=Ac(n,i,f,c),r!==null)return tn(r,n,c),lp(r,i,c),!0}return!1}function eu(n,i,r,c){if(c={lane:2,revertLane:Nu(),action:c,hasEagerState:!1,eagerState:null,next:null},Ro(n)){if(i)throw Error(s(479))}else i=Ac(n,r,c,2),i!==null&&tn(i,n,2)}function Ro(n){var i=n.alternate;return n===Et||i!==null&&i===Et}function op(n,i){Bs=wo=!0;var r=n.pending;r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i}function lp(n,i,r){if((r&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,gd(n,r)}}var Mo={readContext:De,use:_o,useCallback:re,useContext:re,useEffect:re,useImperativeHandle:re,useLayoutEffect:re,useInsertionEffect:re,useMemo:re,useReducer:re,useRef:re,useState:re,useDebugValue:re,useDeferredValue:re,useTransition:re,useSyncExternalStore:re,useId:re,useHostTransitionStatus:re,useFormState:re,useActionState:re,useOptimistic:re,useMemoCache:re,useCacheRefresh:re},cp={readContext:De,use:_o,useCallback:function(n,i){return Ie().memoizedState=[n,i===void 0?null:i],n},useContext:De,useEffect:Xf,useImperativeHandle:function(n,i,r){r=r!=null?r.concat([n]):null,Co(4194308,4,Kf.bind(null,i,n),r)},useLayoutEffect:function(n,i){return Co(4194308,4,n,i)},useInsertionEffect:function(n,i){Co(4,2,n,i)},useMemo:function(n,i){var r=Ie();i=i===void 0?null:i;var c=n();if(Qi){ke(!0);try{n()}finally{ke(!1)}}return r.memoizedState=[c,i],c},useReducer:function(n,i,r){var c=Ie();if(r!==void 0){var f=r(i);if(Qi){ke(!0);try{r(i)}finally{ke(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=M0.bind(null,Et,n),[c.memoizedState,n]},useRef:function(n){var i=Ie();return n={current:n},i.memoizedState=n},useState:function(n){n=Wc(n);var i=n.queue,r=rp.bind(null,Et,i);return i.dispatch=r,[n.memoizedState,r]},useDebugValue:Qc,useDeferredValue:function(n,i){var r=Ie();return Zc(r,n,i)},useTransition:function(){var n=Wc(!1);return n=ep.bind(null,Et,n.queue,!0,!1),Ie().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,r){var c=Et,f=Ie();if(Nt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),qt===null)throw Error(s(349));(Lt&124)!==0||Df(c,i,r)}f.memoizedState=r;var m={value:r,getSnapshot:i};return f.queue=m,Xf(Of.bind(null,c,m,n),[n]),c.flags|=2048,Us(9,To(),Lf.bind(null,c,m,r,i),null),r},useId:function(){var n=Ie(),i=qt.identifierPrefix;if(Nt){var r=Vn,c=Gn;r=(c&~(1<<32-ne(c)-1)).toString(32)+r,i=""+i+"R"+r,r=Eo++,0<r&&(i+="H"+r.toString(32)),i+=""}else r=E0++,i=""+i+"r"+r.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:tu,useFormState:If,useActionState:If,useOptimistic:function(n){var i=Ie();i.memoizedState=i.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=eu.bind(null,Et,!0,r),r.dispatch=i,[n,i]},useMemoCache:Xc,useCacheRefresh:function(){return Ie().memoizedState=R0.bind(null,Et)}},up={readContext:De,use:_o,useCallback:Zf,useContext:De,useEffect:Yf,useImperativeHandle:Qf,useInsertionEffect:$f,useLayoutEffect:Wf,useMemo:Jf,useReducer:xo,useRef:qf,useState:function(){return xo(Yn)},useDebugValue:Qc,useDeferredValue:function(n,i){var r=de();return tp(r,Ft.memoizedState,n,i)},useTransition:function(){var n=xo(Yn)[0],i=de().memoizedState;return[typeof n=="boolean"?n:Xa(n),i]},useSyncExternalStore:Mf,useId:sp,useHostTransitionStatus:tu,useFormState:jf,useActionState:jf,useOptimistic:function(n,i){var r=de();return Pf(r,Ft,n,i)},useMemoCache:Xc,useCacheRefresh:ap},D0={readContext:De,use:_o,useCallback:Zf,useContext:De,useEffect:Yf,useImperativeHandle:Qf,useInsertionEffect:$f,useLayoutEffect:Wf,useMemo:Jf,useReducer:$c,useRef:qf,useState:function(){return $c(Yn)},useDebugValue:Qc,useDeferredValue:function(n,i){var r=de();return Ft===null?Zc(r,n,i):tp(r,Ft.memoizedState,n,i)},useTransition:function(){var n=$c(Yn)[0],i=de().memoizedState;return[typeof n=="boolean"?n:Xa(n),i]},useSyncExternalStore:Mf,useId:sp,useHostTransitionStatus:tu,useFormState:Vf,useActionState:Vf,useOptimistic:function(n,i){var r=de();return Ft!==null?Pf(r,Ft,n,i):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:Xc,useCacheRefresh:ap},zs=null,Wa=0;function Do(n){var i=Wa;return Wa+=1,zs===null&&(zs=[]),Sf(zs,n,i)}function Ka(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Lo(n,i){throw i.$$typeof===y?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function hp(n){var i=n._init;return i(n._payload)}function dp(n){function i(P,O){if(n){var F=P.deletions;F===null?(P.deletions=[O],P.flags|=16):F.push(O)}}function r(P,O){if(!n)return null;for(;O!==null;)i(P,O),O=O.sibling;return null}function c(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function f(P,O){return P=jn(P,O),P.index=0,P.sibling=null,P}function m(P,O,F){return P.index=F,n?(F=P.alternate,F!==null?(F=F.index,F<O?(P.flags|=67108866,O):F):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function A(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function x(P,O,F,Y){return O===null||O.tag!==6?(O=wc(F,P.mode,Y),O.return=P,O):(O=f(O,F),O.return=P,O)}function R(P,O,F,Y){var st=F.type;return st===w?X(P,O,F.props.children,Y,F.key):O!==null&&(O.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===V&&hp(st)===O.type)?(O=f(O,F.props),Ka(O,F),O.return=P,O):(O=fo(F.type,F.key,F.props,null,P.mode,Y),Ka(O,F),O.return=P,O)}function z(P,O,F,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==F.containerInfo||O.stateNode.implementation!==F.implementation?(O=Ec(F,P.mode,Y),O.return=P,O):(O=f(O,F.children||[]),O.return=P,O)}function X(P,O,F,Y,st){return O===null||O.tag!==7?(O=Gi(F,P.mode,Y,st),O.return=P,O):(O=f(O,F),O.return=P,O)}function W(P,O,F){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=wc(""+O,P.mode,F),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case b:return F=fo(O.type,O.key,O.props,null,P.mode,F),Ka(F,O),F.return=P,F;case v:return O=Ec(O,P.mode,F),O.return=P,O;case V:var Y=O._init;return O=Y(O._payload),W(P,O,F)}if(ct(O)||lt(O))return O=Gi(O,P.mode,F,null),O.return=P,O;if(typeof O.then=="function")return W(P,Do(O),F);if(O.$$typeof===C)return W(P,yo(P,O),F);Lo(P,O)}return null}function H(P,O,F,Y){var st=O!==null?O.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return st!==null?null:x(P,O,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return F.key===st?R(P,O,F,Y):null;case v:return F.key===st?z(P,O,F,Y):null;case V:return st=F._init,F=st(F._payload),H(P,O,F,Y)}if(ct(F)||lt(F))return st!==null?null:X(P,O,F,Y,null);if(typeof F.then=="function")return H(P,O,Do(F),Y);if(F.$$typeof===C)return H(P,O,yo(P,F),Y);Lo(P,F)}return null}function j(P,O,F,Y,st){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return P=P.get(F)||null,x(O,P,""+Y,st);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return P=P.get(Y.key===null?F:Y.key)||null,R(O,P,Y,st);case v:return P=P.get(Y.key===null?F:Y.key)||null,z(O,P,Y,st);case V:var _t=Y._init;return Y=_t(Y._payload),j(P,O,F,Y,st)}if(ct(Y)||lt(Y))return P=P.get(F)||null,X(O,P,Y,st,null);if(typeof Y.then=="function")return j(P,O,F,Do(Y),st);if(Y.$$typeof===C)return j(P,O,F,yo(O,Y),st);Lo(O,Y)}return null}function mt(P,O,F,Y){for(var st=null,_t=null,ot=O,pt=O=0,ve=null;ot!==null&&pt<F.length;pt++){ot.index>pt?(ve=ot,ot=null):ve=ot.sibling;var Ot=H(P,ot,F[pt],Y);if(Ot===null){ot===null&&(ot=ve);break}n&&ot&&Ot.alternate===null&&i(P,ot),O=m(Ot,O,pt),_t===null?st=Ot:_t.sibling=Ot,_t=Ot,ot=ve}if(pt===F.length)return r(P,ot),Nt&&qi(P,pt),st;if(ot===null){for(;pt<F.length;pt++)ot=W(P,F[pt],Y),ot!==null&&(O=m(ot,O,pt),_t===null?st=ot:_t.sibling=ot,_t=ot);return Nt&&qi(P,pt),st}for(ot=c(ot);pt<F.length;pt++)ve=j(ot,P,pt,F[pt],Y),ve!==null&&(n&&ve.alternate!==null&&ot.delete(ve.key===null?pt:ve.key),O=m(ve,O,pt),_t===null?st=ve:_t.sibling=ve,_t=ve);return n&&ot.forEach(function(Li){return i(P,Li)}),Nt&&qi(P,pt),st}function ft(P,O,F,Y){if(F==null)throw Error(s(151));for(var st=null,_t=null,ot=O,pt=O=0,ve=null,Ot=F.next();ot!==null&&!Ot.done;pt++,Ot=F.next()){ot.index>pt?(ve=ot,ot=null):ve=ot.sibling;var Li=H(P,ot,Ot.value,Y);if(Li===null){ot===null&&(ot=ve);break}n&&ot&&Li.alternate===null&&i(P,ot),O=m(Li,O,pt),_t===null?st=Li:_t.sibling=Li,_t=Li,ot=ve}if(Ot.done)return r(P,ot),Nt&&qi(P,pt),st;if(ot===null){for(;!Ot.done;pt++,Ot=F.next())Ot=W(P,Ot.value,Y),Ot!==null&&(O=m(Ot,O,pt),_t===null?st=Ot:_t.sibling=Ot,_t=Ot);return Nt&&qi(P,pt),st}for(ot=c(ot);!Ot.done;pt++,Ot=F.next())Ot=j(ot,P,pt,Ot.value,Y),Ot!==null&&(n&&Ot.alternate!==null&&ot.delete(Ot.key===null?pt:Ot.key),O=m(Ot,O,pt),_t===null?st=Ot:_t.sibling=Ot,_t=Ot);return n&&ot.forEach(function(Lv){return i(P,Lv)}),Nt&&qi(P,pt),st}function zt(P,O,F,Y){if(typeof F=="object"&&F!==null&&F.type===w&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case b:t:{for(var st=F.key;O!==null;){if(O.key===st){if(st=F.type,st===w){if(O.tag===7){r(P,O.sibling),Y=f(O,F.props.children),Y.return=P,P=Y;break t}}else if(O.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===V&&hp(st)===O.type){r(P,O.sibling),Y=f(O,F.props),Ka(Y,F),Y.return=P,P=Y;break t}r(P,O);break}else i(P,O);O=O.sibling}F.type===w?(Y=Gi(F.props.children,P.mode,Y,F.key),Y.return=P,P=Y):(Y=fo(F.type,F.key,F.props,null,P.mode,Y),Ka(Y,F),Y.return=P,P=Y)}return A(P);case v:t:{for(st=F.key;O!==null;){if(O.key===st)if(O.tag===4&&O.stateNode.containerInfo===F.containerInfo&&O.stateNode.implementation===F.implementation){r(P,O.sibling),Y=f(O,F.children||[]),Y.return=P,P=Y;break t}else{r(P,O);break}else i(P,O);O=O.sibling}Y=Ec(F,P.mode,Y),Y.return=P,P=Y}return A(P);case V:return st=F._init,F=st(F._payload),zt(P,O,F,Y)}if(ct(F))return mt(P,O,F,Y);if(lt(F)){if(st=lt(F),typeof st!="function")throw Error(s(150));return F=st.call(F),ft(P,O,F,Y)}if(typeof F.then=="function")return zt(P,O,Do(F),Y);if(F.$$typeof===C)return zt(P,O,yo(P,F),Y);Lo(P,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,O!==null&&O.tag===6?(r(P,O.sibling),Y=f(O,F),Y.return=P,P=Y):(r(P,O),Y=wc(F,P.mode,Y),Y.return=P,P=Y),A(P)):r(P,O)}return function(P,O,F,Y){try{Wa=0;var st=zt(P,O,F,Y);return zs=null,st}catch(ot){if(ot===Ha||ot===vo)throw ot;var _t=We(29,ot,null,P.mode);return _t.lanes=Y,_t.return=P,_t}finally{}}}var Hs=dp(!0),fp=dp(!1),fn=$(null),Cn=null;function mi(n){var i=n.alternate;K(ge,ge.current&1),K(fn,n),Cn===null&&(i===null||Ps.current!==null||i.memoizedState!==null)&&(Cn=n)}function pp(n){if(n.tag===22){if(K(ge,ge.current),K(fn,n),Cn===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Cn=n)}}else yi()}function yi(){K(ge,ge.current),K(fn,fn.current)}function $n(n){J(fn),Cn===n&&(Cn=null),J(ge)}var ge=$(0);function Oo(n){for(var i=n;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||qu(r)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function nu(n,i,r,c){i=n.memoizedState,r=r(c,i),r=r==null?i:g({},i,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var iu={enqueueSetState:function(n,i,r){n=n._reactInternals;var c=Je(),f=fi(c);f.payload=i,r!=null&&(f.callback=r),i=pi(n,f,c),i!==null&&(tn(i,n,c),ja(i,n,c))},enqueueReplaceState:function(n,i,r){n=n._reactInternals;var c=Je(),f=fi(c);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=pi(n,f,c),i!==null&&(tn(i,n,c),ja(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var r=Je(),c=fi(r);c.tag=2,i!=null&&(c.callback=i),i=pi(n,c,r),i!==null&&(tn(i,n,r),ja(i,n,r))}};function gp(n,i,r,c,f,m,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,A):i.prototype&&i.prototype.isPureReactComponent?!Oa(r,c)||!Oa(f,m):!0}function mp(n,i,r,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==n&&iu.enqueueReplaceState(i,i.state,null)}function Zi(n,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(n=n.defaultProps){r===i&&(r=g({},r));for(var f in n)r[f]===void 0&&(r[f]=n[f])}return r}var No=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function yp(n){No(n)}function bp(n){console.error(n)}function vp(n){No(n)}function ko(n,i){try{var r=n.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Ap(n,i,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function su(n,i,r){return r=fi(r),r.tag=3,r.payload={element:null},r.callback=function(){ko(n,i)},r}function Sp(n){return n=fi(n),n.tag=3,n}function wp(n,i,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Ap(i,r,c)}}var A=r.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){Ap(i,r,c),typeof f!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function L0(n,i,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&Fa(i,r,f,!0),r=fn.current,r!==null){switch(r.tag){case 13:return Cn===null?Ru():r.alternate===null&&se===0&&(se=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Nc?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),Du(n,c,f)),!1;case 22:return r.flags|=65536,c===Nc?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),Du(n,c,f)),!1}throw Error(s(435,r.tag))}return Du(n,c,f),Ru(),!1}if(Nt)return i=fn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Tc&&(n=Error(s(422),{cause:c}),Ba(cn(n,r)))):(c!==Tc&&(i=Error(s(423),{cause:c}),Ba(cn(i,r))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=cn(c,r),f=su(n.stateNode,c,f),Bc(n,f),se!==4&&(se=2)),!1;var m=Error(s(520),{cause:c});if(m=cn(m,r),ir===null?ir=[m]:ir.push(m),se!==4&&(se=2),i===null)return!0;c=cn(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,n=f&-f,r.lanes|=n,n=su(r.stateNode,c,n),Bc(r,n),!1;case 1:if(i=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ei===null||!Ei.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Sp(f),wp(f,n,r,c),Bc(r,f),!1}r=r.return}while(r!==null);return!1}var Ep=Error(s(461)),ye=!1;function _e(n,i,r,c){i.child=n===null?fp(i,null,r,c):Hs(i,n.child,r,c)}function _p(n,i,r,c,f){r=r.render;var m=i.ref;if("ref"in c){var A={};for(var x in c)x!=="ref"&&(A[x]=c[x])}else A=c;return Wi(i),c=Ic(n,i,r,A,m,f),x=jc(),n!==null&&!ye?(Gc(n,i,f),Wn(n,i,f)):(Nt&&x&&_c(i),i.flags|=1,_e(n,i,c,f),i.child)}function xp(n,i,r,c,f){if(n===null){var m=r.type;return typeof m=="function"&&!Sc(m)&&m.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=m,Tp(n,i,m,c,f)):(n=fo(r.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!du(n,f)){var A=m.memoizedProps;if(r=r.compare,r=r!==null?r:Oa,r(A,c)&&n.ref===i.ref)return Wn(n,i,f)}return i.flags|=1,n=jn(m,c),n.ref=i.ref,n.return=i,i.child=n}function Tp(n,i,r,c,f){if(n!==null){var m=n.memoizedProps;if(Oa(m,c)&&n.ref===i.ref)if(ye=!1,i.pendingProps=c=m,du(n,f))(n.flags&131072)!==0&&(ye=!0);else return i.lanes=n.lanes,Wn(n,i,f)}return au(n,i,r,c,f)}function Cp(n,i,r){var c=i.pendingProps,f=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=m!==null?m.baseLanes|r:r,n!==null){for(f=i.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~c}else i.childLanes=0,i.child=null;return Rp(n,i,c,r)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&bo(i,m!==null?m.cachePool:null),m!==null?Tf(i,m):Uc(),pp(i);else return i.lanes=i.childLanes=536870912,Rp(n,i,m!==null?m.baseLanes|r:r,r)}else m!==null?(bo(i,m.cachePool),Tf(i,m),yi(),i.memoizedState=null):(n!==null&&bo(i,null),Uc(),yi());return _e(n,i,f,r),i.child}function Rp(n,i,r,c){var f=Oc();return f=f===null?null:{parent:pe._currentValue,pool:f},i.memoizedState={baseLanes:r,cachePool:f},n!==null&&bo(i,null),Uc(),pp(i),n!==null&&Fa(n,i,c,!0),null}function Po(n,i){var r=i.ref;if(r===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(i.flags|=4194816)}}function au(n,i,r,c,f){return Wi(i),r=Ic(n,i,r,c,void 0,f),c=jc(),n!==null&&!ye?(Gc(n,i,f),Wn(n,i,f)):(Nt&&c&&_c(i),i.flags|=1,_e(n,i,r,f),i.child)}function Mp(n,i,r,c,f,m){return Wi(i),i.updateQueue=null,r=Rf(i,c,r,f),Cf(n),c=jc(),n!==null&&!ye?(Gc(n,i,m),Wn(n,i,m)):(Nt&&c&&_c(i),i.flags|=1,_e(n,i,r,m),i.child)}function Dp(n,i,r,c,f){if(Wi(i),i.stateNode===null){var m=Ds,A=r.contextType;typeof A=="object"&&A!==null&&(m=De(A)),m=new r(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=iu,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},kc(i),A=r.contextType,m.context=typeof A=="object"&&A!==null?De(A):Ds,m.state=i.memoizedState,A=r.getDerivedStateFromProps,typeof A=="function"&&(nu(i,r,A,c),m.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(A=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),A!==m.state&&iu.enqueueReplaceState(m,m.state,null),Va(i,c,m,f),Ga(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){m=i.stateNode;var x=i.memoizedProps,R=Zi(r,x);m.props=R;var z=m.context,X=r.contextType;A=Ds,typeof X=="object"&&X!==null&&(A=De(X));var W=r.getDerivedStateFromProps;X=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x||z!==A)&&mp(i,m,c,A),di=!1;var H=i.memoizedState;m.state=H,Va(i,c,m,f),Ga(),z=i.memoizedState,x||H!==z||di?(typeof W=="function"&&(nu(i,r,W,c),z=i.memoizedState),(R=di||gp(i,r,R,c,H,z,A))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=z),m.props=c,m.state=z,m.context=A,c=R):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,Pc(n,i),A=i.memoizedProps,X=Zi(r,A),m.props=X,W=i.pendingProps,H=m.context,z=r.contextType,R=Ds,typeof z=="object"&&z!==null&&(R=De(z)),x=r.getDerivedStateFromProps,(z=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A!==W||H!==R)&&mp(i,m,c,R),di=!1,H=i.memoizedState,m.state=H,Va(i,c,m,f),Ga();var j=i.memoizedState;A!==W||H!==j||di||n!==null&&n.dependencies!==null&&mo(n.dependencies)?(typeof x=="function"&&(nu(i,r,x,c),j=i.memoizedState),(X=di||gp(i,r,X,c,H,j,R)||n!==null&&n.dependencies!==null&&mo(n.dependencies))?(z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,j,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,j,R)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=j),m.props=c,m.state=j,m.context=R,c=X):(typeof m.componentDidUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(i.flags|=1024),c=!1)}return m=c,Po(n,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&c?(i.child=Hs(i,n.child,null,f),i.child=Hs(i,null,r,f)):_e(n,i,r,f),i.memoizedState=m.state,n=i.child):n=Wn(n,i,f),n}function Lp(n,i,r,c){return Pa(),i.flags|=256,_e(n,i,r,c),i.child}var ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ou(n){return{baseLanes:n,cachePool:bf()}}function lu(n,i,r){return n=n!==null?n.childLanes&~r:0,i&&(n|=pn),n}function Op(n,i,r){var c=i.pendingProps,f=!1,m=(i.flags&128)!==0,A;if((A=m)||(A=n!==null&&n.memoizedState===null?!1:(ge.current&2)!==0),A&&(f=!0,i.flags&=-129),A=(i.flags&32)!==0,i.flags&=-33,n===null){if(Nt){if(f?mi(i):yi(),Nt){var x=ie,R;if(R=x){t:{for(R=x,x=Tn;R.nodeType!==8;){if(!x){x=null;break t}if(R=Sn(R.nextSibling),R===null){x=null;break t}}x=R}x!==null?(i.memoizedState={dehydrated:x,treeContext:Vi!==null?{id:Gn,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},R=We(18,null,null,0),R.stateNode=x,R.return=i,i.child=R,Pe=i,ie=null,R=!0):R=!1}R||Yi(i)}if(x=i.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return qu(x)?i.lanes=32:i.lanes=536870912,null;$n(i)}return x=c.children,c=c.fallback,f?(yi(),f=i.mode,x=Bo({mode:"hidden",children:x},f),c=Gi(c,f,r,null),x.return=i,c.return=i,x.sibling=c,i.child=x,f=i.child,f.memoizedState=ou(r),f.childLanes=lu(n,A,r),i.memoizedState=ru,c):(mi(i),cu(i,x))}if(R=n.memoizedState,R!==null&&(x=R.dehydrated,x!==null)){if(m)i.flags&256?(mi(i),i.flags&=-257,i=uu(n,i,r)):i.memoizedState!==null?(yi(),i.child=n.child,i.flags|=128,i=null):(yi(),f=c.fallback,x=i.mode,c=Bo({mode:"visible",children:c.children},x),f=Gi(f,x,r,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,Hs(i,n.child,null,r),c=i.child,c.memoizedState=ou(r),c.childLanes=lu(n,A,r),i.memoizedState=ru,i=f);else if(mi(i),qu(x)){if(A=x.nextSibling&&x.nextSibling.dataset,A)var z=A.dgst;A=z,c=Error(s(419)),c.stack="",c.digest=A,Ba({value:c,source:null,stack:null}),i=uu(n,i,r)}else if(ye||Fa(n,i,r,!1),A=(r&n.childLanes)!==0,ye||A){if(A=qt,A!==null&&(c=r&-r,c=(c&42)!==0?1:Xl(c),c=(c&(A.suspendedLanes|r))!==0?0:c,c!==0&&c!==R.retryLane))throw R.retryLane=c,Ms(n,c),tn(A,n,c),Ep;x.data==="$?"||Ru(),i=uu(n,i,r)}else x.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=R.treeContext,ie=Sn(x.nextSibling),Pe=i,Nt=!0,Xi=null,Tn=!1,n!==null&&(hn[dn++]=Gn,hn[dn++]=Vn,hn[dn++]=Vi,Gn=n.id,Vn=n.overflow,Vi=i),i=cu(i,c.children),i.flags|=4096);return i}return f?(yi(),f=c.fallback,x=i.mode,R=n.child,z=R.sibling,c=jn(R,{mode:"hidden",children:c.children}),c.subtreeFlags=R.subtreeFlags&65011712,z!==null?f=jn(z,f):(f=Gi(f,x,r,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,x=n.child.memoizedState,x===null?x=ou(r):(R=x.cachePool,R!==null?(z=pe._currentValue,R=R.parent!==z?{parent:z,pool:z}:R):R=bf(),x={baseLanes:x.baseLanes|r,cachePool:R}),f.memoizedState=x,f.childLanes=lu(n,A,r),i.memoizedState=ru,c):(mi(i),r=n.child,n=r.sibling,r=jn(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,n!==null&&(A=i.deletions,A===null?(i.deletions=[n],i.flags|=16):A.push(n)),i.child=r,i.memoizedState=null,r)}function cu(n,i){return i=Bo({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Bo(n,i){return n=We(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function uu(n,i,r){return Hs(i,n.child,null,r),n=cu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Np(n,i,r){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Rc(n.return,i,r)}function hu(n,i,r,c,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=r,m.tailMode=f)}function kp(n,i,r){var c=i.pendingProps,f=c.revealOrder,m=c.tail;if(_e(n,i,c.children,r),c=ge.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Np(n,r,i);else if(n.tag===19)Np(n,r,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(K(ge,c),f){case"forwards":for(r=i.child,f=null;r!==null;)n=r.alternate,n!==null&&Oo(n)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),hu(i,!1,f,r,m);break;case"backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Oo(n)===null){i.child=f;break}n=f.sibling,f.sibling=r,r=f,f=n}hu(i,!0,r,null,m);break;case"together":hu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Wn(n,i,r){if(n!==null&&(i.dependencies=n.dependencies),wi|=i.lanes,(r&i.childLanes)===0)if(n!==null){if(Fa(n,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,r=jn(n,n.pendingProps),i.child=r,r.return=i;n.sibling!==null;)n=n.sibling,r=r.sibling=jn(n,n.pendingProps),r.return=i;r.sibling=null}return i.child}function du(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&mo(n)))}function O0(n,i,r){switch(i.tag){case 3:Rt(i,i.stateNode.containerInfo),hi(i,pe,n.memoizedState.cache),Pa();break;case 27:case 5:It(i);break;case 4:Rt(i,i.stateNode.containerInfo);break;case 10:hi(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(mi(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Op(n,i,r):(mi(i),n=Wn(n,i,r),n!==null?n.sibling:null);mi(i);break;case 19:var f=(n.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(Fa(n,i,r,!1),c=(r&i.childLanes)!==0),f){if(c)return kp(n,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),K(ge,ge.current),c)break;return null;case 22:case 23:return i.lanes=0,Cp(n,i,r);case 24:hi(i,pe,n.memoizedState.cache)}return Wn(n,i,r)}function Pp(n,i,r){if(n!==null)if(n.memoizedProps!==i.pendingProps)ye=!0;else{if(!du(n,r)&&(i.flags&128)===0)return ye=!1,O0(n,i,r);ye=(n.flags&131072)!==0}else ye=!1,Nt&&(i.flags&1048576)!==0&&hf(i,go,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")Sc(c)?(n=Zi(c,n),i.tag=1,i=Dp(null,i,c,n,r)):(i.tag=0,i=au(null,i,c,n,r));else{if(c!=null){if(f=c.$$typeof,f===N){i.tag=11,i=_p(null,i,c,n,r);break t}else if(f===U){i.tag=14,i=xp(null,i,c,n,r);break t}}throw i=rt(c)||c,Error(s(306,i,""))}}return i;case 0:return au(n,i,i.type,i.pendingProps,r);case 1:return c=i.type,f=Zi(c,i.pendingProps),Dp(n,i,c,f,r);case 3:t:{if(Rt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var m=i.memoizedState;f=m.element,Pc(n,i),Va(i,c,null,r);var A=i.memoizedState;if(c=A.cache,hi(i,pe,c),c!==m.cache&&Mc(i,[pe],r,!0),Ga(),c=A.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:A.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Lp(n,i,c,r);break t}else if(c!==f){f=cn(Error(s(424)),i),Ba(f),i=Lp(n,i,c,r);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ie=Sn(n.firstChild),Pe=i,Nt=!0,Xi=null,Tn=!0,r=fp(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Pa(),c===f){i=Wn(n,i,r);break t}_e(n,i,c,r)}i=i.child}return i;case 26:return Po(n,i),n===null?(r=zg(i.type,null,i.pendingProps,null))?i.memoizedState=r:Nt||(r=i.type,n=i.pendingProps,c=Ko(at.current).createElement(r),c[Me]=i,c[ze]=n,Te(c,r,n),me(c),i.stateNode=c):i.memoizedState=zg(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return It(i),n===null&&Nt&&(c=i.stateNode=Bg(i.type,i.pendingProps,at.current),Pe=i,Tn=!0,f=ie,Ti(i.type)?(Xu=f,ie=Sn(c.firstChild)):ie=f),_e(n,i,i.pendingProps.children,r),Po(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Nt&&((f=c=ie)&&(c=rv(c,i.type,i.pendingProps,Tn),c!==null?(i.stateNode=c,Pe=i,ie=Sn(c.firstChild),Tn=!1,f=!0):f=!1),f||Yi(i)),It(i),f=i.type,m=i.pendingProps,A=n!==null?n.memoizedProps:null,c=m.children,ju(f,m)?c=null:A!==null&&ju(f,A)&&(i.flags|=32),i.memoizedState!==null&&(f=Ic(n,i,_0,null,null,r),dr._currentValue=f),Po(n,i),_e(n,i,c,r),i.child;case 6:return n===null&&Nt&&((n=r=ie)&&(r=ov(r,i.pendingProps,Tn),r!==null?(i.stateNode=r,Pe=i,ie=null,n=!0):n=!1),n||Yi(i)),null;case 13:return Op(n,i,r);case 4:return Rt(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Hs(i,null,c,r):_e(n,i,c,r),i.child;case 11:return _p(n,i,i.type,i.pendingProps,r);case 7:return _e(n,i,i.pendingProps,r),i.child;case 8:return _e(n,i,i.pendingProps.children,r),i.child;case 12:return _e(n,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,hi(i,i.type,c.value),_e(n,i,c.children,r),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Wi(i),f=De(f),c=c(f),i.flags|=1,_e(n,i,c,r),i.child;case 14:return xp(n,i,i.type,i.pendingProps,r);case 15:return Tp(n,i,i.type,i.pendingProps,r);case 19:return kp(n,i,r);case 31:return c=i.pendingProps,r=i.mode,c={mode:c.mode,children:c.children},n===null?(r=Bo(c,r),r.ref=i.ref,i.child=r,r.return=i,i=r):(r=jn(n.child,c),r.ref=i.ref,i.child=r,r.return=i,i=r),i;case 22:return Cp(n,i,r);case 24:return Wi(i),c=De(pe),n===null?(f=Oc(),f===null&&(f=qt,m=Dc(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),i.memoizedState={parent:c,cache:f},kc(i),hi(i,pe,f)):((n.lanes&r)!==0&&(Pc(n,i),Va(i,null,null,r),Ga()),f=n.memoizedState,m=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),hi(i,pe,c)):(c=m.cache,hi(i,pe,c),c!==f.cache&&Mc(i,[pe],r,!0))),_e(n,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Kn(n){n.flags|=4}function Bp(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Vg(i)){if(i=fn.current,i!==null&&((Lt&4194048)===Lt?Cn!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||i!==Cn))throw Ia=Nc,vf;n.flags|=8192}}function Fo(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?fd():536870912,n.lanes|=i,Vs|=i)}function Qa(n,i){if(!Nt)switch(n.tailMode){case"hidden":i=n.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Qt(n){var i=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(i)for(var f=n.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=r,i}function N0(n,i,r){var c=i.pendingProps;switch(xc(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(i),null;case 1:return Qt(i),null;case 3:return r=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Xn(pe),Xt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ka(i)?Kn(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pf())),Qt(i),null;case 26:return r=i.memoizedState,n===null?(Kn(i),r!==null?(Qt(i),Bp(i,r)):(Qt(i),i.flags&=-16777217)):r?r!==n.memoizedState?(Kn(i),Qt(i),Bp(i,r)):(Qt(i),i.flags&=-16777217):(n.memoizedProps!==c&&Kn(i),Qt(i),i.flags&=-16777217),null;case 27:Ue(i),r=at.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Kn(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Qt(i),null}n=et.current,ka(i)?df(i):(n=Bg(f,c,r),i.stateNode=n,Kn(i))}return Qt(i),null;case 5:if(Ue(i),r=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Kn(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Qt(i),null}if(n=et.current,ka(i))df(i);else{switch(f=Ko(at.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(r,{is:c.is}):f.createElement(r)}}n[Me]=i,n[ze]=c;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch(Te(n,r,c),r){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Kn(i)}}return Qt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&Kn(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=at.current,ka(i)){if(n=i.stateNode,r=i.memoizedProps,c=null,f=Pe,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Me]=i,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Mg(n.nodeValue,r)),n||Yi(i)}else n=Ko(n).createTextNode(c),n[Me]=i,i.stateNode=n}return Qt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ka(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Me]=i}else Pa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Qt(i),f=!1}else f=pf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?($n(i),i):($n(i),null)}if($n(i),(i.flags&128)!==0)return i.lanes=r,i;if(r=c!==null,n=n!==null&&n.memoizedState!==null,r){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)}return r!==n&&r&&(i.child.flags|=8192),Fo(i,i.updateQueue),Qt(i),null;case 4:return Xt(),n===null&&Fu(i.stateNode.containerInfo),Qt(i),null;case 10:return Xn(i.type),Qt(i),null;case 19:if(J(ge),f=i.memoizedState,f===null)return Qt(i),null;if(c=(i.flags&128)!==0,m=f.rendering,m===null)if(c)Qa(f,!1);else{if(se!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Oo(n),m!==null){for(i.flags|=128,Qa(f,!1),n=m.updateQueue,i.updateQueue=n,Fo(i,n),i.subtreeFlags=0,n=r,r=i.child;r!==null;)uf(r,n),r=r.sibling;return K(ge,ge.current&1|2),i.child}n=n.sibling}f.tail!==null&&Ee()>Ho&&(i.flags|=128,c=!0,Qa(f,!1),i.lanes=4194304)}else{if(!c)if(n=Oo(m),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,Fo(i,n),Qa(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Nt)return Qt(i),null}else 2*Ee()-f.renderingStartTime>Ho&&r!==536870912&&(i.flags|=128,c=!0,Qa(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(n=f.last,n!==null?n.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ee(),i.sibling=null,n=ge.current,K(ge,c?n&1|2:n&1),i):(Qt(i),null);case 22:case 23:return $n(i),zc(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(Qt(i),i.subtreeFlags&6&&(i.flags|=8192)):Qt(i),r=i.updateQueue,r!==null&&Fo(i,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),n!==null&&J(Ki),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Xn(pe),Qt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function k0(n,i){switch(xc(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Xn(pe),Xt(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ue(i),null;case 13:if($n(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Pa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(ge),null;case 4:return Xt(),null;case 10:return Xn(i.type),null;case 22:case 23:return $n(i),zc(),n!==null&&J(Ki),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Xn(pe),null;case 25:return null;default:return null}}function Fp(n,i){switch(xc(i),i.tag){case 3:Xn(pe),Xt();break;case 26:case 27:case 5:Ue(i);break;case 4:Xt();break;case 13:$n(i);break;case 19:J(ge);break;case 10:Xn(i.type);break;case 22:case 23:$n(i),zc(),n!==null&&J(Ki);break;case 24:Xn(pe)}}function Za(n,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&n)===n){c=void 0;var m=r.create,A=r.inst;c=m(),A.destroy=c}r=r.next}while(r!==f)}}catch(x){jt(i,i.return,x)}}function bi(n,i,r){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var A=c.inst,x=A.destroy;if(x!==void 0){A.destroy=void 0,f=i;var R=r,z=x;try{z()}catch(X){jt(f,R,X)}}}c=c.next}while(c!==m)}}catch(X){jt(i,i.return,X)}}function Up(n){var i=n.updateQueue;if(i!==null){var r=n.stateNode;try{xf(i,r)}catch(c){jt(n,n.return,c)}}}function zp(n,i,r){r.props=Zi(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){jt(n,i,c)}}function Ja(n,i){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(f){jt(n,i,f)}}function Rn(n,i){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){jt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){jt(n,i,f)}else r.current=null}function Hp(n){var i=n.type,r=n.memoizedProps,c=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){jt(n,n.return,f)}}function fu(n,i,r){try{var c=n.stateNode;ev(c,n.type,r,i),c[ze]=i}catch(f){jt(n,n.return,f)}}function Ip(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ti(n.type)||n.tag===4}function pu(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Ip(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ti(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gu(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(n),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Wo));else if(c!==4&&(c===27&&Ti(n.type)&&(r=n.stateNode,i=null),n=n.child,n!==null))for(gu(n,i,r),n=n.sibling;n!==null;)gu(n,i,r),n=n.sibling}function Uo(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?r.insertBefore(n,i):r.appendChild(n);else if(c!==4&&(c===27&&Ti(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Uo(n,i,r),n=n.sibling;n!==null;)Uo(n,i,r),n=n.sibling}function jp(n){var i=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Te(i,c,r),i[Me]=n,i[ze]=r}catch(m){jt(n,n.return,m)}}var Qn=!1,oe=!1,mu=!1,Gp=typeof WeakSet=="function"?WeakSet:Set,be=null;function P0(n,i){if(n=n.containerInfo,Hu=nl,n=Jd(n),pc(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else t:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var A=0,x=-1,R=-1,z=0,X=0,W=n,H=null;e:for(;;){for(var j;W!==r||f!==0&&W.nodeType!==3||(x=A+f),W!==m||c!==0&&W.nodeType!==3||(R=A+c),W.nodeType===3&&(A+=W.nodeValue.length),(j=W.firstChild)!==null;)H=W,W=j;for(;;){if(W===n)break e;if(H===r&&++z===f&&(x=A),H===m&&++X===c&&(R=A),(j=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=j}r=x===-1||R===-1?null:{start:x,end:R}}else r=null}r=r||{start:0,end:0}}else r=null;for(Iu={focusedElem:n,selectionRange:r},nl=!1,be=i;be!==null;)if(i=be,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,be=n;else for(;be!==null;){switch(i=be,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,r=i,f=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var mt=Zi(r.type,f,r.elementType===r.type);n=c.getSnapshotBeforeUpdate(mt,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(ft){jt(r,r.return,ft)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,r=n.nodeType,r===9)Vu(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Vu(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,be=n;break}be=i.return}}function Vp(n,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:vi(n,r),c&4&&Za(5,r);break;case 1:if(vi(n,r),c&4)if(n=r.stateNode,i===null)try{n.componentDidMount()}catch(A){jt(r,r.return,A)}else{var f=Zi(r.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(A){jt(r,r.return,A)}}c&64&&Up(r),c&512&&Ja(r,r.return);break;case 3:if(vi(n,r),c&64&&(n=r.updateQueue,n!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{xf(n,i)}catch(A){jt(r,r.return,A)}}break;case 27:i===null&&c&4&&jp(r);case 26:case 5:vi(n,r),i===null&&c&4&&Hp(r),c&512&&Ja(r,r.return);break;case 12:vi(n,r);break;case 13:vi(n,r),c&4&&Yp(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=V0.bind(null,r),lv(n,r))));break;case 22:if(c=r.memoizedState!==null||Qn,!c){i=i!==null&&i.memoizedState!==null||oe,f=Qn;var m=oe;Qn=c,(oe=i)&&!m?Ai(n,r,(r.subtreeFlags&8772)!==0):vi(n,r),Qn=f,oe=m}break;case 30:break;default:vi(n,r)}}function qp(n){var i=n.alternate;i!==null&&(n.alternate=null,qp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Wl(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Yt=null,je=!1;function Zn(n,i,r){for(r=r.child;r!==null;)Xp(n,i,r),r=r.sibling}function Xp(n,i,r){if(ee&&typeof ee.onCommitFiberUnmount=="function")try{ee.onCommitFiberUnmount(Fi,r)}catch{}switch(r.tag){case 26:oe||Rn(r,i),Zn(n,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:oe||Rn(r,i);var c=Yt,f=je;Ti(r.type)&&(Yt=r.stateNode,je=!1),Zn(n,i,r),lr(r.stateNode),Yt=c,je=f;break;case 5:oe||Rn(r,i);case 6:if(c=Yt,f=je,Yt=null,Zn(n,i,r),Yt=c,je=f,Yt!==null)if(je)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(r.stateNode)}catch(m){jt(r,i,m)}else try{Yt.removeChild(r.stateNode)}catch(m){jt(r,i,m)}break;case 18:Yt!==null&&(je?(n=Yt,kg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),mr(n)):kg(Yt,r.stateNode));break;case 4:c=Yt,f=je,Yt=r.stateNode.containerInfo,je=!0,Zn(n,i,r),Yt=c,je=f;break;case 0:case 11:case 14:case 15:oe||bi(2,r,i),oe||bi(4,r,i),Zn(n,i,r);break;case 1:oe||(Rn(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&zp(r,i,c)),Zn(n,i,r);break;case 21:Zn(n,i,r);break;case 22:oe=(c=oe)||r.memoizedState!==null,Zn(n,i,r),oe=c;break;default:Zn(n,i,r)}}function Yp(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{mr(n)}catch(r){jt(i,i.return,r)}}function B0(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Gp),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Gp),i;default:throw Error(s(435,n.tag))}}function yu(n,i){var r=B0(n);i.forEach(function(c){var f=q0.bind(null,n,c);r.has(c)||(r.add(c),c.then(f,f))})}function Ke(n,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],m=n,A=i,x=A;t:for(;x!==null;){switch(x.tag){case 27:if(Ti(x.type)){Yt=x.stateNode,je=!1;break t}break;case 5:Yt=x.stateNode,je=!1;break t;case 3:case 4:Yt=x.stateNode.containerInfo,je=!0;break t}x=x.return}if(Yt===null)throw Error(s(160));Xp(m,A,f),Yt=null,je=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)$p(i,n),i=i.sibling}var An=null;function $p(n,i){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ke(i,n),Qe(n),c&4&&(bi(3,n,n.return),Za(3,n),bi(5,n,n.return));break;case 1:Ke(i,n),Qe(n),c&512&&(oe||r===null||Rn(r,r.return)),c&64&&Qn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=An;if(Ke(i,n),Qe(n),c&512&&(oe||r===null||Rn(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){t:{c=n.type,r=n.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ea]||m[Me]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Te(m,c,r),m[Me]=n,me(m),c=m;break t;case"link":var A=jg("link","href",f).get(c+(r.href||""));if(A){for(var x=0;x<A.length;x++)if(m=A[x],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){A.splice(x,1);break e}}m=f.createElement(c),Te(m,c,r),f.head.appendChild(m);break;case"meta":if(A=jg("meta","content",f).get(c+(r.content||""))){for(x=0;x<A.length;x++)if(m=A[x],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){A.splice(x,1);break e}}m=f.createElement(c),Te(m,c,r),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[Me]=n,me(m),c=m}n.stateNode=c}else Gg(f,n.type,n.stateNode);else n.stateNode=Ig(f,c,n.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?Gg(f,n.type,n.stateNode):Ig(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&fu(n,n.memoizedProps,r.memoizedProps)}break;case 27:Ke(i,n),Qe(n),c&512&&(oe||r===null||Rn(r,r.return)),r!==null&&c&4&&fu(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Ke(i,n),Qe(n),c&512&&(oe||r===null||Rn(r,r.return)),n.flags&32){f=n.stateNode;try{ws(f,"")}catch(j){jt(n,n.return,j)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,fu(n,f,r!==null?r.memoizedProps:f)),c&1024&&(mu=!0);break;case 6:if(Ke(i,n),Qe(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(j){jt(n,n.return,j)}}break;case 3:if(Jo=null,f=An,An=Qo(i.containerInfo),Ke(i,n),An=f,Qe(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{mr(i.containerInfo)}catch(j){jt(n,n.return,j)}mu&&(mu=!1,Wp(n));break;case 4:c=An,An=Qo(n.stateNode.containerInfo),Ke(i,n),Qe(n),An=c;break;case 12:Ke(i,n),Qe(n);break;case 13:Ke(i,n),Qe(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Eu=Ee()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,yu(n,c)));break;case 22:f=n.memoizedState!==null;var R=r!==null&&r.memoizedState!==null,z=Qn,X=oe;if(Qn=z||f,oe=X||R,Ke(i,n),oe=X,Qn=z,Qe(n),c&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||R||Qn||oe||Ji(n)),r=null,i=n;;){if(i.tag===5||i.tag===26){if(r===null){R=r=i;try{if(m=R.stateNode,f)A=m.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{x=R.stateNode;var W=R.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;x.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(j){jt(R,R.return,j)}}}else if(i.tag===6){if(r===null){R=i;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(j){jt(R,R.return,j)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,yu(n,r))));break;case 19:Ke(i,n),Qe(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,yu(n,c)));break;case 30:break;case 21:break;default:Ke(i,n),Qe(n)}}function Qe(n){var i=n.flags;if(i&2){try{for(var r,c=n.return;c!==null;){if(Ip(c)){r=c;break}c=c.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var f=r.stateNode,m=pu(n);Uo(n,m,f);break;case 5:var A=r.stateNode;r.flags&32&&(ws(A,""),r.flags&=-33);var x=pu(n);Uo(n,x,A);break;case 3:case 4:var R=r.stateNode.containerInfo,z=pu(n);gu(n,z,R);break;default:throw Error(s(161))}}catch(X){jt(n,n.return,X)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Wp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Wp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function vi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Vp(n,i.alternate,i),i=i.sibling}function Ji(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:bi(4,i,i.return),Ji(i);break;case 1:Rn(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&zp(i,i.return,r),Ji(i);break;case 27:lr(i.stateNode);case 26:case 5:Rn(i,i.return),Ji(i);break;case 22:i.memoizedState===null&&Ji(i);break;case 30:Ji(i);break;default:Ji(i)}n=n.sibling}}function Ai(n,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,m=i,A=m.flags;switch(m.tag){case 0:case 11:case 15:Ai(f,m,r),Za(4,m);break;case 1:if(Ai(f,m,r),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){jt(c,c.return,z)}if(c=m,f=c.updateQueue,f!==null){var x=c.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)_f(R[f],x)}catch(z){jt(c,c.return,z)}}r&&A&64&&Up(m),Ja(m,m.return);break;case 27:jp(m);case 26:case 5:Ai(f,m,r),r&&c===null&&A&4&&Hp(m),Ja(m,m.return);break;case 12:Ai(f,m,r);break;case 13:Ai(f,m,r),r&&A&4&&Yp(f,m);break;case 22:m.memoizedState===null&&Ai(f,m,r),Ja(m,m.return);break;case 30:break;default:Ai(f,m,r)}i=i.sibling}}function bu(n,i){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&Ua(r))}function vu(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ua(n))}function Mn(n,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Kp(n,i,r,c),i=i.sibling}function Kp(n,i,r,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Mn(n,i,r,c),f&2048&&Za(9,i);break;case 1:Mn(n,i,r,c);break;case 3:Mn(n,i,r,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ua(n)));break;case 12:if(f&2048){Mn(n,i,r,c),n=i.stateNode;try{var m=i.memoizedProps,A=m.id,x=m.onPostCommit;typeof x=="function"&&x(A,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){jt(i,i.return,R)}}else Mn(n,i,r,c);break;case 13:Mn(n,i,r,c);break;case 23:break;case 22:m=i.stateNode,A=i.alternate,i.memoizedState!==null?m._visibility&2?Mn(n,i,r,c):tr(n,i):m._visibility&2?Mn(n,i,r,c):(m._visibility|=2,Is(n,i,r,c,(i.subtreeFlags&10256)!==0)),f&2048&&bu(A,i);break;case 24:Mn(n,i,r,c),f&2048&&vu(i.alternate,i);break;default:Mn(n,i,r,c)}}function Is(n,i,r,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,A=i,x=r,R=c,z=A.flags;switch(A.tag){case 0:case 11:case 15:Is(m,A,x,R,f),Za(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?Is(m,A,x,R,f):tr(m,A):(X._visibility|=2,Is(m,A,x,R,f)),f&&z&2048&&bu(A.alternate,A);break;case 24:Is(m,A,x,R,f),f&&z&2048&&vu(A.alternate,A);break;default:Is(m,A,x,R,f)}i=i.sibling}}function tr(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=n,c=i,f=c.flags;switch(c.tag){case 22:tr(r,c),f&2048&&bu(c.alternate,c);break;case 24:tr(r,c),f&2048&&vu(c.alternate,c);break;default:tr(r,c)}i=i.sibling}}var er=8192;function js(n){if(n.subtreeFlags&er)for(n=n.child;n!==null;)Qp(n),n=n.sibling}function Qp(n){switch(n.tag){case 26:js(n),n.flags&er&&n.memoizedState!==null&&Sv(An,n.memoizedState,n.memoizedProps);break;case 5:js(n);break;case 3:case 4:var i=An;An=Qo(n.stateNode.containerInfo),js(n),An=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=er,er=16777216,js(n),er=i):js(n));break;default:js(n)}}function Zp(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function nr(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];be=c,tg(c,n)}Zp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jp(n),n=n.sibling}function Jp(n){switch(n.tag){case 0:case 11:case 15:nr(n),n.flags&2048&&bi(9,n,n.return);break;case 3:nr(n);break;case 12:nr(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,zo(n)):nr(n);break;default:nr(n)}}function zo(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];be=c,tg(c,n)}Zp(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:bi(8,i,i.return),zo(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,zo(i));break;default:zo(i)}n=n.sibling}}function tg(n,i){for(;be!==null;){var r=be;switch(r.tag){case 0:case 11:case 15:bi(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ua(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,be=c;else t:for(r=n;be!==null;){c=be;var f=c.sibling,m=c.return;if(qp(c),c===r){be=null;break t}if(f!==null){f.return=m,be=f;break t}be=m}}}var F0={getCacheForType:function(n){var i=De(pe),r=i.data.get(n);return r===void 0&&(r=n(),i.data.set(n,r)),r}},U0=typeof WeakMap=="function"?WeakMap:Map,kt=0,qt=null,xt=null,Lt=0,Pt=0,Ze=null,Si=!1,Gs=!1,Au=!1,Jn=0,se=0,wi=0,ts=0,Su=0,pn=0,Vs=0,ir=null,Ge=null,wu=!1,Eu=0,Ho=1/0,Io=null,Ei=null,xe=0,_i=null,qs=null,Xs=0,_u=0,xu=null,eg=null,sr=0,Tu=null;function Je(){if((kt&2)!==0&&Lt!==0)return Lt&-Lt;if(k.T!==null){var n=Ns;return n!==0?n:Nu()}return md()}function ng(){pn===0&&(pn=(Lt&536870912)===0||Nt?dd():536870912);var n=fn.current;return n!==null&&(n.flags|=32),pn}function tn(n,i,r){(n===qt&&(Pt===2||Pt===9)||n.cancelPendingCommit!==null)&&(Ys(n,0),xi(n,Lt,pn,!1)),wa(n,r),((kt&2)===0||n!==qt)&&(n===qt&&((kt&2)===0&&(ts|=r),se===4&&xi(n,Lt,pn,!1)),Dn(n))}function ig(n,i,r){if((kt&6)!==0)throw Error(s(327));var c=!r&&(i&124)===0&&(i&n.expiredLanes)===0||Sa(n,i),f=c?I0(n,i):Mu(n,i,!0),m=c;do{if(f===0){Gs&&!c&&xi(n,i,0,!1);break}else{if(r=n.current.alternate,m&&!z0(r)){f=Mu(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){i=A;t:{var x=n;f=ir;var R=x.current.memoizedState.isDehydrated;if(R&&(Ys(x,A).flags|=256),A=Mu(x,A,!1),A!==2){if(Au&&!R){x.errorRecoveryDisabledLanes|=m,ts|=m,f=4;break t}m=Ge,Ge=f,m!==null&&(Ge===null?Ge=m:Ge.push.apply(Ge,m))}f=A}if(m=!1,f!==2)continue}}if(f===1){Ys(n,0),xi(n,i,0,!0);break}t:{switch(c=n,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:xi(c,i,pn,!Si);break t;case 2:Ge=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Eu+300-Ee(),10<f)){if(xi(c,i,pn,!Si),Qr(c,0,!0)!==0)break t;c.timeoutHandle=Og(sg.bind(null,c,r,Ge,Io,wu,i,pn,ts,Vs,Si,m,2,-0,0),f);break t}sg(c,r,Ge,Io,wu,i,pn,ts,Vs,Si,m,0,-0,0)}}break}while(!0);Dn(n)}function sg(n,i,r,c,f,m,A,x,R,z,X,W,H,j){if(n.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(hr={stylesheets:null,count:0,unsuspend:Av},Qp(i),W=wv(),W!==null)){n.cancelPendingCommit=W(hg.bind(null,n,i,m,r,c,f,A,x,R,X,1,H,j)),xi(n,m,A,!z);return}hg(n,i,m,r,c,f,A,x,R)}function z0(n){for(var i=n;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],m=f.getSnapshot;f=f.value;try{if(!$e(m(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xi(n,i,r,c){i&=~Su,i&=~ts,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var m=31-ne(f),A=1<<m;c[m]=-1,f&=~A}r!==0&&pd(n,r,i)}function jo(){return(kt&6)===0?(ar(0),!1):!0}function Cu(){if(xt!==null){if(Pt===0)var n=xt.return;else n=xt,qn=$i=null,Vc(n),zs=null,Wa=0,n=xt;for(;n!==null;)Fp(n.alternate,n),n=n.return;xt=null}}function Ys(n,i){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,iv(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Cu(),qt=n,xt=r=jn(n.current,null),Lt=i,Pt=0,Ze=null,Si=!1,Gs=Sa(n,i),Au=!1,Vs=pn=Su=ts=wi=se=0,Ge=ir=null,wu=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-ne(c),m=1<<f;i|=n[f],c&=~m}return Jn=i,co(),r}function ag(n,i){Et=null,k.H=Mo,i===Ha||i===vo?(i=wf(),Pt=3):i===vf?(i=wf(),Pt=4):Pt=i===Ep?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ze=i,xt===null&&(se=1,ko(n,cn(i,n.current)))}function rg(){var n=k.H;return k.H=Mo,n===null?Mo:n}function og(){var n=k.A;return k.A=F0,n}function Ru(){se=4,Si||(Lt&4194048)!==Lt&&fn.current!==null||(Gs=!0),(wi&134217727)===0&&(ts&134217727)===0||qt===null||xi(qt,Lt,pn,!1)}function Mu(n,i,r){var c=kt;kt|=2;var f=rg(),m=og();(qt!==n||Lt!==i)&&(Io=null,Ys(n,i)),i=!1;var A=se;t:do try{if(Pt!==0&&xt!==null){var x=xt,R=Ze;switch(Pt){case 8:Cu(),A=6;break t;case 3:case 2:case 9:case 6:fn.current===null&&(i=!0);var z=Pt;if(Pt=0,Ze=null,$s(n,x,R,z),r&&Gs){A=0;break t}break;default:z=Pt,Pt=0,Ze=null,$s(n,x,R,z)}}H0(),A=se;break}catch(X){ag(n,X)}while(!0);return i&&n.shellSuspendCounter++,qn=$i=null,kt=c,k.H=f,k.A=m,xt===null&&(qt=null,Lt=0,co()),A}function H0(){for(;xt!==null;)lg(xt)}function I0(n,i){var r=kt;kt|=2;var c=rg(),f=og();qt!==n||Lt!==i?(Io=null,Ho=Ee()+500,Ys(n,i)):Gs=Sa(n,i);t:do try{if(Pt!==0&&xt!==null){i=xt;var m=Ze;e:switch(Pt){case 1:Pt=0,Ze=null,$s(n,i,m,1);break;case 2:case 9:if(Af(m)){Pt=0,Ze=null,cg(i);break}i=function(){Pt!==2&&Pt!==9||qt!==n||(Pt=7),Dn(n)},m.then(i,i);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:Af(m)?(Pt=0,Ze=null,cg(i)):(Pt=0,Ze=null,$s(n,i,m,7));break;case 5:var A=null;switch(xt.tag){case 26:A=xt.memoizedState;case 5:case 27:var x=xt;if(!A||Vg(A)){Pt=0,Ze=null;var R=x.sibling;if(R!==null)xt=R;else{var z=x.return;z!==null?(xt=z,Go(z)):xt=null}break e}}Pt=0,Ze=null,$s(n,i,m,5);break;case 6:Pt=0,Ze=null,$s(n,i,m,6);break;case 8:Cu(),se=6;break t;default:throw Error(s(462))}}j0();break}catch(X){ag(n,X)}while(!0);return qn=$i=null,k.H=c,k.A=f,kt=r,xt!==null?0:(qt=null,Lt=0,co(),se)}function j0(){for(;xt!==null&&!ae();)lg(xt)}function lg(n){var i=Pp(n.alternate,n,Jn);n.memoizedProps=n.pendingProps,i===null?Go(n):xt=i}function cg(n){var i=n,r=i.alternate;switch(i.tag){case 15:case 0:i=Mp(r,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=Mp(r,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:Vc(i);default:Fp(r,i),i=xt=uf(i,Jn),i=Pp(r,i,Jn)}n.memoizedProps=n.pendingProps,i===null?Go(n):xt=i}function $s(n,i,r,c){qn=$i=null,Vc(i),zs=null,Wa=0;var f=i.return;try{if(L0(n,f,i,r,Lt)){se=1,ko(n,cn(r,n.current)),xt=null;return}}catch(m){if(f!==null)throw xt=f,m;se=1,ko(n,cn(r,n.current)),xt=null;return}i.flags&32768?(Nt||c===1?n=!0:Gs||(Lt&536870912)!==0?n=!1:(Si=n=!0,(c===2||c===9||c===3||c===6)&&(c=fn.current,c!==null&&c.tag===13&&(c.flags|=16384))),ug(i,n)):Go(i)}function Go(n){var i=n;do{if((i.flags&32768)!==0){ug(i,Si);return}n=i.return;var r=N0(i.alternate,i,Jn);if(r!==null){xt=r;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=n}while(i!==null);se===0&&(se=5)}function ug(n,i){do{var r=k0(n.alternate,n);if(r!==null){r.flags&=32767,xt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(n=n.sibling,n!==null)){xt=n;return}xt=n=r}while(n!==null);se=6,xt=null}function hg(n,i,r,c,f,m,A,x,R){n.cancelPendingCommit=null;do Vo();while(xe!==0);if((kt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=vc,Ab(n,r,m,A,x,R),n===qt&&(xt=qt=null,Lt=0),qs=i,_i=n,Xs=r,_u=m,xu=f,eg=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,X0(zn,function(){return mg(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=k.T,k.T=null,f=G.p,G.p=2,A=kt,kt|=4;try{P0(n,i,r)}finally{kt=A,G.p=f,k.T=c}}xe=1,dg(),fg(),pg()}}function dg(){if(xe===1){xe=0;var n=_i,i=qs,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=k.T,k.T=null;var c=G.p;G.p=2;var f=kt;kt|=4;try{$p(i,n);var m=Iu,A=Jd(n.containerInfo),x=m.focusedElem,R=m.selectionRange;if(A!==x&&x&&x.ownerDocument&&Zd(x.ownerDocument.documentElement,x)){if(R!==null&&pc(x)){var z=R.start,X=R.end;if(X===void 0&&(X=z),"selectionStart"in x)x.selectionStart=z,x.selectionEnd=Math.min(X,x.value.length);else{var W=x.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var j=H.getSelection(),mt=x.textContent.length,ft=Math.min(R.start,mt),zt=R.end===void 0?ft:Math.min(R.end,mt);!j.extend&&ft>zt&&(A=zt,zt=ft,ft=A);var P=Qd(x,ft),O=Qd(x,zt);if(P&&O&&(j.rangeCount!==1||j.anchorNode!==P.node||j.anchorOffset!==P.offset||j.focusNode!==O.node||j.focusOffset!==O.offset)){var F=W.createRange();F.setStart(P.node,P.offset),j.removeAllRanges(),ft>zt?(j.addRange(F),j.extend(O.node,O.offset)):(F.setEnd(O.node,O.offset),j.addRange(F))}}}}for(W=[],j=x;j=j.parentNode;)j.nodeType===1&&W.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<W.length;x++){var Y=W[x];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}nl=!!Hu,Iu=Hu=null}finally{kt=f,G.p=c,k.T=r}}n.current=i,xe=2}}function fg(){if(xe===2){xe=0;var n=_i,i=qs,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=k.T,k.T=null;var c=G.p;G.p=2;var f=kt;kt|=4;try{Vp(n,i.alternate,i)}finally{kt=f,G.p=c,k.T=r}}xe=3}}function pg(){if(xe===4||xe===3){xe=0,ue();var n=_i,i=qs,r=Xs,c=eg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?xe=5:(xe=0,qs=_i=null,gg(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ei=null),Yl(r),i=i.stateNode,ee&&typeof ee.onCommitFiberRoot=="function")try{ee.onCommitFiberRoot(Fi,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=k.T,f=G.p,G.p=2,k.T=null;try{for(var m=n.onRecoverableError,A=0;A<c.length;A++){var x=c[A];m(x.value,{componentStack:x.stack})}}finally{k.T=i,G.p=f}}(Xs&3)!==0&&Vo(),Dn(n),f=n.pendingLanes,(r&4194090)!==0&&(f&42)!==0?n===Tu?sr++:(sr=0,Tu=n):sr=0,ar(0)}}function gg(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ua(i)))}function Vo(n){return dg(),fg(),pg(),mg()}function mg(){if(xe!==5)return!1;var n=_i,i=_u;_u=0;var r=Yl(Xs),c=k.T,f=G.p;try{G.p=32>r?32:r,k.T=null,r=xu,xu=null;var m=_i,A=Xs;if(xe=0,qs=_i=null,Xs=0,(kt&6)!==0)throw Error(s(331));var x=kt;if(kt|=4,Jp(m.current),Kp(m,m.current,A,r),kt=x,ar(0,!1),ee&&typeof ee.onPostCommitFiberRoot=="function")try{ee.onPostCommitFiberRoot(Fi,m)}catch{}return!0}finally{G.p=f,k.T=c,gg(n,i)}}function yg(n,i,r){i=cn(r,i),i=su(n.stateNode,i,2),n=pi(n,i,2),n!==null&&(wa(n,2),Dn(n))}function jt(n,i,r){if(n.tag===3)yg(n,n,r);else for(;i!==null;){if(i.tag===3){yg(i,n,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ei===null||!Ei.has(c))){n=cn(r,n),r=Sp(2),c=pi(i,r,2),c!==null&&(wp(r,c,i,n),wa(c,2),Dn(c));break}}i=i.return}}function Du(n,i,r){var c=n.pingCache;if(c===null){c=n.pingCache=new U0;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(r)||(Au=!0,f.add(r),n=G0.bind(null,n,i,r),i.then(n,n))}function G0(n,i,r){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,qt===n&&(Lt&r)===r&&(se===4||se===3&&(Lt&62914560)===Lt&&300>Ee()-Eu?(kt&2)===0&&Ys(n,0):Su|=r,Vs===Lt&&(Vs=0)),Dn(n)}function bg(n,i){i===0&&(i=fd()),n=Ms(n,i),n!==null&&(wa(n,i),Dn(n))}function V0(n){var i=n.memoizedState,r=0;i!==null&&(r=i.retryLane),bg(n,r)}function q0(n,i){var r=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),bg(n,r)}function X0(n,i){return Mt(n,i)}var qo=null,Ws=null,Lu=!1,Xo=!1,Ou=!1,es=0;function Dn(n){n!==Ws&&n.next===null&&(Ws===null?qo=Ws=n:Ws=Ws.next=n),Xo=!0,Lu||(Lu=!0,$0())}function ar(n,i){if(!Ou&&Xo){Ou=!0;do for(var r=!1,c=qo;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var A=c.suspendedLanes,x=c.pingedLanes;m=(1<<31-ne(42|n)+1)-1,m&=f&~(A&~x),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,wg(c,m))}else m=Lt,m=Qr(c,c===qt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Sa(c,m)||(r=!0,wg(c,m));c=c.next}while(r);Ou=!1}}function Y0(){vg()}function vg(){Xo=Lu=!1;var n=0;es!==0&&(nv()&&(n=es),es=0);for(var i=Ee(),r=null,c=qo;c!==null;){var f=c.next,m=Ag(c,i);m===0?(c.next=null,r===null?qo=f:r.next=f,f===null&&(Ws=r)):(r=c,(n!==0||(m&3)!==0)&&(Xo=!0)),c=f}ar(n)}function Ag(n,i){for(var r=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var A=31-ne(m),x=1<<A,R=f[A];R===-1?((x&r)===0||(x&c)!==0)&&(f[A]=vb(x,i)):R<=i&&(n.expiredLanes|=x),m&=~x}if(i=qt,r=Lt,r=Qr(n,n===i?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===i&&(Pt===2||Pt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Bt(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Sa(n,r)){if(i=r&-r,i===n.callbackPriority)return i;switch(c!==null&&Bt(c),Yl(r)){case 2:case 8:r=Yr;break;case 32:r=zn;break;case 268435456:r=$r;break;default:r=zn}return c=Sg.bind(null,n),r=Mt(r,c),n.callbackPriority=i,n.callbackNode=r,i}return c!==null&&c!==null&&Bt(c),n.callbackPriority=2,n.callbackNode=null,2}function Sg(n,i){if(xe!==0&&xe!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Vo()&&n.callbackNode!==r)return null;var c=Lt;return c=Qr(n,n===qt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(ig(n,c,i),Ag(n,Ee()),n.callbackNode!=null&&n.callbackNode===r?Sg.bind(null,n):null)}function wg(n,i){if(Vo())return null;ig(n,i,!0)}function $0(){sv(function(){(kt&6)!==0?Mt(ps,Y0):vg()})}function Nu(){return es===0&&(es=dd()),es}function Eg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:no(""+n)}function _g(n,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,n.id&&r.setAttribute("form",n.id),i.parentNode.insertBefore(r,i),n=new FormData(n),r.parentNode.removeChild(r),n}function W0(n,i,r,c,f){if(i==="submit"&&r&&r.stateNode===f){var m=Eg((f[ze]||null).action),A=c.submitter;A&&(i=(i=A[ze]||null)?Eg(i.formAction):A.getAttribute("formAction"),i!==null&&(m=i,A=null));var x=new ro("action","action",null,c,f);n.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(es!==0){var R=A?_g(f,A):new FormData(f);Jc(r,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(x.preventDefault(),R=A?_g(f,A):new FormData(f),Jc(r,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var ku=0;ku<bc.length;ku++){var Pu=bc[ku],K0=Pu.toLowerCase(),Q0=Pu[0].toUpperCase()+Pu.slice(1);vn(K0,"on"+Q0)}vn(nf,"onAnimationEnd"),vn(sf,"onAnimationIteration"),vn(af,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(p0,"onTransitionRun"),vn(g0,"onTransitionStart"),vn(m0,"onTransitionCancel"),vn(rf,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rr));function xg(n,i){i=(i&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],f=c.event;c=c.listeners;t:{var m=void 0;if(i)for(var A=c.length-1;0<=A;A--){var x=c[A],R=x.instance,z=x.currentTarget;if(x=x.listener,R!==m&&f.isPropagationStopped())break t;m=x,f.currentTarget=z;try{m(f)}catch(X){No(X)}f.currentTarget=null,m=R}else for(A=0;A<c.length;A++){if(x=c[A],R=x.instance,z=x.currentTarget,x=x.listener,R!==m&&f.isPropagationStopped())break t;m=x,f.currentTarget=z;try{m(f)}catch(X){No(X)}f.currentTarget=null,m=R}}}}function Tt(n,i){var r=i[$l];r===void 0&&(r=i[$l]=new Set);var c=n+"__bubble";r.has(c)||(Tg(i,n,2,!1),r.add(c))}function Bu(n,i,r){var c=0;i&&(c|=4),Tg(r,n,c,i)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Fu(n){if(!n[Yo]){n[Yo]=!0,bd.forEach(function(r){r!=="selectionchange"&&(Z0.has(r)||Bu(r,!1,n),Bu(r,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Yo]||(i[Yo]=!0,Bu("selectionchange",!1,i))}}function Tg(n,i,r,c){switch(Kg(i)){case 2:var f=xv;break;case 8:f=Tv;break;default:f=Qu}r=f.bind(null,i,r,n),f=void 0,!ac||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,r,{capture:!0,passive:f}):n.addEventListener(i,r,!0):f!==void 0?n.addEventListener(i,r,{passive:f}):n.addEventListener(i,r,!1)}function Uu(n,i,r,c,f){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var x=c.stateNode.containerInfo;if(x===f)break;if(A===4)for(A=c.return;A!==null;){var R=A.tag;if((R===3||R===4)&&A.stateNode.containerInfo===f)return;A=A.return}for(;x!==null;){if(A=ms(x),A===null)return;if(R=A.tag,R===5||R===6||R===26||R===27){c=m=A;continue t}x=x.parentNode}}c=c.return}Od(function(){var z=m,X=ic(r),W=[];t:{var H=of.get(n);if(H!==void 0){var j=ro,mt=n;switch(n){case"keypress":if(so(r)===0)break t;case"keydown":case"keyup":j=Xb;break;case"focusin":mt="focus",j=cc;break;case"focusout":mt="blur",j=cc;break;case"beforeblur":case"afterblur":j=cc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=kb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Wb;break;case nf:case sf:case af:j=Fb;break;case rf:j=Qb;break;case"scroll":case"scrollend":j=Ob;break;case"wheel":j=Jb;break;case"copy":case"cut":case"paste":j=zb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Fd;break;case"toggle":case"beforetoggle":j=e0}var ft=(i&4)!==0,zt=!ft&&(n==="scroll"||n==="scrollend"),P=ft?H!==null?H+"Capture":null:H;ft=[];for(var O=z,F;O!==null;){var Y=O;if(F=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||F===null||P===null||(Y=xa(O,P),Y!=null&&ft.push(or(O,Y,F))),zt)break;O=O.return}0<ft.length&&(H=new j(H,mt,null,r,X),W.push({event:H,listeners:ft}))}}if((i&7)===0){t:{if(H=n==="mouseover"||n==="pointerover",j=n==="mouseout"||n==="pointerout",H&&r!==nc&&(mt=r.relatedTarget||r.fromElement)&&(ms(mt)||mt[gs]))break t;if((j||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,j?(mt=r.relatedTarget||r.toElement,j=z,mt=mt?ms(mt):null,mt!==null&&(zt=o(mt),ft=mt.tag,mt!==zt||ft!==5&&ft!==27&&ft!==6)&&(mt=null)):(j=null,mt=z),j!==mt)){if(ft=Pd,Y="onMouseLeave",P="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ft=Fd,Y="onPointerLeave",P="onPointerEnter",O="pointer"),zt=j==null?H:_a(j),F=mt==null?H:_a(mt),H=new ft(Y,O+"leave",j,r,X),H.target=zt,H.relatedTarget=F,Y=null,ms(X)===z&&(ft=new ft(P,O+"enter",mt,r,X),ft.target=F,ft.relatedTarget=zt,Y=ft),zt=Y,j&&mt)e:{for(ft=j,P=mt,O=0,F=ft;F;F=Ks(F))O++;for(F=0,Y=P;Y;Y=Ks(Y))F++;for(;0<O-F;)ft=Ks(ft),O--;for(;0<F-O;)P=Ks(P),F--;for(;O--;){if(ft===P||P!==null&&ft===P.alternate)break e;ft=Ks(ft),P=Ks(P)}ft=null}else ft=null;j!==null&&Cg(W,H,j,ft,!1),mt!==null&&zt!==null&&Cg(W,zt,mt,ft,!0)}}t:{if(H=z?_a(z):window,j=H.nodeName&&H.nodeName.toLowerCase(),j==="select"||j==="input"&&H.type==="file")var st=qd;else if(Gd(H))if(Xd)st=h0;else{st=c0;var _t=l0}else j=H.nodeName,!j||j.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?z&&ec(z.elementType)&&(st=qd):st=u0;if(st&&(st=st(n,z))){Vd(W,st,r,X);break t}_t&&_t(n,H,z),n==="focusout"&&z&&H.type==="number"&&z.memoizedProps.value!=null&&tc(H,"number",H.value)}switch(_t=z?_a(z):window,n){case"focusin":(Gd(_t)||_t.contentEditable==="true")&&(Ts=_t,gc=z,Na=null);break;case"focusout":Na=gc=Ts=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,tf(W,r,X);break;case"selectionchange":if(f0)break;case"keydown":case"keyup":tf(W,r,X)}var ot;if(hc)t:{switch(n){case"compositionstart":var pt="onCompositionStart";break t;case"compositionend":pt="onCompositionEnd";break t;case"compositionupdate":pt="onCompositionUpdate";break t}pt=void 0}else xs?Id(n,r)&&(pt="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(pt="onCompositionStart");pt&&(Ud&&r.locale!=="ko"&&(xs||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&xs&&(ot=Nd()):(ui=X,rc="value"in ui?ui.value:ui.textContent,xs=!0)),_t=$o(z,pt),0<_t.length&&(pt=new Bd(pt,n,null,r,X),W.push({event:pt,listeners:_t}),ot?pt.data=ot:(ot=jd(r),ot!==null&&(pt.data=ot)))),(ot=i0?s0(n,r):a0(n,r))&&(pt=$o(z,"onBeforeInput"),0<pt.length&&(_t=new Bd("onBeforeInput","beforeinput",null,r,X),W.push({event:_t,listeners:pt}),_t.data=ot)),W0(W,n,z,r,X)}xg(W,i)})}function or(n,i,r){return{instance:n,listener:i,currentTarget:r}}function $o(n,i){for(var r=i+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=xa(n,r),f!=null&&c.unshift(or(n,f,m)),f=xa(n,i),f!=null&&c.push(or(n,f,m))),n.tag===3)return c;n=n.return}return[]}function Ks(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Cg(n,i,r,c,f){for(var m=i._reactName,A=[];r!==null&&r!==c;){var x=r,R=x.alternate,z=x.stateNode;if(x=x.tag,R!==null&&R===c)break;x!==5&&x!==26&&x!==27||z===null||(R=z,f?(z=xa(r,m),z!=null&&A.unshift(or(r,z,R))):f||(z=xa(r,m),z!=null&&A.push(or(r,z,R)))),r=r.return}A.length!==0&&n.push({event:i,listeners:A})}var J0=/\r\n?/g,tv=/\u0000|\uFFFD/g;function Rg(n){return(typeof n=="string"?n:""+n).replace(J0,`
`).replace(tv,"")}function Mg(n,i){return i=Rg(i),Rg(n)===i}function Wo(){}function Ut(n,i,r,c,f,m){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||ws(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&ws(n,""+c);break;case"className":Jr(n,"class",c);break;case"tabIndex":Jr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Jr(n,r,c);break;case"style":Dd(n,c,m);break;case"data":if(i!=="object"){Jr(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=no(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(i!=="input"&&Ut(n,i,"name",f.name,f,null),Ut(n,i,"formEncType",f.formEncType,f,null),Ut(n,i,"formMethod",f.formMethod,f,null),Ut(n,i,"formTarget",f.formTarget,f,null)):(Ut(n,i,"encType",f.encType,f,null),Ut(n,i,"method",f.method,f,null),Ut(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=no(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=Wo);break;case"onScroll":c!=null&&Tt("scroll",n);break;case"onScrollEnd":c!=null&&Tt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=no(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":Tt("beforetoggle",n),Tt("toggle",n),Zr(n,"popover",c);break;case"xlinkActuate":Hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Hn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Hn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Hn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Hn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Zr(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Db.get(r)||r,Zr(n,r,c))}}function zu(n,i,r,c,f,m){switch(r){case"style":Dd(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof c=="string"?ws(n,c):(typeof c=="number"||typeof c=="bigint")&&ws(n,""+c);break;case"onScroll":c!=null&&Tt("scroll",n);break;case"onScrollEnd":c!=null&&Tt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Wo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vd.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),m=n[ze]||null,m=m!=null?m[r]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(i,c,f);break t}r in n?n[r]=c:c===!0?n.setAttribute(r,""):Zr(n,r,c)}}}function Te(n,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",n),Tt("load",n);var c=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var A=r[m];if(A!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ut(n,i,m,A,r,null)}}f&&Ut(n,i,"srcSet",r.srcSet,r,null),c&&Ut(n,i,"src",r.src,r,null);return;case"input":Tt("invalid",n);var x=m=A=f=null,R=null,z=null;for(c in r)if(r.hasOwnProperty(c)){var X=r[c];if(X!=null)switch(c){case"name":f=X;break;case"type":A=X;break;case"checked":R=X;break;case"defaultChecked":z=X;break;case"value":m=X;break;case"defaultValue":x=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:Ut(n,i,c,X,r,null)}}Td(n,m,x,R,z,A,f,!1),to(n);return;case"select":Tt("invalid",n),c=A=m=null;for(f in r)if(r.hasOwnProperty(f)&&(x=r[f],x!=null))switch(f){case"value":m=x;break;case"defaultValue":A=x;break;case"multiple":c=x;default:Ut(n,i,f,x,r,null)}i=m,r=A,n.multiple=!!c,i!=null?Ss(n,!!c,i,!1):r!=null&&Ss(n,!!c,r,!0);return;case"textarea":Tt("invalid",n),m=f=c=null;for(A in r)if(r.hasOwnProperty(A)&&(x=r[A],x!=null))switch(A){case"value":c=x;break;case"defaultValue":f=x;break;case"children":m=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:Ut(n,i,A,x,r,null)}Rd(n,c,f,m),to(n);return;case"option":for(R in r)if(r.hasOwnProperty(R)&&(c=r[R],c!=null))switch(R){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ut(n,i,R,c,r,null)}return;case"dialog":Tt("beforetoggle",n),Tt("toggle",n),Tt("cancel",n),Tt("close",n);break;case"iframe":case"object":Tt("load",n);break;case"video":case"audio":for(c=0;c<rr.length;c++)Tt(rr[c],n);break;case"image":Tt("error",n),Tt("load",n);break;case"details":Tt("toggle",n);break;case"embed":case"source":case"link":Tt("error",n),Tt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in r)if(r.hasOwnProperty(z)&&(c=r[z],c!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ut(n,i,z,c,r,null)}return;default:if(ec(i)){for(X in r)r.hasOwnProperty(X)&&(c=r[X],c!==void 0&&zu(n,i,X,c,r,void 0));return}}for(x in r)r.hasOwnProperty(x)&&(c=r[x],c!=null&&Ut(n,i,x,c,r,null))}function ev(n,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,A=null,x=null,R=null,z=null,X=null;for(j in r){var W=r[j];if(r.hasOwnProperty(j)&&W!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":R=W;default:c.hasOwnProperty(j)||Ut(n,i,j,null,c,W)}}for(var H in c){var j=c[H];if(W=r[H],c.hasOwnProperty(H)&&(j!=null||W!=null))switch(H){case"type":m=j;break;case"name":f=j;break;case"checked":z=j;break;case"defaultChecked":X=j;break;case"value":A=j;break;case"defaultValue":x=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:j!==W&&Ut(n,i,H,j,c,W)}}Jl(n,A,x,R,z,X,m,f);return;case"select":j=A=x=H=null;for(m in r)if(R=r[m],r.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":j=R;default:c.hasOwnProperty(m)||Ut(n,i,m,null,c,R)}for(f in c)if(m=c[f],R=r[f],c.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":H=m;break;case"defaultValue":x=m;break;case"multiple":A=m;default:m!==R&&Ut(n,i,f,m,c,R)}i=x,r=A,c=j,H!=null?Ss(n,!!r,H,!1):!!c!=!!r&&(i!=null?Ss(n,!!r,i,!0):Ss(n,!!r,r?[]:"",!1));return;case"textarea":j=H=null;for(x in r)if(f=r[x],r.hasOwnProperty(x)&&f!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ut(n,i,x,null,c,f)}for(A in c)if(f=c[A],m=r[A],c.hasOwnProperty(A)&&(f!=null||m!=null))switch(A){case"value":H=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Ut(n,i,A,f,c,m)}Cd(n,H,j);return;case"option":for(var mt in r)if(H=r[mt],r.hasOwnProperty(mt)&&H!=null&&!c.hasOwnProperty(mt))switch(mt){case"selected":n.selected=!1;break;default:Ut(n,i,mt,null,c,H)}for(R in c)if(H=c[R],j=r[R],c.hasOwnProperty(R)&&H!==j&&(H!=null||j!=null))switch(R){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ut(n,i,R,H,c,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in r)H=r[ft],r.hasOwnProperty(ft)&&H!=null&&!c.hasOwnProperty(ft)&&Ut(n,i,ft,null,c,H);for(z in c)if(H=c[z],j=r[z],c.hasOwnProperty(z)&&H!==j&&(H!=null||j!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:Ut(n,i,z,H,c,j)}return;default:if(ec(i)){for(var zt in r)H=r[zt],r.hasOwnProperty(zt)&&H!==void 0&&!c.hasOwnProperty(zt)&&zu(n,i,zt,void 0,c,H);for(X in c)H=c[X],j=r[X],!c.hasOwnProperty(X)||H===j||H===void 0&&j===void 0||zu(n,i,X,H,c,j);return}}for(var P in r)H=r[P],r.hasOwnProperty(P)&&H!=null&&!c.hasOwnProperty(P)&&Ut(n,i,P,null,c,H);for(W in c)H=c[W],j=r[W],!c.hasOwnProperty(W)||H===j||H==null&&j==null||Ut(n,i,W,H,c,j)}var Hu=null,Iu=null;function Ko(n){return n.nodeType===9?n:n.ownerDocument}function Dg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lg(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ju(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gu=null;function nv(){var n=window.event;return n&&n.type==="popstate"?n===Gu?!1:(Gu=n,!0):(Gu=null,!1)}var Og=typeof setTimeout=="function"?setTimeout:void 0,iv=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,sv=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(n){return Ng.resolve(null).then(n).catch(av)}:Og;function av(n){setTimeout(function(){throw n})}function Ti(n){return n==="head"}function kg(n,i){var r=i,c=0,f=0;do{var m=r.nextSibling;if(n.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"){if(0<c&&8>c){r=c;var A=n.ownerDocument;if(r&1&&lr(A.documentElement),r&2&&lr(A.body),r&4)for(r=A.head,lr(r),A=r.firstChild;A;){var x=A.nextSibling,R=A.nodeName;A[Ea]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&A.rel.toLowerCase()==="stylesheet"||r.removeChild(A),A=x}}if(f===0){n.removeChild(m),mr(i);return}f--}else r==="$"||r==="$?"||r==="$!"?f++:c=r.charCodeAt(0)-48;else c=0;r=m}while(r);mr(i)}function Vu(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Vu(r),Wl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function rv(n,i,r,c){for(;n.nodeType===1;){var f=r;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ea])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Sn(n.nextSibling),n===null)break}return null}function ov(n,i,r){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Sn(n.nextSibling),n===null))return null;return n}function qu(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function lv(n,i){var r=n.ownerDocument;if(n.data!=="$?"||r.readyState==="complete")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Sn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Xu=null;function Pg(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(i===0)return n;i--}else r==="/$"&&i++}n=n.previousSibling}return null}function Bg(n,i,r){switch(i=Ko(r),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function lr(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Wl(n)}var gn=new Map,Fg=new Set;function Qo(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ti=G.d;G.d={f:cv,r:uv,D:hv,C:dv,L:fv,m:pv,X:mv,S:gv,M:yv};function cv(){var n=ti.f(),i=jo();return n||i}function uv(n){var i=ys(n);i!==null&&i.tag===5&&i.type==="form"?ip(i):ti.r(n)}var Qs=typeof document>"u"?null:document;function Ug(n,i,r){var c=Qs;if(c&&typeof i=="string"&&i){var f=ln(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),Fg.has(f)||(Fg.add(f),n={rel:n,crossOrigin:r,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Te(i,"link",n),me(i),c.head.appendChild(i)))}}function hv(n){ti.D(n),Ug("dns-prefetch",n,null)}function dv(n,i){ti.C(n,i),Ug("preconnect",n,i)}function fv(n,i,r){ti.L(n,i,r);var c=Qs;if(c&&n&&i){var f='link[rel="preload"][as="'+ln(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+ln(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+ln(r.imageSizes)+'"]')):f+='[href="'+ln(n)+'"]';var m=f;switch(i){case"style":m=Zs(n);break;case"script":m=Js(n)}gn.has(m)||(n=g({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:n,as:i},r),gn.set(m,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(cr(m))||i==="script"&&c.querySelector(ur(m))||(i=c.createElement("link"),Te(i,"link",n),me(i),c.head.appendChild(i)))}}function pv(n,i){ti.m(n,i);var r=Qs;if(r&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ln(c)+'"][href="'+ln(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Js(n)}if(!gn.has(m)&&(n=g({rel:"modulepreload",href:n},i),gn.set(m,n),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ur(m)))return}c=r.createElement("link"),Te(c,"link",n),me(c),r.head.appendChild(c)}}}function gv(n,i,r){ti.S(n,i,r);var c=Qs;if(c&&n){var f=bs(c).hoistableStyles,m=Zs(n);i=i||"default";var A=f.get(m);if(!A){var x={loading:0,preload:null};if(A=c.querySelector(cr(m)))x.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":i},r),(r=gn.get(m))&&Yu(n,r);var R=A=c.createElement("link");me(R),Te(R,"link",n),R._p=new Promise(function(z,X){R.onload=z,R.onerror=X}),R.addEventListener("load",function(){x.loading|=1}),R.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Zo(A,i,c)}A={type:"stylesheet",instance:A,count:1,state:x},f.set(m,A)}}}function mv(n,i){ti.X(n,i);var r=Qs;if(r&&n){var c=bs(r).hoistableScripts,f=Js(n),m=c.get(f);m||(m=r.querySelector(ur(f)),m||(n=g({src:n,async:!0},i),(i=gn.get(f))&&$u(n,i),m=r.createElement("script"),me(m),Te(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function yv(n,i){ti.M(n,i);var r=Qs;if(r&&n){var c=bs(r).hoistableScripts,f=Js(n),m=c.get(f);m||(m=r.querySelector(ur(f)),m||(n=g({src:n,async:!0,type:"module"},i),(i=gn.get(f))&&$u(n,i),m=r.createElement("script"),me(m),Te(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function zg(n,i,r,c){var f=(f=at.current)?Qo(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Zs(r.href),r=bs(f).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Zs(r.href);var m=bs(f).hoistableStyles,A=m.get(n);if(A||(f=f.ownerDocument||f,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,A),(m=f.querySelector(cr(n)))&&!m._p&&(A.instance=m,A.state.loading=5),gn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},gn.set(n,r),m||bv(f,n,r,A.state))),i&&c===null)throw Error(s(528,""));return A}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Js(r),r=bs(f).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Zs(n){return'href="'+ln(n)+'"'}function cr(n){return'link[rel="stylesheet"]['+n+"]"}function Hg(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function bv(n,i,r,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Te(i,"link",r),me(i),n.head.appendChild(i))}function Js(n){return'[src="'+ln(n)+'"]'}function ur(n){return"script[async]"+n}function Ig(n,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+ln(r.href)+'"]');if(c)return i.instance=c,me(c),c;var f=g({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),me(c),Te(c,"style",f),Zo(c,r.precedence,n),i.instance=c;case"stylesheet":f=Zs(r.href);var m=n.querySelector(cr(f));if(m)return i.state.loading|=4,i.instance=m,me(m),m;c=Hg(r),(f=gn.get(f))&&Yu(c,f),m=(n.ownerDocument||n).createElement("link"),me(m);var A=m;return A._p=new Promise(function(x,R){A.onload=x,A.onerror=R}),Te(m,"link",c),i.state.loading|=4,Zo(m,r.precedence,n),i.instance=m;case"script":return m=Js(r.src),(f=n.querySelector(ur(m)))?(i.instance=f,me(f),f):(c=r,(f=gn.get(m))&&(c=g({},r),$u(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),me(f),Te(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Zo(c,r.precedence,n));return i.instance}function Zo(n,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,A=0;A<c.length;A++){var x=c[A];if(x.dataset.precedence===i)m=x;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(n,i.firstChild))}function Yu(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function $u(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Jo=null;function jg(n,i,r){if(Jo===null){var c=new Map,f=Jo=new Map;f.set(r,c)}else f=Jo,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),f=0;f<r.length;f++){var m=r[f];if(!(m[Ea]||m[Me]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var A=m.getAttribute(i)||"";A=n+A;var x=c.get(A);x?x.push(m):c.set(A,[m])}}return c}function Gg(n,i,r){n=n.ownerDocument||n,n.head.insertBefore(r,i==="title"?n.querySelector("head > title"):null)}function vv(n,i,r){if(r===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Vg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var hr=null;function Av(){}function Sv(n,i,r){if(hr===null)throw Error(s(475));var c=hr;if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Zs(r.href),m=n.querySelector(cr(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=tl.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=m,me(m);return}m=n.ownerDocument||n,r=Hg(r),(f=gn.get(f))&&Yu(r,f),m=m.createElement("link"),me(m);var A=m;A._p=new Promise(function(x,R){A.onload=x,A.onerror=R}),Te(m,"link",r),i.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=tl.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function wv(){if(hr===null)throw Error(s(475));var n=hr;return n.stylesheets&&n.count===0&&Wu(n,n.stylesheets),0<n.count?function(i){var r=setTimeout(function(){if(n.stylesheets&&Wu(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(r)}}:null}function tl(){if(this.count--,this.count===0){if(this.stylesheets)Wu(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var el=null;function Wu(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,el=new Map,i.forEach(Ev,n),el=null,tl.call(n))}function Ev(n,i){if(!(i.state.loading&4)){var r=el.get(n);if(r)var c=r.get(null);else{r=new Map,el.set(n,r);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var A=f[m];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(r.set(A.dataset.precedence,A),c=A)}c&&r.set(null,c)}f=i.instance,A=f.getAttribute("data-precedence"),m=r.get(A)||c,m===c&&r.set(null,f),r.set(A,f),this.count++,c=tl.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var dr={$$typeof:C,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function _v(n,i,r,c,f,m,A,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ql(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.hiddenUpdates=ql(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function qg(n,i,r,c,f,m,A,x,R,z,X,W){return n=new _v(n,i,r,A,x,R,z,W),i=1,m===!0&&(i|=24),m=We(3,null,null,i),n.current=m,m.stateNode=n,i=Dc(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:i},kc(m),n}function Xg(n){return n?(n=Ds,n):Ds}function Yg(n,i,r,c,f,m){f=Xg(f),c.context===null?c.context=f:c.pendingContext=f,c=fi(i),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=pi(n,c,i),r!==null&&(tn(r,n,i),ja(r,n,i))}function $g(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<i?r:i}}function Ku(n,i){$g(n,i),(n=n.alternate)&&$g(n,i)}function Wg(n){if(n.tag===13){var i=Ms(n,67108864);i!==null&&tn(i,n,67108864),Ku(n,67108864)}}var nl=!0;function xv(n,i,r,c){var f=k.T;k.T=null;var m=G.p;try{G.p=2,Qu(n,i,r,c)}finally{G.p=m,k.T=f}}function Tv(n,i,r,c){var f=k.T;k.T=null;var m=G.p;try{G.p=8,Qu(n,i,r,c)}finally{G.p=m,k.T=f}}function Qu(n,i,r,c){if(nl){var f=Zu(c);if(f===null)Uu(n,i,c,il,r),Qg(n,c);else if(Rv(f,n,i,r,c))c.stopPropagation();else if(Qg(n,c),i&4&&-1<Cv.indexOf(n)){for(;f!==null;){var m=ys(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var A=Ui(m.pendingLanes);if(A!==0){var x=m;for(x.pendingLanes|=2,x.entangledLanes|=2;A;){var R=1<<31-ne(A);x.entanglements[1]|=R,A&=~R}Dn(m),(kt&6)===0&&(Ho=Ee()+500,ar(0))}}break;case 13:x=Ms(m,2),x!==null&&tn(x,m,2),jo(),Ku(m,2)}if(m=Zu(c),m===null&&Uu(n,i,c,il,r),m===f)break;f=m}f!==null&&c.stopPropagation()}else Uu(n,i,c,null,r)}}function Zu(n){return n=ic(n),Ju(n)}var il=null;function Ju(n){if(il=null,n=ms(n),n!==null){var i=o(n);if(i===null)n=null;else{var r=i.tag;if(r===13){if(n=l(i),n!==null)return n;n=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return il=n,null}function Kg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bi()){case ps:return 2;case Yr:return 8;case zn:case jl:return 32;case $r:return 268435456;default:return 32}default:return 32}}var th=!1,Ci=null,Ri=null,Mi=null,fr=new Map,pr=new Map,Di=[],Cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qg(n,i){switch(n){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":fr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(i.pointerId)}}function gr(n,i,r,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=ys(i),i!==null&&Wg(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Rv(n,i,r,c,f){switch(i){case"focusin":return Ci=gr(Ci,n,i,r,c,f),!0;case"dragenter":return Ri=gr(Ri,n,i,r,c,f),!0;case"mouseover":return Mi=gr(Mi,n,i,r,c,f),!0;case"pointerover":var m=f.pointerId;return fr.set(m,gr(fr.get(m)||null,n,i,r,c,f)),!0;case"gotpointercapture":return m=f.pointerId,pr.set(m,gr(pr.get(m)||null,n,i,r,c,f)),!0}return!1}function Zg(n){var i=ms(n.target);if(i!==null){var r=o(i);if(r!==null){if(i=r.tag,i===13){if(i=l(r),i!==null){n.blockedOn=i,Sb(n.priority,function(){if(r.tag===13){var c=Je();c=Xl(c);var f=Ms(r,c);f!==null&&tn(f,r,c),Ku(r,c)}});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sl(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var r=Zu(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);nc=c,r.target.dispatchEvent(c),nc=null}else return i=ys(r),i!==null&&Wg(i),n.blockedOn=r,!1;i.shift()}return!0}function Jg(n,i,r){sl(n)&&r.delete(i)}function Mv(){th=!1,Ci!==null&&sl(Ci)&&(Ci=null),Ri!==null&&sl(Ri)&&(Ri=null),Mi!==null&&sl(Mi)&&(Mi=null),fr.forEach(Jg),pr.forEach(Jg)}function al(n,i){n.blockedOn===i&&(n.blockedOn=null,th||(th=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Mv)))}var rl=null;function tm(n){rl!==n&&(rl=n,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){rl===n&&(rl=null);for(var i=0;i<n.length;i+=3){var r=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(Ju(c||r)===null)continue;break}var m=ys(r);m!==null&&(n.splice(i,3),i-=3,Jc(m,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function mr(n){function i(R){return al(R,n)}Ci!==null&&al(Ci,n),Ri!==null&&al(Ri,n),Mi!==null&&al(Mi,n),fr.forEach(i),pr.forEach(i);for(var r=0;r<Di.length;r++){var c=Di[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Di.length&&(r=Di[0],r.blockedOn===null);)Zg(r),r.blockedOn===null&&Di.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],m=r[c+1],A=f[ze]||null;if(typeof m=="function")A||tm(r);else if(A){var x=null;if(m&&m.hasAttribute("formAction")){if(f=m,A=m[ze]||null)x=A.formAction;else if(Ju(f)!==null)continue}else x=A.action;typeof x=="function"?r[c+1]=x:(r.splice(c,3),c-=3),tm(r)}}}function eh(n){this._internalRoot=n}ol.prototype.render=eh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,c=Je();Yg(r,c,n,i,null,null)},ol.prototype.unmount=eh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Yg(n.current,2,null,n,null,null),jo(),i[gs]=null}};function ol(n){this._internalRoot=n}ol.prototype.unstable_scheduleHydration=function(n){if(n){var i=md();n={blockedOn:null,target:n,priority:i};for(var r=0;r<Di.length&&i!==0&&i<Di[r].priority;r++);Di.splice(r,0,n),r===0&&Zg(n)}};var em=t.version;if(em!=="19.1.1")throw Error(s(527,em,"19.1.1"));G.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=d(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var Dv={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{Fi=ll.inject(Dv),ee=ll}catch{}}return br.createRoot=function(n,i){if(!a(n))throw Error(s(299));var r=!1,c="",f=yp,m=bp,A=vp,x=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(A=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(x=i.unstable_transitionCallbacks)),i=qg(n,1,!1,null,null,r,c,f,m,A,x,null),n[gs]=i.current,Fu(n),new eh(i)},br.hydrateRoot=function(n,i,r){if(!a(n))throw Error(s(299));var c=!1,f="",m=yp,A=bp,x=vp,R=null,z=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(A=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks),r.formState!==void 0&&(z=r.formState)),i=qg(n,1,!0,i,r??null,c,f,m,A,x,R,z),i.context=Xg(null),r=i.current,c=Je(),c=Xl(c),f=fi(c),f.callback=null,pi(r,f,c),r=c,i.current.lanes=r,wa(i,r),Dn(i),n[gs]=i.current,Fu(n),new ol(i)},br.version="19.1.1",br}var fm;function Iv(){if(fm)return ah.exports;fm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),ah.exports=Hv(),ah.exports}var jv=Iv();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pm="popstate";function Gv(h={}){function t(a,o){let{pathname:l="/",search:u="",hash:d=""}=hs(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ah("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(a,o){let l=a.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=a.location.href,p=d.indexOf("#");u=p===-1?d:d.slice(0,p)}return u+"#"+(typeof o=="string"?o:Mr(o))}function s(a,o){an(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return qv(t,e,s,h)}function Kt(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function an(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Vv(){return Math.random().toString(36).substring(2,10)}function gm(h,t){return{usr:h.state,key:h.key,idx:t}}function Ah(h,t,e=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?hs(t):t,state:e,key:t&&t.key||s||Vv()}}function Mr({pathname:h="/",search:t="",hash:e=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(h+=e.charAt(0)==="#"?e:"#"+e),h}function hs(h){let t={};if(h){let e=h.indexOf("#");e>=0&&(t.hash=h.substring(e),h=h.substring(0,e));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function qv(h,t,e,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,u="POP",d=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function y(){u="POP";let _=g(),E=_==null?null:_-p;p=_,d&&d({action:u,location:S.location,delta:E})}function b(_,E){u="PUSH";let T=Ah(S.location,_,E);e&&e(T,_),p=g()+1;let C=gm(T,p),N=S.createHref(T);try{l.pushState(C,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(N)}o&&d&&d({action:u,location:S.location,delta:1})}function v(_,E){u="REPLACE";let T=Ah(S.location,_,E);e&&e(T,_),p=g();let C=gm(T,p),N=S.createHref(T);l.replaceState(C,"",N),o&&d&&d({action:u,location:S.location,delta:0})}function w(_){return Xv(_)}let S={get action(){return u},get location(){return h(a,l)},listen(_){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(pm,y),d=_,()=>{a.removeEventListener(pm,y),d=null}},createHref(_){return t(a,_)},createURL:w,encodeLocation(_){let E=w(_);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:v,go(_){return l.go(_)}};return S}function Xv(h,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(e,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:Mr(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=e+s),new URL(s,e)}function ny(h,t,e="/"){return Yv(h,t,e,!1)}function Yv(h,t,e,s){let a=typeof t=="string"?hs(t):t,o=ai(a.pathname||"/",e);if(o==null)return null;let l=iy(h);$v(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=aA(o);u=iA(l[d],p,s)}return u}function iy(h,t=[],e=[],s="",a=!1){let o=(l,u,d=a,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;Kt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=si([s,g.relativePath]),b=e.concat(g);l.children&&l.children.length>0&&(Kt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),iy(l.children,t,b,y,d)),!(l.path==null&&!l.index)&&t.push({path:y,score:eA(y,l.index),routesMeta:b})};return h.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of sy(l.path))o(l,u,!0,d)}),t}function sy(h){let t=h.split("/");if(t.length===0)return[];let[e,...s]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=sy(s.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function $v(h){h.sort((t,e)=>t.score!==e.score?e.score-t.score:nA(t.routesMeta.map(s=>s.childrenIndex),e.routesMeta.map(s=>s.childrenIndex)))}var Wv=/^:[\w-]+$/,Kv=3,Qv=2,Zv=1,Jv=10,tA=-2,mm=h=>h==="*";function eA(h,t){let e=h.split("/"),s=e.length;return e.some(mm)&&(s+=tA),t&&(s+=Qv),e.filter(a=>!mm(a)).reduce((a,o)=>a+(Wv.test(o)?Kv:o===""?Zv:Jv),s)}function nA(h,t){return h.length===t.length&&h.slice(0,-1).every((s,a)=>s===t[a])?h[h.length-1]-t[t.length-1]:0}function iA(h,t,e=!1){let{routesMeta:s}=h,a={},o="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],p=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=_l({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),b=d.route;if(!y&&p&&e&&!s[s.length-1].route.index&&(y=_l({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:si([o,y.pathname]),pathnameBase:cA(si([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=si([o,y.pathnameBase]))}return l}function _l(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[e,s]=sA(h.path,h.caseSensitive,h.end),a=t.match(e);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((p,{paramName:g,isOptional:y},b)=>{if(g==="*"){let w=u[b]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[b];return y&&!v?p[g]=void 0:p[g]=(v||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:h}}function sA(h,t=!1,e=!0){an(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],a="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(s.push({paramName:"*"}),a+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":h!==""&&h!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function aA(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return an(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function ai(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,s=h.charAt(e);return s&&s!=="/"?null:h.slice(e)||"/"}function rA(h,t="/"){let{pathname:e,search:s="",hash:a=""}=typeof h=="string"?hs(h):h;return{pathname:e?e.startsWith("/")?e:oA(e,t):t,search:uA(s),hash:hA(a)}}function oA(h,t){let e=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function ch(h,t,e,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lA(h){return h.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Bh(h){let t=lA(h);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function Fh(h,t,e,s=!1){let a;typeof h=="string"?a=hs(h):(a={...h},Kt(!a.pathname||!a.pathname.includes("?"),ch("?","pathname","search",a)),Kt(!a.pathname||!a.pathname.includes("#"),ch("#","pathname","hash",a)),Kt(!a.search||!a.search.includes("#"),ch("#","search","hash",a)));let o=h===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=e;else{let y=t.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=rA(a,u),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var si=h=>h.join("/").replace(/\/\/+/g,"/"),cA=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),uA=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,hA=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function dA(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}var ay=["POST","PUT","PATCH","DELETE"];new Set(ay);var fA=["GET",...ay];new Set(fA);var pa=L.createContext(null);pa.displayName="DataRouter";var Dl=L.createContext(null);Dl.displayName="DataRouterState";L.createContext(!1);var ry=L.createContext({isTransitioning:!1});ry.displayName="ViewTransition";var pA=L.createContext(new Map);pA.displayName="Fetchers";var gA=L.createContext(null);gA.displayName="Await";var _n=L.createContext(null);_n.displayName="Navigation";var Br=L.createContext(null);Br.displayName="Location";var xn=L.createContext({outlet:null,matches:[],isDataRoute:!1});xn.displayName="Route";var Uh=L.createContext(null);Uh.displayName="RouteError";function mA(h,{relative:t}={}){Kt(ga(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:s}=L.useContext(_n),{hash:a,pathname:o,search:l}=Fr(h,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:si([e,o])),s.createHref({pathname:u,search:l,hash:a})}function ga(){return L.useContext(Br)!=null}function li(){return Kt(ga(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Br).location}var oy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ly(h){L.useContext(_n).static||L.useLayoutEffect(h)}function ma(){let{isDataRoute:h}=L.useContext(xn);return h?MA():yA()}function yA(){Kt(ga(),"useNavigate() may be used only in the context of a <Router> component.");let h=L.useContext(pa),{basename:t,navigator:e}=L.useContext(_n),{matches:s}=L.useContext(xn),{pathname:a}=li(),o=JSON.stringify(Bh(s)),l=L.useRef(!1);return ly(()=>{l.current=!0}),L.useCallback((d,p={})=>{if(an(l.current,oy),!l.current)return;if(typeof d=="number"){e.go(d);return}let g=Fh(d,JSON.parse(o),a,p.relative==="path");h==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:si([t,g.pathname])),(p.replace?e.replace:e.push)(g,p.state,p)},[t,e,o,a,h])}L.createContext(null);function cy(){let{matches:h}=L.useContext(xn),t=h[h.length-1];return t?t.params:{}}function Fr(h,{relative:t}={}){let{matches:e}=L.useContext(xn),{pathname:s}=li(),a=JSON.stringify(Bh(e));return L.useMemo(()=>Fh(h,JSON.parse(a),s,t==="path"),[h,a,s,t])}function bA(h,t){return uy(h,t)}function uy(h,t,e,s,a){Kt(ga(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(_n),{matches:l}=L.useContext(xn),u=l[l.length-1],d=u?u.params:{},p=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let T=y&&y.path||"";hy(p,!y||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=li(),v;if(t){let T=typeof t=="string"?hs(t):t;Kt(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=b;let w=v.pathname||"/",S=w;if(g!=="/"){let T=g.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=ny(h,{pathname:S});an(y||_!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),an(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=EA(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:si([g,o.encodeLocation?o.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:si([g,o.encodeLocation?o.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),l,e,s,a);return t&&E?L.createElement(Br.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},E):E}function vA(){let h=RA(),t=dA(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),e=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",h),l=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),e?L.createElement("pre",{style:a},e):null,l)}var AA=L.createElement(vA,null),SA=class extends L.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.unstable_onError?this.props.unstable_onError(h,t):console.error("React Router caught the following error during render",h)}render(){return this.state.error!==void 0?L.createElement(xn.Provider,{value:this.props.routeContext},L.createElement(Uh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wA({routeContext:h,match:t,children:e}){let s=L.useContext(pa);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(xn.Provider,{value:h},e)}function EA(h,t=[],e=null,s=null,a=null){if(h==null){if(!e)return null;if(e.errors)h=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)h=e.matches;else return null}let o=h,l=e?.errors;if(l!=null){let p=o.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);Kt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(e)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:y,errors:b}=e,v=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||v){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,y)=>{let b,v=!1,w=null,S=null;e&&(b=l&&g.route.id?l[g.route.id]:void 0,w=g.route.errorElement||AA,u&&(d<0&&y===0?(hy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):d===y&&(v=!0,S=g.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,y+1)),E=()=>{let T;return b?T=w:v?T=S:g.route.Component?T=L.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=p,L.createElement(wA,{match:g,routeContext:{outlet:p,matches:_,isDataRoute:e!=null},children:T})};return e&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?L.createElement(SA,{location:e.location,revalidation:e.revalidation,component:w,error:b,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:s}):E()},null)}function zh(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _A(h){let t=L.useContext(pa);return Kt(t,zh(h)),t}function xA(h){let t=L.useContext(Dl);return Kt(t,zh(h)),t}function TA(h){let t=L.useContext(xn);return Kt(t,zh(h)),t}function Hh(h){let t=TA(h),e=t.matches[t.matches.length-1];return Kt(e.route.id,`${h} can only be used on routes that contain a unique "id"`),e.route.id}function CA(){return Hh("useRouteId")}function RA(){let h=L.useContext(Uh),t=xA("useRouteError"),e=Hh("useRouteError");return h!==void 0?h:t.errors?.[e]}function MA(){let{router:h}=_A("useNavigate"),t=Hh("useNavigate"),e=L.useRef(!1);return ly(()=>{e.current=!0}),L.useCallback(async(a,o={})=>{an(e.current,oy),e.current&&(typeof a=="number"?h.navigate(a):await h.navigate(a,{fromRouteId:t,...o}))},[h,t])}var ym={};function hy(h,t,e){!t&&!ym[h]&&(ym[h]=!0,an(!1,e))}L.memo(DA);function DA({routes:h,future:t,state:e,unstable_onError:s}){return uy(h,void 0,e,s,t)}function dy({to:h,replace:t,state:e,relative:s}){Kt(ga(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=L.useContext(_n);an(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=L.useContext(xn),{pathname:l}=li(),u=ma(),d=Fh(h,Bh(o),l,s==="path"),p=JSON.stringify(d);return L.useEffect(()=>{u(JSON.parse(p),{replace:t,state:e,relative:s})},[u,p,s,t,e]),null}function Oi(h){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LA({basename:h="/",children:t=null,location:e,navigationType:s="POP",navigator:a,static:o=!1}){Kt(!ga(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=h.replace(/^\/*/,"/"),u=L.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof e=="string"&&(e=hs(e));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:b="default"}=e,v=L.useMemo(()=>{let w=ai(d,l);return w==null?null:{location:{pathname:w,search:p,hash:g,state:y,key:b},navigationType:s}},[l,d,p,g,y,b,s]);return an(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:L.createElement(_n.Provider,{value:u},L.createElement(Br.Provider,{children:t,value:v}))}function OA({children:h,location:t}){return bA(Sh(h),t)}function Sh(h,t=[]){let e=[];return L.Children.forEach(h,(s,a)=>{if(!L.isValidElement(s))return;let o=[...t,a];if(s.type===L.Fragment){e.push.apply(e,Sh(s.props.children,o));return}Kt(s.type===Oi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Sh(s.props.children,o)),e.push(l)}),e}var Al="get",Sl="application/x-www-form-urlencoded";function Ll(h){return h!=null&&typeof h.tagName=="string"}function NA(h){return Ll(h)&&h.tagName.toLowerCase()==="button"}function kA(h){return Ll(h)&&h.tagName.toLowerCase()==="form"}function PA(h){return Ll(h)&&h.tagName.toLowerCase()==="input"}function BA(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function FA(h,t){return h.button===0&&(!t||t==="_self")&&!BA(h)}function wh(h=""){return new URLSearchParams(typeof h=="string"||Array.isArray(h)||h instanceof URLSearchParams?h:Object.keys(h).reduce((t,e)=>{let s=h[e];return t.concat(Array.isArray(s)?s.map(a=>[e,a]):[[e,s]])},[]))}function UA(h,t){let e=wh(h);return t&&t.forEach((s,a)=>{e.has(a)||t.getAll(a).forEach(o=>{e.append(a,o)})}),e}var cl=null;function zA(){if(cl===null)try{new FormData(document.createElement("form"),0),cl=!1}catch{cl=!0}return cl}var HA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uh(h){return h!=null&&!HA.has(h)?(an(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sl}"`),null):h}function IA(h,t){let e,s,a,o,l;if(kA(h)){let u=h.getAttribute("action");s=u?ai(u,t):null,e=h.getAttribute("method")||Al,a=uh(h.getAttribute("enctype"))||Sl,o=new FormData(h)}else if(NA(h)||PA(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(s=d?ai(d,t):null,e=h.getAttribute("formmethod")||u.getAttribute("method")||Al,a=uh(h.getAttribute("formenctype"))||uh(u.getAttribute("enctype"))||Sl,o=new FormData(u,h),!zA()){let{name:p,type:g,value:y}=h;if(g==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,y)}}else{if(Ll(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Al,s=null,a=Sl,l=h}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:e.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ih(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function jA(h,t,e){let s=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return s.pathname==="/"?s.pathname=`_root.${e}`:t&&ai(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${e}`,s}async function GA(h,t){if(h.id in t)return t[h.id];try{let e=await import(h.module);return t[h.id]=e,e}catch(e){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VA(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function qA(h,t,e){let s=await Promise.all(h.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await GA(o,e);return l.links?l.links():[]}return[]}));return WA(s.flat(1).filter(VA).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function bm(h,t,e,s,a,o){let l=(d,p)=>e[p]?d.route.id!==e[p].route.id:!0,u=(d,p)=>e[p].pathname!==d.pathname||e[p].route.path?.endsWith("*")&&e[p].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,p)=>l(d,p)||u(d,p)):o==="data"?t.filter((d,p)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,p)||u(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function XA(h,t,{includeHydrateFallback:e}={}){return YA(h.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function YA(h){return[...new Set(h)]}function $A(h){let t={},e=Object.keys(h).sort();for(let s of e)t[s]=h[s];return t}function WA(h,t){let e=new Set;return new Set(t),h.reduce((s,a)=>{let o=JSON.stringify($A(a));return e.has(o)||(e.add(o),s.push({key:o,link:a})),s},[])}function fy(){let h=L.useContext(pa);return Ih(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function KA(){let h=L.useContext(Dl);return Ih(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var jh=L.createContext(void 0);jh.displayName="FrameworkContext";function py(){let h=L.useContext(jh);return Ih(h,"You must render this element inside a <HydratedRouter> element"),h}function QA(h,t){let e=L.useContext(jh),[s,a]=L.useState(!1),[o,l]=L.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,b=L.useRef(null);L.useEffect(()=>{if(h==="render"&&l(!0),h==="viewport"){let S=E=>{E.forEach(T=>{l(T.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[h]),L.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let v=()=>{a(!0)},w=()=>{a(!1),l(!1)};return e?h!=="intent"?[o,b,{}]:[o,b,{onFocus:vr(u,v),onBlur:vr(d,w),onMouseEnter:vr(p,v),onMouseLeave:vr(g,w),onTouchStart:vr(y,v)}]:[!1,b,{}]}function vr(h,t){return e=>{h&&h(e),e.defaultPrevented||t(e)}}function ZA({page:h,...t}){let{router:e}=fy(),s=L.useMemo(()=>ny(e.routes,h,e.basename),[e.routes,h,e.basename]);return s?L.createElement(tS,{page:h,matches:s,...t}):null}function JA(h){let{manifest:t,routeModules:e}=py(),[s,a]=L.useState([]);return L.useEffect(()=>{let o=!1;return qA(h,t,e).then(l=>{o||a(l)}),()=>{o=!0}},[h,t,e]),s}function tS({page:h,matches:t,...e}){let s=li(),{manifest:a,routeModules:o}=py(),{basename:l}=fy(),{loaderData:u,matches:d}=KA(),p=L.useMemo(()=>bm(h,t,d,a,s,"data"),[h,t,d,a,s]),g=L.useMemo(()=>bm(h,t,d,a,s,"assets"),[h,t,d,a,s]),y=L.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let w=new Set,S=!1;if(t.forEach(E=>{let T=a.routes[E.route.id];!T||!T.hasLoader||(!p.some(C=>C.route.id===E.route.id)&&E.route.id in u&&o[E.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:w.add(E.route.id))}),w.size===0)return[];let _=jA(h,l,"data");return S&&w.size>0&&_.searchParams.set("_routes",t.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[_.pathname+_.search]},[l,u,s,a,p,t,h,o]),b=L.useMemo(()=>XA(g,a),[g,a]),v=JA(g);return L.createElement(L.Fragment,null,y.map(w=>L.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...e})),b.map(w=>L.createElement("link",{key:w,rel:"modulepreload",href:w,...e})),v.map(({key:w,link:S})=>L.createElement("link",{key:w,nonce:e.nonce,...S})))}function eS(...h){return t=>{h.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var gy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gy&&(window.__reactRouterVersion="7.9.1")}catch{}function nS({basename:h,children:t,window:e}){let s=L.useRef();s.current==null&&(s.current=Gv({window:e,v5Compat:!0}));let a=s.current,[o,l]=L.useState({action:a.action,location:a.location}),u=L.useCallback(d=>{L.startTransition(()=>l(d))},[l]);return L.useLayoutEffect(()=>a.listen(u),[a,u]),L.createElement(LA,{basename:h,children:t,location:o.location,navigationType:o.action,navigator:a})}var my=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gh=L.forwardRef(function({onClick:t,discover:e="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:p,preventScrollReset:g,viewTransition:y,...b},v){let{basename:w}=L.useContext(_n),S=typeof p=="string"&&my.test(p),_,E=!1;if(typeof p=="string"&&S&&(_=p,gy))try{let q=new URL(window.location.href),Q=p.startsWith("//")?new URL(q.protocol+p):new URL(p),Z=ai(Q.pathname,w);Q.origin===q.origin&&Z!=null?p=Z+Q.search+Q.hash:E=!0}catch{an(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=mA(p,{relative:a}),[C,N,M]=QA(s,b),B=rS(p,{replace:l,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y});function U(q){t&&t(q),q.defaultPrevented||B(q)}let V=L.createElement("a",{...b,...M,href:_||T,onClick:E||o?t:U,ref:eS(v,N),target:d,"data-discover":!S&&e==="render"?"true":void 0});return C&&!S?L.createElement(L.Fragment,null,V,L.createElement(ZA,{page:T})):V});Gh.displayName="Link";var iS=L.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...p},g){let y=Fr(l,{relative:p.relative}),b=li(),v=L.useContext(Dl),{navigator:w,basename:S}=L.useContext(_n),_=v!=null&&dS(y)&&u===!0,E=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,T=b.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;e||(T=T.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&S&&(C=ai(C,S)||C);const N=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let M=T===E||!a&&T.startsWith(E)&&T.charAt(N)==="/",B=C!=null&&(C===E||!a&&C.startsWith(E)&&C.charAt(E.length)==="/"),U={isActive:M,isPending:B,isTransitioning:_},V=M?t:void 0,q;typeof s=="function"?q=s(U):q=[s,M?"active":null,B?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let Q=typeof o=="function"?o(U):o;return L.createElement(Gh,{...p,"aria-current":V,className:q,ref:g,style:Q,to:l,viewTransition:u},typeof d=="function"?d(U):d)});iS.displayName="NavLink";var sS=L.forwardRef(({discover:h="render",fetcherKey:t,navigate:e,reloadDocument:s,replace:a,state:o,method:l=Al,action:u,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:y,...b},v)=>{let w=uS(),S=hS(u,{relative:p}),_=l.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&my.test(u),T=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let N=C.nativeEvent.submitter,M=N?.getAttribute("formmethod")||l;w(N||C.currentTarget,{fetcherKey:t,method:M,navigate:e,replace:a,state:o,relative:p,preventScrollReset:g,viewTransition:y})};return L.createElement("form",{ref:v,method:_,action:S,onSubmit:s?d:T,...b,"data-discover":!E&&h==="render"?"true":void 0})});sS.displayName="Form";function aS(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yy(h){let t=L.useContext(pa);return Kt(t,aS(h)),t}function rS(h,{target:t,replace:e,state:s,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=ma(),d=li(),p=Fr(h,{relative:o});return L.useCallback(g=>{if(FA(g,t)){g.preventDefault();let y=e!==void 0?e:Mr(d)===Mr(p);u(h,{replace:y,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,p,e,s,t,h,a,o,l])}function oS(h){an(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=L.useRef(wh(h)),e=L.useRef(!1),s=li(),a=L.useMemo(()=>UA(s.search,e.current?null:t.current),[s.search]),o=ma(),l=L.useCallback((u,d)=>{const p=wh(typeof u=="function"?u(new URLSearchParams(a)):u);e.current=!0,o("?"+p,d)},[o,a]);return[a,l]}var lS=0,cS=()=>`__${String(++lS)}__`;function uS(){let{router:h}=yy("useSubmit"),{basename:t}=L.useContext(_n),e=CA();return L.useCallback(async(s,a={})=>{let{action:o,method:l,encType:u,formData:d,body:p}=IA(s,t);if(a.navigate===!1){let g=a.fetcherKey||cS();await h.fetch(g,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await h.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[h,t,e])}function hS(h,{relative:t}={}){let{basename:e}=L.useContext(_n),s=L.useContext(xn);Kt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...Fr(h||".",{relative:t})},l=li();if(h==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!h||h===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:si([e,o.pathname])),Mr(o)}function dS(h,{relative:t}={}){let e=L.useContext(ry);Kt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=yy("useViewTransitionState"),a=Fr(h,{relative:t});if(!e.isTransitioning)return!1;let o=ai(e.currentLocation.pathname,s)||e.currentLocation.pathname,l=ai(e.nextLocation.pathname,s)||e.nextLocation.pathname;return _l(a.pathname,l)!=null||_l(a.pathname,o)!=null}const ii="https://ninaskalender.ddns.net",fS=["Nei, du bisch z freh","Du gigu noni iz gugge","Chum iz chli warte chasch no"];function vm({data:h}){return I.jsx("div",{style:{backgroundImage:`url(${ii+"/images/"+h.thumbnailPath})`},className:`${h.locked?"blur-sm":""} aspect-square bg-contain text-4xl bg-center rounded-lg shadow-md relative`,children:I.jsx("div",{className:"absolute text-4xl inset-0 bg-black/40 flex items-center justify-center text-white text-center text-wrap font-bold",children:h.day})})}function pS({windows:h}){return I.jsxs(I.Fragment,{children:[I.jsx("h1",{className:"text-center text-4xl/loose",children:"Adventskalender"}),I.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 p-4",children:h?.map((t,e)=>t.locked?I.jsx(vm,{data:t},e):I.jsx(Gh,{to:`/window/${t.day}`,children:I.jsx(vm,{data:t})},e))})]})}async function gS(){const h=await fetch(`${ii}/api/windows`,{method:"GET",credentials:"include"});if(!h.ok)throw new Error(`HTTP Error: ${h.status}`);return(await h.json()).map(e=>{let s;if(e.content)try{s=JSON.parse(e.content)}catch{s=void 0}return{...e,content:s}})}async function mS(h){const t=await fetch(`${ii}/api/windows/${h.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,content:JSON.stringify(h.content),opened:!!h.opened}),credentials:"include"});if(t.status===204)return console.log("Window updated successfully!"),!0;if(t.status===404)console.error("Window not found");else if(t.status===409)console.error("ID mismatch");else{const e=await t.text();throw new Error(e)}return!1}const by=L.createContext(null),ya=()=>{const h=L.useContext(by);if(!h)throw new Error("useApiContext must be used inside and ApiProvider");return h},yS=({children:h})=>{const[t,e]=L.useState(null),[s,a]=L.useState(!0),[o,l]=L.useState(null),[u,d]=L.useState(!1),[p,g]=L.useState(!1),y=L.useCallback(async()=>{try{a(!0);const E=await gS();e(E)}catch(E){l(E instanceof Error?E.message:"Unknown error")}finally{a(!1)}},[]),b=L.useCallback(async E=>{const T=await fetch(`${ii}/api/authenticate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:E}),credentials:"include"});return d(T.ok),T.ok},[]),v=L.useCallback(async()=>{try{return(await fetch(`${ii}/api/authenticate/check`,{method:"GET",credentials:"include"})).ok?(d(!0),!0):(d(!1),!1)}catch{return d(!1),!1}},[]),w=L.useCallback(async E=>{const T=await fetch(`${ii}/api/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:E}),credentials:"include"});return g(T.ok),T.ok},[]),S=L.useCallback(async()=>{const E=await fetch(`${ii}/api/admin/check`,{method:"GET",credentials:"include"});return g(E.ok),E.ok},[]);L.useEffect(()=>{u&&y()},[u,y]);const _={windows:t,refreshWindows:y,isAuthenticated:u,authenticate:b,checkAuthenticated:v,isAdmin:p,authenticateAdmin:w,checkAdmin:S,loading:s,error:o};return I.jsx(by.Provider,{value:_,children:h})};function bS(){const{windows:h,checkAdmin:t}=ya(),e=ma();return L.useEffect(()=>{(async()=>await t()||e("/admin/login"))()},[t,e]),I.jsxs("div",{className:"min-h-full",children:[I.jsx("header",{className:"relative bg-gray-600 after:pointer-events-none after:absolute after:inset-x-0 after:inset-y-0 after:border-y after:border-white/10",children:I.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:I.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Admin Panel"})})}),I.jsx("main",{children:I.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:I.jsx("div",{className:"max-h-full overflow-x-auto rounded border border-gray-300 shadow-sm dark:border-gray-600",children:I.jsxs("table",{className:"min-w-full divide-y-2 divide-gray-200 dark:divide-gray-700",children:[I.jsx("thead",{className:"sticky top-0 bg-white ltr:text-left rtl:text-right dark:bg-gray-900",children:I.jsxs("tr",{className:"*:font-medium *:text-gray-900 dark:*:text-white",children:[I.jsx("th",{className:"px-3 py-2 whitespace-nowrap",children:"Day"}),I.jsx("th",{className:"px-3 py-2 whitespace-nowrap",children:"Text"}),I.jsx("th",{className:"px-3 py-2 whitespace-nowrap",children:"ImagePath"}),I.jsx("th",{className:"px-3 py-2 whitespace-nowrap",children:"Locked"}),I.jsx("th",{className:"px-3 py-2 whitespace-nowrap",children:"Opened"}),I.jsx("th",{className:"px-3 py-2 whitespace-nowrap",children:"Actions"})]})}),I.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h?.map(s=>I.jsxs("tr",{className:"*:text-gray-900 *:first:font-medium dark:*:text-white",children:[I.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.day}),I.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.text}),I.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.thumbnailPath}),I.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.locked?"true":"false"}),I.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:s.opened?"true":"false"}),I.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:I.jsxs("div",{className:"inline-flex rounded-md shadow-xs",role:"group",children:[I.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-s-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white",onClick:()=>e(`edit/${s.day}`),children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})})}),I.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-e-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})})]},s.day))})]})})})})]})}const vS=["text","image","pdf","audio","video"];function AS(){const{windows:h,refreshWindows:t}=ya(),e=ma(),{day:s}=cy(),a=Number(s),o=h?.find(M=>M.day==a),[l,u]=L.useState(o?.text??""),[d,p]=L.useState(o?.thumbnailPath??""),[g,y]=L.useState(o?.opened??0),[b,v]=L.useState(o?.type||"text"),[w,S]=L.useState(JSON.stringify(o?.content)),[_,E]=L.useState(!1),[T,C]=L.useState(null);L.useEffect(()=>{o&&(u(o.text),p(o.thumbnailPath),y(o.opened),v(o.type),S(JSON.stringify(o.content)))},[o]);const N=async()=>{E(!0),C(null);try{await mS({id:o.id,text:l,thumbnailPath:d,opened:g,type:b,content:JSON.parse(w)})&&await t()}catch(M){C(M instanceof Error?M.message:"Unknown error")}finally{E(!1)}};return o?I.jsxs(I.Fragment,{children:[I.jsx("button",{className:"bg-blue-500 py-2 px-4",onClick:()=>e("/admin"),children:"Back"}),I.jsxs("div",{className:"mx-auto w-1/4 flex flex-col gap-6",children:[I.jsxs("h1",{className:"text-center text-3xl",children:["Day: ",a]}),I.jsx("label",{htmlFor:"text",className:"text-lg/6 font-medium text-white",children:"Text"}),I.jsx("input",{id:"text",type:"text",name:"text",value:l,onChange:M=>u(M.target.value),className:"w-full bg-gray-800 py-1.5 pr-3 pl-1 text-base text-white placeholder:text-gray-500 focus:outline-none sm:text-sm/6"}),I.jsx("label",{htmlFor:"imagePath",className:"text-lg/6 font-medium text-white",children:"Thumbnail Path"}),I.jsx("input",{id:"thumbnailPath",type:"text",name:"thumbnailPath",value:d,onChange:M=>p(M.target.value),className:"w-full bg-gray-800 py-1.5 pr-3 pl-1 text-base text-white placeholder:text-gray-500 focus:outline-none sm:text-sm/6"}),I.jsx("label",{htmlFor:"opened",className:"text-lg/6 font-medium text-white",children:"Opened"}),I.jsx("input",{id:"opened",type:"checkbox",checked:!!g,onChange:M=>y(M.target.checked?1:0),name:"opened"}),I.jsx("label",{htmlFor:"type",className:"block text-lg/6 font-medium text-white",children:"Type"}),I.jsx("select",{id:"type",className:"bg-black w-full",name:"type",value:b,onChange:M=>v(M.target.value),children:vS.map(M=>I.jsx("option",{value:M,children:M},M))}),I.jsx("label",{htmlFor:"content",className:"text-lg/6 font-medium text-white",children:"Content"}),I.jsx("textarea",{id:"content",name:"content",className:"w-full min-h-6",value:w,onChange:M=>S(M.target.value)}),I.jsx("br",{}),T&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"text-red-500",children:T}),I.jsx("br",{})]}),I.jsx("button",{type:"button",onClick:N,disabled:_,className:"w-1/3  bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:_?"Saving...":"Save"})]})]}):I.jsx("p",{children:"Window not found"})}function Vh({number:h}){return Array.from({length:h}).map((e,s)=>{const a=Math.random()*100,o=5+Math.random()*5,l=Math.random()*5,u=16+Math.random()*16,d=Math.random()*-100-32,p=Math.random()>.5?"-360deg":"360deg";return I.jsx("span",{className:"snowflake",style:{left:`${a}%`,top:`${d}px`,animationDuration:`${o}s`,animationDelay:`${l}s`,fontSize:`${u}px`,"--rotate":p},children:""},s)})}function vy({number:h}){const t=Array.from({length:h});return t.map((e,s)=>{const a=s%2===0?"top":"bottom",o=s/t.length*100+3,l=["#FFD700","#FF0000","#00FF00","#00FFFF"],u=l[Math.floor(Math.random()*l.length)],d=Math.random()*2,p=1+Math.random()*1.5;return I.jsx("span",{className:"string-light",style:{[a]:"-8px",left:`${o}%`,backgroundColor:u,animationDelay:`${d}s`,animationDuration:`${p}`}},s)})}function SS({data:h}){return I.jsxs("div",{className:"relative flex items-center justify-center min-h-screen px-4 bg-gray-900 overflow-hidden",children:[I.jsx(Vh,{number:25}),I.jsxs("div",{className:"relative z-10 bg-red-900/80 shadow-2xl rounded-3xl p-8 max-w-lg w-full text-center border-2 border-green-400",children:[I.jsx("h1",{className:"text-3xl md:text-4xl text-yellow-400 font-extrabold mb-4",children:h.content?.header}),I.jsx("p",{className:"text-white text-lg md:text-xl leading-relaxed whitespace-pre-line",children:h.content?.text}),I.jsx("img",{className:"mx-auto p-4",src:`${ii+"/images/"+h.content?.imagePath}`}),I.jsx(vy,{number:16})]})]})}const wS=h=>h.length<=0?"Strings are empty":h[Math.floor(Math.random()*h.length)];function ES({data:h}){return I.jsxs("div",{className:"relative flex items-center justify-center min-h-screen px-4 bg-gray-900 overflow-hidden",children:[I.jsx(Vh,{number:25}),I.jsxs("div",{className:"relative z-10 bg-red-900/80 shadow-2xl rounded-3xl p-8 max-w-lg w-full text-center border-2 border-green-400",children:[I.jsx("h1",{className:"text-3xl md:text-4xl text-yellow-400 font-extrabold mb-4",children:h.content?.header}),I.jsx("p",{className:"text-white text-lg md:text-xl leading-relaxed whitespace-pre-line",children:h.content?.text}),I.jsx(vy,{number:14})]})]})}function _S({data:h}){return I.jsxs("p",{children:["AudioWindow ",h.text]})}const Be=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Eh=[.001,0,0,.001,0,0],hh=1.35,en={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Un={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Dr="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Ay={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ce={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Cr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},le={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ea={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ur={ERRORS:0,WARNINGS:1,INFOS:5},ha={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ul={moveTo:0,lineTo:1,curveTo:2,closePath:3},Sy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ol=Ur.WARNINGS;function xS(h){Number.isInteger(h)&&(Ol=h)}function TS(){return Ol}function Nl(h){Ol>=Ur.INFOS&&console.info(`Info: ${h}`)}function vt(h){Ol>=Ur.WARNINGS&&console.warn(`Warning: ${h}`)}function Vt(h){throw new Error(h)}function Dt(h,t){h||Vt(t)}function CS(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qh(h,t=null,e=null){if(!h)return null;if(e&&typeof h=="string"&&(e.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),e.tryConvertEncoding))try{h=OS(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return CS(s)?s:null}function Xh(h,t,e=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):e&&qh(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function St(h,t,e,s=!1){return Object.defineProperty(h,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const ds=(function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class Am extends ds{constructor(t,e){super(t,"PasswordException"),this.code=e}}class dh extends ds{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class xl extends ds{constructor(t){super(t,"InvalidPDFException")}}class Lr extends ds{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class RS extends ds{constructor(t){super(t,"FormatError")}}class ri extends ds{constructor(t){super(t,"AbortException")}}function wy(h){(typeof h!="object"||h?.length===void 0)&&Vt("Invalid argument for bytesToString");const t=h.length,e=8192;if(t<e)return String.fromCharCode.apply(null,h);const s=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=h.subarray(a,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function zr(h){typeof h!="string"&&Vt("Invalid argument for stringToBytes");const t=h.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=h.charCodeAt(s)&255;return e}function MS(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function DS(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function LS(){try{return new Function(""),!0}catch{return!1}}class we{static get isLittleEndian(){return St(this,"isLittleEndian",DS())}static get isEvalSupported(){return St(this,"isEvalSupported",LS())}static get isOffscreenCanvasSupported(){return St(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return St(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return St(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return St(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const fh=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class it{static makeHexColor(t,e,s){return`#${fh[t]}${fh[e]}${fh[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,s=0){const a=t[s],o=t[s+1];t[s]=a*e[0]+o*e[2]+e[4],t[s+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const a=e[0],o=e[1],l=e[2],u=e[3],d=e[4],p=e[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*a+b*l+d,t[s+g+1]=y*o+b*u+p}}static applyInverseTransform(t,e){const s=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-s*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,s){const a=e[0],o=e[1],l=e[2],u=e[3],d=e[4],p=e[5],g=t[0],y=t[1],b=t[2],v=t[3];let w=a*g+d,S=w,_=a*b+d,E=_,T=u*y+p,C=T,N=u*v+p,M=N;if(o!==0||l!==0){const B=o*g,U=o*b,V=l*y,q=l*v;w+=V,E+=V,_+=q,S+=q,T+=B,M+=B,N+=U,C+=U}s[0]=Math.min(s[0],w,_,S,E),s[1]=Math.min(s[1],T,N,C,M),s[2]=Math.max(s[2],w,_,S,E),s[3]=Math.max(s[3],T,N,C,M)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],a=t[1],o=t[2],l=t[3],u=s**2+a**2,d=s*o+a*l,p=o**2+l**2,g=(u+p)/2,y=Math.sqrt(g**2-(u*p-d**2));e[0]=Math.sqrt(g+y||1),e[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[s,o,a,l]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],e,a)}static#t(t,e,s,a,o,l,u,d,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,v=b*p,w=y*(y*(y*t+3*p*e)+3*b*s)+v*a,S=y*(y*(y*o+3*p*l)+3*b*u)+v*d;g[0]=Math.min(g[0],w),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],w),g[3]=Math.max(g[3],S)}static#e(t,e,s,a,o,l,u,d,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,e,s,a,o,l,u,d,-y/g,b);return}const v=g**2-4*y*p;if(v<0)return;const w=Math.sqrt(v),S=2*p;this.#t(t,e,s,a,o,l,u,d,(-g+w)/S,b),this.#t(t,e,s,a,o,l,u,d,(-g-w)/S,b)}static bezierBoundingBox(t,e,s,a,o,l,u,d,p){p[0]=Math.min(p[0],t,u),p[1]=Math.min(p[1],e,d),p[2]=Math.max(p[2],t,u),p[3]=Math.max(p[3],e,d),this.#e(t,s,o,u,e,a,l,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),p),this.#e(t,s,o,u,e,a,l,d,3*(-e+3*(a-l)+d),6*(e-2*a+l),3*(a-e),p)}}function OS(h){return decodeURIComponent(escape(h))}let ph=null,Sm=null;function Ey(h){return ph||(ph=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Sm=new Map([["","t"]])),h.replaceAll(ph,(t,e,s)=>e?e.normalize("NFKC"):Sm.get(s))}function Yh(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),wy(h)}const $h="pdfjs_internal_id_";function NS(h,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,a,...o]=e;if(!h(s)&&!Number.isInteger(s)||!t(a))return!1;const l=o.length;let u=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Oe(h,t,e){return Math.min(Math.max(h,t),e)}function _y(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(wy(h))}function kS(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):zr(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(e=>{e(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,e)=>t+e,0)});class Or{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Or.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Wh{static setupStorage(t,e,s,a,o){const l=a.getValue(e,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:a,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,p]of Object.entries(l))if(p!=null)switch(d){case"class":p.length&&t.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,p)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);l.append(y),u&&Or.shouldBuildText(a.name)&&p.push(y)}return{textDivs:p}}const g=[[a,-1,l]];for(;g.length>0;){const[y,b,v]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const w=y.children[++g.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);p.push(E),v.append(E);continue}const _=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(v.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:e,intent:o,linkService:s}),w.children?.length>0)g.push([w,-1,_]);else if(w.value){const E=document.createTextNode(w.value);u&&Or.shouldBuildText(S)&&p.push(E),_.append(E)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ei="http://www.w3.org/2000/svg";class ls{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ba(h,t="text"){if(_r(h,document.baseURI)){const e=await fetch(h);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class Hr{constructor({viewBox:t,userUnit:e,scale:s,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=l,s*=e;const d=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,v;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,b=0,v=1;break;case 90:g=0,y=1,b=1,v=0;break;case 270:g=0,y=-1,b=-1,v=0;break;case 0:g=1,y=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let w,S,_,E;g===0?(w=Math.abs(p-t[1])*s+o,S=Math.abs(d-t[0])*s+l,_=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(d-t[0])*s+o,S=Math.abs(p-t[1])*s+l,_=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,v*s,w-g*s*d-b*s*p,S-y*s*d-v*s*p],this.width=_,this.height=E}get rawDims(){const t=this.viewBox;return St(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Hr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const s=[t,e];return it.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];it.applyTransform(e,this.transform);const s=[t[2],t[3]];return it.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return it.applyInverseTransform(s,this.transform),s}}class kl extends ds{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ir(h){const t=h.length;let e=0;for(;e<t&&h[e].trim()==="";)e++;return h.substring(e,e+5).toLowerCase()==="data:"}function Pl(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function xy(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function Ty(h,t="document.pdf"){if(typeof h!="string")return t;if(Ir(h))return vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return a(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const p of u)if(o.test(p))return a(p);const d=Array.from(s.searchParams.keys()).reverse();for(const p of d)if(o.test(p))return a(p)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class wm{started=Object.create(null);times=[];time(t){t in this.started&&vt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||vt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(e)} ${o-a}ms
`);return t.join("")}}function _r(h,t){const e=t?URL.parse(h,t):URL.parse(h);return e?.protocol==="http:"||e?.protocol==="https:"}function rn(h){h.preventDefault()}function Jt(h){h.preventDefault(),h.stopPropagation()}function PS(h){console.log("Deprecated API usage: "+h)}class Tl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const p=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(l+=g,u+=y):p==="+"&&(l-=g,u-=y),new Date(Date.UTC(s,a,o,l,u,d))}}function Cy(h,{scale:t=1,rotation:e=0}){const{width:s,height:a}=h.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new Hr({viewBox:o,userUnit:1,scale:t,rotation:e})}function va(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(vt(`Not a valid color format: "${h}"`),[0,0,0])}function BS(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of h.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;h.set(e,va(s))}t.remove()}function Zt(h){const{a:t,b:e,c:s,d:a,e:o,f:l}=h.getTransform();return[t,e,s,a,o,l]}function Nn(h){const{a:t,b:e,c:s,d:a,e:o,f:l}=h.getTransform().invertSelf();return[t,e,s,a,o,l]}function Pi(h,t,e=!1,s=!0){if(t instanceof Hr){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=h,u=we.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,p=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class En{constructor(){const{pixelRatio:t}=En;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,a,o=-1){let l=1/0,u=1/0,d=1/0;s=En.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*e))),a!==-1&&(u=a/t,d=a/e);const p=Math.min(l,u,d);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const Cl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class FS{static get isDarkMode(){return St(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Ry{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),St(this,"commentForegroundColor",va(s))}}function My(h,t,e,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return h=Math.round(h*s+a),t=Math.round(t*s+a),e=Math.round(e*s+a),[h,t,e]}function Em(h,t){const e=h[0]/255,s=h[1]/255,a=h[2]/255,o=Math.max(e,s,a),l=Math.min(e,s,a),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-s)/d+4)*60;break}}t[2]=u}function _h(h,t){const e=h[0],s=h[1],a=h[2],o=(1-Math.abs(2*a-1))*s,l=o*(1-Math.abs(e/60%2-1)),u=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function _m(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function xm(h,t,e){_h(h,e),e.map(_m);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];_h(t,e),e.map(_m);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const Tm=new Map;function Dy(h,t){const e=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Tm.get(e);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);Em(h,l);const u=a.subarray(6,9);Em(t,u);const d=u[2]<.5,p=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),xm(l,u,o)<p){let g,y;d?(g=l[2],y=1):(g=0,y=l[2]);const b=.005;for(;y-g>b;){const v=l[2]=(g+y)/2;d===xm(l,u,o)<p?g=v:y=v}l[2]=d?y:g}return _h(l,o),s=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Tm.set(e,s),s}function Kh({html:h,dir:t,className:e},s){const a=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const p=l[u];o.append(document.createTextNode(p)),u<d-1&&o.append(document.createElement("br"))}a.append(o)}else Wh.render({xfaHtml:h,div:a,intent:"richText"});a.firstChild.classList.add("richText",e),s.append(a)}class Rr{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,Rr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",rn,{signal:e}),t.addEventListener("pointerdown",Rr.#l,{signal:e}));const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,Jt(t)}#h(t){this.#i._focusEventsAllowed=!0,Jt(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",rn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Rr.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#m),this.#r=t}addComment(t,e=null){if(this.#s)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#a=this.#m;e?(this.#n.insertBefore(s,e),this.#n.insertBefore(a,e)):this.#n.append(s,a),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#m)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,s){const a=this.#n.querySelector(s);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class US{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",rn,{signal:e});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let s=0,a=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(e?o.width:0);if(l>s){a=u,s=l;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,s]}show(t,e,s){const[a,o]=this.#r(e,s),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",rn,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function Ly(h,t,e){for(const s of e)t.addEventListener(s,h[s].bind(h))}class zS{#t=0;get id(){return`${Dr}${this.#t++}`}}class Qh{#t=Yh();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return St(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let s=this.#i.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(s.url=e,a=await ba(e,"blob")):e instanceof File?a=s.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=Qh._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((p,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,p()},l.onload=async()=>{const y=s.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=g});l.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){vt(a),s=null}return this.#i.set(t,s),s&&this.#i.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:a,type:o}=t;return this.#n(`${e}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const s=await e;return this.#n(t,s)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let s=this.#i.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,s),this.#i.set(s.id,s),s}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=a.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class HS{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:s,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const p=this.#n+1;p===this.#i?this.#t.splice(0,1):(this.#n=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class jr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=we.platform;for(const[s,a,o={}]of t)for(const l of s){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,e)||(a.bind(t,...l,e)(),o||Jt(e))}}class Zh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return BS(t),St(this,"_colors",t)}convert(t){const e=va(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,a]of this._colors)if(a.every((o,l)=>o===e[l]))return Zh._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?it.makeHexColor(...e):t}}class oi{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new HS;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#x=null;#E=null;#A=null;#C=null;#w=!1;#_=null;#D=new zS;#R=!1;#M=!1;#F=!1;#O=null;#k=null;#U=null;#P=null;#V=null;#T=bt.NONE;#S=new Set;#N=null;#z=null;#I=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#B=null;#q=null;#Z=null;#J=null;#H=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=oi.prototype,e=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return St(this,"_keyboardManager",new jr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,s,a,o,l,u,d,p,g,y,b,v,w,S,_){const E=this._signal=this.#t.signal;this.#q=t,this.#Z=e,this.#J=s,this.#s=a,this.#l=o,this.#z=l,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:E}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#x=d.filterFactory,this.#I=p,this.#C=g||null,this.#y=y,this.#v=b,this.#b=v,this.#V=w||null,this.viewParameters={realScale:ls.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,o?.setSidebarUiManager(this)}destroy(){this.#H?.resolve(),this.#H=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#g.clear(),this.#P?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#_?.hide(),this.#_=null,this.#U?.destroy(),this.#U=null,this.#i=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return St(this,"hcmFilter",this.#I?this.#x.addHCMFilter(this.#I.foreground,this.#I.background):"none")}get direction(){return St(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return St(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return St(this,"highlightColors",null);const e=new Map,s=!!this.#I;for(const[a,o]of t){const l=a.endsWith("_HCM");if(s&&l){e.set(a.replace("_HCM",""),o);continue}!s&&!l&&e.set(a,o)}return St(this,"highlightColors",e)}get highlightColorNames(){return St(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#U=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,s,a){this.#l?.showDialog(this,t,e,s,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,s=void 0){this.#l?.toggleCommentPopup(t,e,s)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#z?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#z}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const s of this.#r.values()){const{x:a,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ls.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",e=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),v=this.#T===bt.NONE,w=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u,text:d});v&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(v){this.switchToMode(bt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#_||=new US(this),this.#_.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${Dr}${t}`,s=this.#a.getRawValue(e);return s&&this.#a.remove(e),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#_?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#N)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#N&&(this.#_?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#N=e,this.#L({hasSelectedText:!0}),!(this.#T!==bt.HIGHLIGHT&&this.#T!==bt.NONE)&&(this.#T===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===bt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#M){const l=new AbortController,u=this.combinedSignal(l),d=p=>{p.type==="pointerup"&&p.button!==0||(l.abort(),o?.toggleDrawing(!0),p.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#T===bt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#k=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,e]=this.#k;this.#k=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#O?.abort(),this.#O=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#S){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){vt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const p=await a.deserialize(d);if(!p)return;o.push(p)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){vt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==bt.NONE&&!this.isEditorHandlingKeyboard&&oi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,a])=>this.#$[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Ct.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#L({isEditing:this.#T!==bt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,a=!1,o=!1){if(this.#T!==t&&!(this.#H&&(await this.#H.promise,!this.#H))){if(this.#H=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===bt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===bt.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#H.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===bt.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===bt.POPUP){this.#i||=await this.#X.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,u=[];for(const d of this.#n.values()){const{annotationElementId:p,hasComment:g,deleted:y}=d;p&&l.add(p),g&&!y&&u.push(d.getData())}for(const d of this.#i){const{id:p,popupRef:g,contentsObj:y}=d;g&&y?.str&&!l.has(p)&&!this.#m.has(p)&&u.push(d)}this.#l?.showSidebar(u)}if(!e){s&&this.addNewEditorFromKeyboard(),this.#H.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#H.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Ct.CREATE:this.currentLayer.addNewEditor(e);return;case Ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const s of this.#S)s.updateParams(t,e);else for(const s of this.#u)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#Y?.get(Ct.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Ct.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#F!==t){this.#F=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#P?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],s=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#st(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==bt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;const[a,o]=this.#j,l=[...this.#S],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},u]of t)u.newX=a,u.newY=o,u.newPageIndex=l,e||=a!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const s=(a,o,l,u)=>{if(this.#n.has(a.id)){const d=this.#r.get(u);d?a._setParentAndPosition(d,o,l):(a.pageIndex=u,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:u}]of t)s(a,o,l,u)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(a,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const s of this.#p.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==bt.NONE}get imageManager(){return St(this,"imageManager",new Qh)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,g=e.rangeCount;p<g;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(p,g,y,b)=>({x:(g-a)/l,y:1-(p+y-s)/o,width:b/l,height:y/o});break;case"180":u=(p,g,y,b)=>({x:1-(p+y-s)/o,y:1-(g+b-a)/l,width:y/o,height:b/l});break;case"270":u=(p,g,y,b)=>({x:1-(g+b-a)/l,y:(p-s)/o,width:b/l,height:y/o});break;default:u=(p,g,y,b)=>({x:(p-s)/o,y:(g-a)/l,width:y/o,height:b/l});break}const d=[];for(let p=0,g=e.rangeCount;p<g;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:v,width:w,height:S}of y.getClientRects())w===0||S===0||d.push(u(b,v,w,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const s=this.#a.getRawValue(e);s&&(this.#T===bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const a=this.#P?.get(t);a&&(a.setCanvas(e,s),this.#P.delete(t))}addMissingCanvas(t,e){(this.#P||=new Map).set(t,e)}}class Bn{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Bn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Bn._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Bn.#f.missing),e.setAttribute("data-l10n-id",Bn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",rn,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Bn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Bn.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Bn.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class hl{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-a)/l,(e+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",rn,{signal:s}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,Jt(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,Jt(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),t}edit(t){const e=this.commentPopupPositionInLayer;let s,a;if(e)[s,a]=e;else{[s,a]=this.#n.commentButtonPosition;const{width:g,height:y,x:b,y:v}=this.#n;s=b+s*g,a=v+a*y}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:d,height:p}=o;this.#n._uiManager.editComment(this.#n,l+s*d,u+a*p,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#s=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class Gr{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#i=s,this.#n=e,this.#r=a,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/En.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Jt(p),d(p))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const u=this.#p.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",Jt,l),o.addEventListener("pointermove",Jt,l),o.addEventListener("pointercancel",Jt,l),o.addEventListener("pointerup",Jt,l),this.#r?.()}if(Jt(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;Jt(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:u}=s,d=this.#l,{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=d,v=y-p,w=b-g,S=l-a,_=u-o,E=Math.hypot(S,_)||1,T=Math.hypot(v,w)||1;if(!this.#e&&Math.abs(T-E)<=Gr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(a+l)/2,(o+u)/2];this.#s?.(C,T,E)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(Jt(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ut{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#v=!1;#b=null;#x=0;#E=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#_=ut._zIndex++;static _borderLineWidth=-1;static _colorManager=new Zh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ut.prototype._resizeWithKeyboard,e=oi.TRANSLATE_SMALL,s=oi.TRANSLATE_BIG;return St(this,"_resizerKeyboardManager",new jr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ut.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return St(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new IS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ut._l10n??=t,ut._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ut._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ut._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Vt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,a){const[o,l]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,a]=this.parentDimensions;this.setAt(t*s,e*a,this.width*s,this.height*a),this._onTranslated()}#D([t,e],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,p]=this.getBaseTranslation();l+=d,u+=p;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=ut,a=s/t,o=s/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,a]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=s,d*=a,o*=s,l*=a,this._mustFixPosition)switch(t){case 0:o=Oe(o,0,s-u),l=Oe(l,0,a-d);break;case 90:o=Oe(o,0,s-d),l=Oe(l,u,a);break;case 180:o=Oe(o,u,s),l=Oe(l,d,a);break;case 270:o=Oe(o,d,s),l=Oe(l,0,a-u);break}this.x=o/=s,this.y=l/=a;const[p,g]=this.getBaseTranslation();o+=p,l+=g,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ut.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ut.#R(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(){const{div:{style:t},width:e,height:s}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#O.bind(this,s),{signal:e}),a.addEventListener("contextmenu",rn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#O(t,e){e.preventDefault();const{isMac:s}=we.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#P.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Jt,{passive:!1,signal:l}),window.addEventListener("contextmenu",rn,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#U()};window.addEventListener("pointerup",p,{signal:l}),window.addEventListener("blur",p,{signal:l})}#k(t,e,s,a){this.width=s,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#U(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===e&&u===s&&d===a||this.addCommands({cmd:this.#k.bind(this,o,l,u,d),undo:this.#k.bind(this,t,e,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#P(t,e){const[s,a]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,p=ut.MIN_SIZE/s,g=ut.MIN_SIZE/a,y=this.#M(this.rotation),b=(k,G)=>[y[0]*k+y[2]*G,y[1]*k+y[3]*G],v=this.#M(360-this.rotation),w=(k,G)=>[v[0]*k+v[2]*G,v[1]*k+v[3]*G];let S,_,E=!1,T=!1;switch(t){case"topLeft":E=!0,S=(k,G)=>[0,0],_=(k,G)=>[k,G];break;case"topMiddle":S=(k,G)=>[k/2,0],_=(k,G)=>[k/2,G];break;case"topRight":E=!0,S=(k,G)=>[k,0],_=(k,G)=>[0,G];break;case"middleRight":T=!0,S=(k,G)=>[k,G/2],_=(k,G)=>[0,G/2];break;case"bottomRight":E=!0,S=(k,G)=>[k,G],_=(k,G)=>[0,0];break;case"bottomMiddle":S=(k,G)=>[k/2,G],_=(k,G)=>[k/2,0];break;case"bottomLeft":E=!0,S=(k,G)=>[0,G],_=(k,G)=>[k,0];break;case"middleLeft":T=!0,S=(k,G)=>[0,G/2],_=(k,G)=>[k,G/2];break}const C=S(u,d),N=_(u,d);let M=b(...N);const B=ut._round(o+M[0]),U=ut._round(l+M[1]);let V=1,q=1,Q,Z;if(e.fromKeyboard)({deltaX:Q,deltaY:Z}=e);else{const{screenX:k,screenY:G}=e,[tt,dt]=this.#l;[Q,Z]=this.screenToPageTranslation(k-tt,G-dt),this.#l[0]=k,this.#l[1]=G}if([Q,Z]=w(Q/s,Z/a),E){const k=Math.hypot(u,d);V=q=Math.max(Math.min(Math.hypot(N[0]-C[0]-Q,N[1]-C[1]-Z)/k,1/u,1/d),p/u,g/d)}else T?V=Oe(Math.abs(N[0]-C[0]-Q),p,1)/u:q=Oe(Math.abs(N[1]-C[1]-Z),g,1)/d;const lt=ut._round(u*V),ht=ut._round(d*q);M=b(..._(lt,ht));const rt=B-M[0],ct=U-M[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=lt,this.height=ht,this.x=rt,this.y=ct,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Rr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Bn.initialize(ut._l10n),this.#i=new Bn(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new hl(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:s,deleted:a}}=this.#n;return{text:e,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new hl(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:s}){if(!e||(this.#n||=new hl(this),this.#n.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new hl(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=a-100,p=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,p,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#I();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Ly(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Gr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,s){let o=.7*(s/e)+1-.7;if(o===1)return;const l=this.#M(this.rotation),u=(B,U)=>[l[0]*B+l[2]*U,l[1]*B+l[3]*U],[d,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,v=this.height,w=ut.MIN_SIZE/d,S=ut.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/v),w/b,S/v);const _=ut._round(b*o),E=ut._round(v*o);if(_===b&&E===v)return;this.#u||=[g,y,b,v];const T=u(b/2,v/2),C=ut._round(g+T[0]),N=ut._round(y+T[1]),M=u(_/2,E/2);this.x=C-M[0],this.y=N-M[1],this.width=_,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#U()}pointerdown(t){const{isMac:e}=we.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#z(t);return}this.#N(t)}#N(t){const{isMac:e}=we.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},u=p=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#N(p),s&&this._onStopDragging()};e&&(this.#x=t.clientX,this.#E=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==this.#a){Jt(p);return}const[v,w]=this.screenToPageTranslation(g-this.#x,y-this.#E);this.#x=g,this.#E=y,this._uiManager.dragSelectedEditors(v,w)},l),window.addEventListener("touchmove",Jt,l),window.addEventListener("pointerdown",p=>{p.pointerType===this.#o&&(this.#C||p.isPrimary)&&u(p),Jt(p)},l));const d=p=>{if(!this.#a||this.#a===p.pointerId){u(p);return}Jt(p)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,p=t/a,g=e/a,y=this.x*o,b=this.y*l,v=this.width*o,w=this.height*l;switch(s){case 0:return[y+p+u,l-b-g-w+d,y+p+v+u,l-b-g+d];case 90:return[y+g+u,l-b+p+d,y+g+w+u,l-b+p+v+d];case 180:return[y-p-v+u,l-b+g+d,y-p+u,l-b+g+w+d];case 270:return[y-g-w+u,l-b-p-v+d,y-g+u,l-b-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,a,o,l]=t,u=o-s,d=l-a;switch(this.rotation){case 0:return[s,e-l,u,d];case 90:return[s,e-a,d,u];case 180:return[o,e-a,u,d];case 270:return[o,e-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:s,opacity:a,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:p,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:p,modificationDate:s||g,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&s>0}#I(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#I()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,s){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[u,d,p,g]=a.getRectInCurrentCoords(t.rect,l);return a.x=u/o,a.y=d/l,a.width=p/o,a.height=g/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#B(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[s,a,o,l]=this.getPDFRect();return[ut._round(s+(o-s)*t),ut._round(a+(l-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const p of this.#e){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:d}),p.addEventListener("blur",u,{signal:d}),p.addEventListener("focus",this.#$.bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",ut._l10nResizer[g])}}const s=this.#e[0];let a=0;for(const l of e){if(l===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of e){const p=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ut._l10nResizer[p])}}this.#j(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ut._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#$(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#P(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#v=!1,this.#j(-1),this.#U()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:s}=t;let a=this.#A.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(s),this.#A.size===0&&(this.#A=null)},ut._telemetryTimeout),this.#A.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class IS extends ut{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Cm=3285377520,mn=4294901760,kn=65535;class Oy{constructor(t){this.h1=t?t&4294967295:Cm,this.h2=t?t&4294967295:Cm}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let S=0,_=t.length;S<_;S++){const E=t.charCodeAt(S);E<=255?e[s++]=E:(e[s++]=E>>>8,e[s++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,l=new Uint32Array(e.buffer,0,a);let u=0,d=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,v=y&kn,w=b&kn;for(let S=0;S<a;S++)S&1?(u=l[S],u=u*y&mn|u*v&kn,u=u<<15|u>>>17,u=u*b&mn|u*w&kn,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(d=l[S],d=d*y&mn|d*v&kn,d=d<<15|d>>>17,d=d*b&mn|d*w&kn,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&mn|u*v&kn,u=u<<15|u>>>17,u=u*b&mn|u*w&kn,a&1?p^=u:g^=u}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&mn|t*36045&kn,e=e*4283543511&mn|((e<<16|t>>>16)*2950163797&mn)>>>16,t^=e>>>1,t=t*444984403&mn|t*60499&kn,e=e*3301882366&mn|((e<<16|t>>>16)*3120437893&mn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const xh=Object.freeze({map:null,hash:"",transfer:void 0});class Jh{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#n.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof ut&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof ut)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#n.get(t);let a=!1;if(s!==void 0)for(const[o,l]of Object.entries(e))s[o]!==l&&(a=!0,s[o]=l);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof ut&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ny(this)}get serializable(){if(this.#n.size===0)return xh;const t=new Map,e=new Oy,s=[],a=Object.create(null);let o=!1;for(const[l,u]of this.#n){const d=u instanceof ut?u.serialize(!1,a):u;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:xh}get editorStats(){let t=null;const e=new Map;let s=0,a=0;for(const o of this.#n.values()){if(!(o instanceof ut)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[p,g]of Object.entries(l)){if(p==="type")continue;let y=d.get(p);y||(y=new Map,d.set(p,y));const b=y.get(g)??0;y.set(g,b+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const s=this.#i?.get(t);return s?(s.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Ny extends Jh{#t;constructor(t){super();const{map:e,hash:s,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Vt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return St(this,"modifiedIds",{ids:new Set,hash:""})}}class jS{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Dt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,u=new FontFace(a,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),s?.(t)}catch{vt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Vt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw vt(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return St(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return St(this,"isSyncFontLoadingSupported",Be||we.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Dt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:e,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return St(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(N,M){return N.charCodeAt(M)<<24|N.charCodeAt(M+1)<<16|N.charCodeAt(M+2)<<8|N.charCodeAt(M+3)&255}function a(N,M,B,U){const V=N.substring(0,M),q=N.substring(M+B);return V+U+q}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let p=0;function g(N,M){if(++p>30){vt("Load test font never loaded."),M();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(g.bind(null,N,M))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const w=16,S=1482184792;let _=s(b,w);for(o=0,l=y.length-3;o<l;o+=4)_=_-S+s(y,o)|0;o<y.length&&(_=_-S+s(y+"XXX",o)|0),b=a(b,w,4,MS(_));const E=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(T);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const N of[t.loadedName,y]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=N,C.append(M)}this._document.body.append(C),g(y,()=>{C.remove(),e.complete()})}}class GS{#t;constructor(t,e=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${_y(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let a;try{a=t.get(s)}catch(l){vt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function VS(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(Be)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function qS(h){if(Be&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return zr(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function dl(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const Th=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,XS=h=>typeof h=="object"&&typeof h?.name=="string",ky=NS.bind(null,Th,XS);class YS{#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,e,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){vt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const fl={DATA:1,ERROR:2},fe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Rm(){}function qe(h){if(h instanceof ri||h instanceof xl||h instanceof Am||h instanceof Lr||h instanceof dh)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Vt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new ri(h.message);case"InvalidPDFException":return new xl(h.message);case"PasswordException":return new Am(h.message,h.code);case"ResponseException":return new Lr(h.message,h.status,h.missing);case"UnknownErrorException":return new dh(h.message,h.details)}return new dh(h.message,h.toString())}class xr{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===fl.DATA)a.resolve(t.data);else if(t.callback===fl.ERROR)a.reject(qe(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:s,targetName:a,callback:fl.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:a,callback:fl.ERROR,callbackId:t.callbackId,reason:qe(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,s,a){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:p.desiredSize},a),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:u,stream:fe.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Dt(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:fe.CANCEL,streamId:o,reason:qe(p)}),g.promise}},s)}#i(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:fe.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:fe.CLOSE,streamId:e}),delete l.streamSinks[e])},error(p){Dt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:fe.ERROR,streamId:e,reason:qe(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:fe.START_COMPLETE,streamId:e,reason:qe(p)})})}#n(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case fe.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(qe(t.reason));break;case fe.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(qe(t.reason));break;case fe.PULL:if(!u){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Rm).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:e,reason:qe(p)})});break;case fe.ENQUEUE:if(Dt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case fe.CLOSE:if(Dt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case fe.ERROR:Dt(l,"error should have stream controller"),l.controller.error(qe(t.reason)),this.#r(l,e);break;case fe.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(qe(t.reason)),this.#r(l,e);break;case fe.CANCEL:if(!u)break;const d=qe(t.reason);Promise.try(u.onCancel||Rm,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:fe.CANCEL_COMPLETE,streamId:e,reason:qe(p)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Py{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Vt("Abstract method `_createCanvas` called.")}}class $S extends Py{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class By{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Vt("Abstract method `_fetch` called.")}}class Mm extends By{async _fetch(t){const e=await ba(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):zr(e)}}class Fy{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,a,o){return"none"}destroy(t=!1){}}class WS extends Fy{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#r.createElementNS(ei,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#i=this.#r.createElementNS(ei,"defs"),t.append(s),s.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=d[y]/255;const g=p.join(",");return[g,g,g]}const[e,s,a]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=s[d]/255,u[d]=a[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Ir(e)?vt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Xh(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[s,a,o]=this.#d(t),l=t.length===1?s:`${s}${a}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const p=this.#p(u);return this.#g(s,a,o,p),d}addHCMFilter(t,e){const s=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const l=this.#v(t);t=it.makeHexColor(...l);const u=this.#v(e);if(e=it.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let v=0;v<=255;v++){const w=v/255;d[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const p=d.join(","),g=`g_${this.#n}_hcm_filter`,y=o.filter=this.#p(g);this.#g(p,p,p,y),this.#m(y);const b=(v,w)=>{const S=l[v]/255,_=u[v]/255,E=new Array(w+1);for(let T=0;T<=w;T++)E[T]=S+T/w*(_-S);return E.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[s]=this.#d([t]),a=`alpha_${s}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#p(o);return this.#y(s,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#p(o);return this.#f(u),t&&this.#y(s,u),l}addHighlightHCMFilter(t,e,s,a,o){const l=`${e}-${s}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!e||!s))return u.url;const[d,p]=[e,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,v]=[a,o].map(this.#v.bind(this));y<g&&([g,y,b,v]=[y,g,v,b]),this.#l.style.color="";const w=(E,T,C)=>{const N=new Array(256),M=(y-g)/C,B=E/255,U=(T-E)/(255*C);let V=0;for(let q=0;q<=C;q++){const Q=Math.round(g+q*M),Z=B+q*U;for(let lt=V;lt<=Q;lt++)N[lt]=Z;V=Q+1}for(let q=V;q<256;q++)N[q]=N[V-1];return N.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,_=u.filter=this.#p(S);return this.#m(_),this.#g(w(b[0],v[0],5),w(b[1],v[1],5),w(b[2],v[2],5),_),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(ei,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(ei,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(ei,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,s){const a=this.#r.createElementNS(ei,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#g(t,e,s,a){const o=this.#r.createElementNS(ei,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",s)}#y(t,e){const s=this.#r.createElementNS(ei,"feComponentTransfer");e.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,va(getComputedStyle(this.#l).getPropertyValue("color"))}}class Uy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Vt("Abstract method `_fetch` called.")}}class Dm extends Uy{async _fetch(t){const e=await ba(t,"arraybuffer");return new Uint8Array(e)}}class zy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Vt("Abstract method `_fetch` called.")}}class Lm extends zy{async _fetch(t){const e=await ba(t,"arraybuffer");return new Uint8Array(e)}}Be&&vt("Please use the `legacy` build in Node.js environments.");async function td(h){const e=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(e)}class KS extends Fy{}class QS extends Py{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class ZS extends By{async _fetch(t){return td(t)}}class JS extends Uy{async _fetch(t){return td(t)}}class tw extends zy{async _fetch(t){return td(t)}}const ta="__forcedDependency",{floor:Om,ceil:Nm}=Math;function pl(h,t,e,s,a,o){h[t*4+0]=Math.min(h[t*4+0],e),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],a),h[t*4+3]=Math.max(h[t*4+3],o)}const Ch=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class ew{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Ch}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const gl=(h,t)=>{if(!h)return;let e=h.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},h.set(t,e)),e};class nw{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[ta]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,e,s=!1){this.#f=t.width,this.#m=t.height,this.#y(e),s&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),e&&e.length>0?(this.#u.set(e),this.#u.fill(Ch,e.length)):this.#u.fill(Ch)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[ta]:{__proto__:this.#e[ta]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(gl(this.#g,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(gl(this.#g,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(gl(this.#g,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#s.push(it.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,s){this.#t[t]=this.#i.get(e)??s}recordFutureForcedDependency(t,e){return this.recordIncrementalData(ta,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(ta,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,s,a,o,l){const u=it.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([s,o,a,l],u,d);const p=it.intersect(this.#a,d);return p?(this.#a[0]=p[0],this.#a[1]=p[1],this.#a[2]=p[2],this.#a[3]=p[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,s,a,o,l){const u=this.#a;if(u[0]===1/0)return this;const d=it.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(u[0]===-1/0)return it.axialAlignedBoundingBox([s,o,a,l],d,this.#o),this;const p=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([s,o,a,l],d,p),this.#o[0]=Math.min(this.#o[0],Math.max(p[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(p[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(p[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(p[3],u[3])),this}recordCharacterBBox(t,e,s,a=1,o=0,l=0,u){const d=s.bbox;let p,g;if(d&&(p=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),p!==!1&&(g=[0,0,0,0],it.axialAlignedBoundingBox(d,s.fontMatrix,g),(a!==1||o!==0||l!==0)&&it.scaleMinMax([a,0,0,-a,o,l],g),p)))return this.recordBBox(t,e,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&g&&p===void 0&&(p=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=l-y.actualBoundingBoxAscent&&g[3]>=l+y.actualBoundingBoxDescent,this.#h.set(s,p),p)?this.recordBBox(t,e,g[0],g[2],g[1],g[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const s=this.#l,a=this.#t,o=this.#e;for(const l of e)l in this.#t?s.add(a[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[ta]),this.#g){const s=gl(this.#g,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Om(this.#o[0]*256/this.#f),a=Om(this.#o[1]*256/this.#m),o=Nm(this.#o[2]*256/this.#f),l=Nm(this.#o[3]*256/this.#m);pl(this.#p,t,s,a,o,l);for(const u of this.#l)u!==t&&pl(this.#p,u,s,a,o,l);for(const u of this.#n)u!==t&&pl(this.#p,u,s,a,o,l);for(const u of this.#r)u!==t&&pl(this.#p,u,s,a,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const s=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new ew(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Rl{#t;#e;#i;#n=0;#r=0;constructor(t,e,s){if(t instanceof Rl&&t.#i===!!s)return t;this.#t=t,this.#e=e,this.#i=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,s){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,s,a,o,l){return this.#i||this.#t.recordClipBox(this.#e,e,s,a,o,l),this}recordBBox(t,e,s,a,o,l){return this.#i||this.#t.recordBBox(this.#e,e,s,a,o,l),this}recordCharacterBBox(t,e,s,a,o,l,u){return this.#i||this.#t.recordCharacterBBox(this.#e,e,s,a,o,l,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const yn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Rh(h,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,s),h.clip(a)}class ed{isModifyingCurrentTransform(){return!1}getPattern(){Vt("Abstract method `getPattern` called.")}}class iw extends ed{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,a){let o;if(a===Re.STROKE||a===Re.FILL){const l=e.current.getClippedPathBoundingBox(a,Zt(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,p=e.cachedCanvases.getCanvas("pattern",u,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=it.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),Rh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else Rh(t,this._bbox),o=this._createGradient(t);return o}}function gh(h,t,e,s,a,o,l,u){const d=t.coords,p=t.colors,g=h.data,y=h.width*4;let b;d[e+1]>d[s+1]&&(b=e,e=s,s=b,b=o,o=l,l=b),d[s+1]>d[a+1]&&(b=s,s=a,a=b,b=l,l=u,u=b),d[e+1]>d[s+1]&&(b=e,e=s,s=b,b=o,o=l,l=b);const v=(d[e]+t.offsetX)*t.scaleX,w=(d[e+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,_=(d[s+1]+t.offsetY)*t.scaleY,E=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(w>=T)return;const C=p[o],N=p[o+1],M=p[o+2],B=p[l],U=p[l+1],V=p[l+2],q=p[u],Q=p[u+1],Z=p[u+2],lt=Math.round(w),ht=Math.round(T);let rt,ct,k,G,tt,dt,D,$;for(let J=lt;J<=ht;J++){if(J<_){const wt=J<w?0:(w-J)/(w-_);rt=v-(v-S)*wt,ct=C-(C-B)*wt,k=N-(N-U)*wt,G=M-(M-V)*wt}else{let wt;J>T?wt=1:_===T?wt=0:wt=(_-J)/(_-T),rt=S-(S-E)*wt,ct=B-(B-q)*wt,k=U-(U-Q)*wt,G=V-(V-Z)*wt}let K;J<w?K=0:J>T?K=1:K=(w-J)/(w-T),tt=v-(v-E)*K,dt=C-(C-q)*K,D=N-(N-Q)*K,$=M-(M-Z)*K;const et=Math.round(Math.min(rt,tt)),yt=Math.round(Math.max(rt,tt));let at=y*J+et*4;for(let wt=et;wt<=yt;wt++)K=(rt-wt)/(rt-tt),K<0?K=0:K>1&&(K=1),g[at++]=ct-(ct-dt)*K|0,g[at++]=k-(k-D)*K|0,g[at++]=G-(G-$)*K|0,g[at++]=255}}function sw(h,t,e){const s=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,p=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<p;y++,g++)gh(h,e,s[g],s[g+1],s[g+u],a[g],a[g+1],a[g+u]),gh(h,e,s[g+u+1],s[g+1],s[g+u],a[g+u+1],a[g+1],a[g+u])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)gh(h,e,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class aw extends ed{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),v=p/y,w=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/v,scaleY:1/w},_=y+4,E=b+4,T=s.getCanvas("mesh",_,E),C=T.context,N=C.createImageData(y,b);if(e){const B=N.data;for(let U=0,V=B.length;U<V;U+=4)B[U]=e[0],B[U+1]=e[1],B[U+2]=e[2],B[U+3]=255}for(const B of this._figures)sw(N,B,S);return C.putImageData(N,2,2),{canvas:T.canvas,offsetX:u-2*v,offsetY:d-2*w,scaleX:v,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,a){Rh(t,this._bbox);const o=new Float32Array(2);if(a===Re.SHADING)it.singularValueDecompose2dScale(Zt(t),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;it.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=d}else it.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===Re.SHADING?null:this._background,e.cachedCanvases);return a!==Re.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class rw extends ed{getPattern(){return"hotpink"}}function ow(h){switch(h[0]){case"RadialAxial":return new iw(h);case"Mesh":return new aw(h);case"Dummy":return new rw}throw new Error(`Unknown IR type: ${h[0]}`)}const km={COLORED:1,UNCOLORED:2};class nd{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:s,operatorList:a,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:p,ystep:g}=this;p=Math.abs(p),g=Math.abs(g),Nl("TilingType: "+l);const y=s[0],b=s[1],v=s[2],w=s[3],S=v-y,_=w-b,E=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,E);const[T,C]=E;it.singularValueDecompose2dScale(this.baseTransform,E);const N=T*E[0],M=C*E[1];let B=S,U=_,V=!1,q=!1;const Q=Math.ceil(p*N),Z=Math.ceil(g*M),lt=Math.ceil(S*N),ht=Math.ceil(_*M);Q>=lt?B=p:V=!0,Z>=ht?U=g:q=!0;const rt=this.getSizeAndScale(B,this.ctx.canvas.width,N),ct=this.getSizeAndScale(U,this.ctx.canvas.height,M),k=t.cachedCanvases.getCanvas("pattern",rt.size,ct.size),G=k.context,tt=d.createCanvasGraphics(G,e);if(tt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(tt,o,u),G.translate(-rt.scale*y,-ct.scale*b),tt.transform(0,rt.scale,0,0,ct.scale,0,0),G.save(),tt.dependencyTracker?.save(),this.clipBbox(tt,y,b,v,w),tt.baseTransform=Zt(tt.ctx),tt.executeOperatorList(a),tt.endDrawing(),tt.dependencyTracker?.restore(),G.restore(),V||q){const dt=k.canvas;V&&(B=p),q&&(U=g);const D=this.getSizeAndScale(B,this.ctx.canvas.width,N),$=this.getSizeAndScale(U,this.ctx.canvas.height,M),J=D.size,K=$.size,et=t.cachedCanvases.getCanvas("pattern-workaround",J,K),yt=et.context,at=V?Math.floor(S/p):0,wt=q?Math.floor(_/g):0;for(let Rt=0;Rt<=at;Rt++)for(let Xt=0;Xt<=wt;Xt++)yt.drawImage(dt,J*Rt,K*Xt,J,K,0,0,J,K);return{canvas:et.canvas,scaleX:D.scale,scaleY:$.scale,offsetX:y,offsetY:b}}return{canvas:k.canvas,scaleX:rt.scale,scaleY:ct.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,s){const a=Math.max(nd.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,e,s,a,o){const l=a-e,u=o-s;t.ctx.rect(e,s,l,u),it.axialAlignedBoundingBox([e,s,a,o],Zt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const a=t.ctx,o=t.current;switch(e){case km.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=u;break;case km.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new RS(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,a,o){let l=s;a!==Re.SHADING&&(l=it.transform(l,e.baseTransform),this.matrix&&(l=it.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const p=t.createPattern(u.canvas,"repeat");return p.setTransform(d),p}}function lw({src:h,srcPos:t=0,dest:e,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=we.isLittleEndian?4278190080:255,[d,p]=l?[o,u]:[u,o],g=s>>3,y=s&7,b=h.length;e=new Uint32Array(e.buffer);let v=0;for(let w=0;w<a;w++){for(const _=t+g;t<_;t++){const E=t<b?h[t]:255;e[v++]=E&128?p:d,e[v++]=E&64?p:d,e[v++]=E&32?p:d,e[v++]=E&16?p:d,e[v++]=E&8?p:d,e[v++]=E&4?p:d,e[v++]=E&2?p:d,e[v++]=E&1?p:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let _=0;_<y;_++)e[v++]=S&1<<7-_?p:d}return{srcPos:t,destPos:v}}const Pm=16,Bm=100,cw=15,Fm=10,Xe=16,mh=new DOMMatrix,sn=new Float32Array(2),ia=new Float32Array([1/0,1/0,-1/0,-1/0]);function uw(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},h.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},h.transform=function(e,s,a,o,l,u){t.transform(e,s,a,o,l,u),this.__originalTransform(e,s,a,o,l,u)},h.setTransform=function(e,s,a,o,l,u){t.setTransform(e,s,a,o,l,u),this.__originalSetTransform(e,s,a,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(e){t.rotate(e),this.__originalRotate(e)},h.clip=function(e){t.clip(e),this.__originalClip(e)},h.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},h.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},h.bezierCurveTo=function(e,s,a,o,l,u){t.bezierCurveTo(e,s,a,o,l,u),this.__originalBezierCurveTo(e,s,a,o,l,u)},h.rect=function(e,s,a,o){t.rect(e,s,a,o),this.__originalRect(e,s,a,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class hw{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,s)):(a=this.canvasFactory.create(e,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ml(h,t,e,s,a,o,l,u,d,p){const[g,y,b,v,w,S]=Zt(h);if(y===0&&b===0){const T=l*g+w,C=Math.round(T),N=u*v+S,M=Math.round(N),B=(l+d)*g+w,U=Math.abs(Math.round(B)-C)||1,V=(u+p)*v+S,q=Math.abs(Math.round(V)-M)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(v),C,M),h.drawImage(t,e,s,a,o,0,0,U,q),h.setTransform(g,y,b,v,w,S),[U,q]}if(g===0&&v===0){const T=u*b+w,C=Math.round(T),N=l*y+S,M=Math.round(N),B=(u+p)*b+w,U=Math.abs(Math.round(B)-C)||1,V=(l+d)*y+S,q=Math.abs(Math.round(V)-M)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,C,M),h.drawImage(t,e,s,a,o,0,0,q,U),h.setTransform(g,y,b,v,w,S),[q,U]}h.drawImage(t,e,s,a,o,l,u,d,p);const _=Math.hypot(g,y),E=Math.hypot(b,v);return[_*d,E*p]}class Um{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Eh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ce.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,s){s?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ia.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,e=null){const s=this.minMax.slice();if(t===Re.STROKE){e||Vt("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(e,sn);const a=sn[0]*this.lineWidth/2,o=sn[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ia,0)}getClippedPathBoundingBox(t=Re.FILL,e=null){return it.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function zm(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const e=t.height,s=t.width,a=e%Xe,o=(e-a)/Xe,l=a===0?o:o+1,u=h.createImageData(s,Xe);let d=0,p;const g=t.data,y=u.data;let b,v,w,S;if(t.kind===Cr.GRAYSCALE_1BPP){const _=g.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),T=E.length,C=s+7>>3,N=4294967295,M=we.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(w=b<o?Xe:a,p=0,v=0;v<w;v++){const B=_-d;let U=0;const V=B>C?s:B*8-7,q=V&-8;let Q=0,Z=0;for(;U<q;U+=8)Z=g[d++],E[p++]=Z&128?N:M,E[p++]=Z&64?N:M,E[p++]=Z&32?N:M,E[p++]=Z&16?N:M,E[p++]=Z&8?N:M,E[p++]=Z&4?N:M,E[p++]=Z&2?N:M,E[p++]=Z&1?N:M;for(;U<V;U++)Q===0&&(Z=g[d++],Q=128),E[p++]=Z&Q?N:M,Q>>=1}for(;p<T;)E[p++]=0;h.putImageData(u,0,b*Xe)}}else if(t.kind===Cr.RGBA_32BPP){for(v=0,S=s*Xe*4,b=0;b<o;b++)y.set(g.subarray(d,d+S)),d+=S,h.putImageData(u,0,v),v+=Xe;b<l&&(S=s*a*4,y.set(g.subarray(d,d+S)),h.putImageData(u,0,v))}else if(t.kind===Cr.RGB_24BPP)for(w=Xe,S=s*w,b=0;b<l;b++){for(b>=o&&(w=a,S=s*w),p=0,v=S;v--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;h.putImageData(u,0,b*Xe)}else throw new Error(`bad image kind: ${t.kind}`)}function Hm(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,a=e%Xe,o=(e-a)/Xe,l=a===0?o:o+1,u=h.createImageData(s,Xe);let d=0;const p=t.data,g=u.data;for(let y=0;y<l;y++){const b=y<o?Xe:a;({srcPos:d}=lw({src:p,srcPos:d,dest:g,width:s,height:b,nonBlackColor:0})),h.putImageData(u,0,y*Xe)}}function Ar(h,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function yl(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function Im(h,t){if(t)return!0;it.singularValueDecompose2dScale(h,sn);const e=Math.fround(En.pixelRatio*ls.PDF_TO_CSS_UNITS);return sn[0]<=e&&sn[1]<=e}const dw=["butt","round","square"],fw=["miter","round","bevel"],pw={},jm={};class aa{constructor(t,e,s,a,o,{optionalContentConfig:l,markedContentStack:u=null},d,p,g){this.ctx=t,this.current=new Um(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new hw(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,e,s=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):s}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Zt(this.compositeCtx))}this.ctx.save(),yl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Zt(this.ctx)}executeOperatorList(t,e,s,a,o){const l=t.argsArray,u=t.fnArray;let d=e||0;const p=l.length;if(p===d)return d;const g=p-d>Fm&&typeof s=="function",y=g?Date.now()+cw:0;let b=0;const v=this.commonObjs,w=this.objs;let S,_;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(S=u[d],_=l[d]??null,S!==ha.dependency)_===null?this[S](d):this[S](d,..._);else for(const E of _){this.dependencyTracker?.recordNamedData(E,d);const T=E.startsWith("g_")?v:w;if(!T.has(E))return T.get(E,s),d}if(d++,d===p)return d;if(g&&++b>Fm){if(Date.now()>y)return s(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=s,d=a,p="prescale1",g,y;for(;o>2&&u>1||l>2&&d>1;){let b=u,v=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/v),g=this.cachedCanvases.getCanvas(p,b,v),y=g.context,y.clearRect(0,0,b,v),y.drawImage(t,0,0,u,d,0,0,b,v),t=g.canvas,u=b,d=v,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){const s=this.ctx,{width:a,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,d=Zt(s);let p,g,y,b;if((e.bitmap||e.data)&&e.count>1){const Q=e.bitmap||e.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),l]),p=this._cachedBitmapsMap.get(Q),p||(p=new Map,this._cachedBitmapsMap.set(Q,p));const Z=p.get(g);if(Z&&!u){const lt=Math.round(Math.min(d[0],d[2])+d[4]),ht=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,yn.transformAndFill),{canvas:Z,offsetX:lt,offsetY:ht}}y=Z}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,o),Hm(b.context,e));let v=it.transform(d,[1/a,0,0,-1/o,0,0]);v=it.transform(v,[1,0,0,1,0,-o]);const w=ia.slice();it.axialAlignedBoundingBox([0,0,a,o],v,w);const[S,_,E,T]=w,C=Math.round(E-S)||1,N=Math.round(T-_)||1,M=this.cachedCanvases.getCanvas("fillCanvas",C,N),B=M.context,U=S,V=_;B.translate(-U,-V),B.transform(...v),y||(y=this._scaleImage(b.canvas,Nn(B)),y=y.img,p&&u&&p.set(g,y)),B.imageSmoothingEnabled=Im(Zt(B),e.interpolate),ml(B,y,0,0,y.width,y.height,0,0,a,o),B.globalCompositeOperation="source-in";const q=it.transform(Nn(B),[1,0,0,1,-U,-V]);return B.fillStyle=u?l.getPattern(s,this,q,Re.FILL,t):l,B.fillRect(0,0,a,o),p&&!u&&(this.cachedCanvases.delete("fillCanvas"),p.set(g,M.canvas)),this.dependencyTracker?.recordDependencies(t,yn.transformAndFill),{canvas:M.canvas,offsetX:Math.round(U),offsetY:Math.round(V)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=dw[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=fw[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=s)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[s,a]of e)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Ar(this.suspendedCtx,l),uw(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ar(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,a){const o=a[0],l=a[1],u=a[2]-o,d=a[3]-l;u===0||d===0||(this.genericComposeSMask(e.context,s,u,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,a,o,l,u,d,p,g,y){let b=t.canvas,v=d-g,w=p-y;if(l)if(v<0||w<0||v+s>b.width||w+a>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",s,a),E=_.context;E.drawImage(b,-v,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,s,a),E.globalCompositeOperation="source-over",b=_.canvas,v=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(v,w,s,a),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(v,w,s,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,p,s,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,v,w,s,a,d,p,s,a),e.restore()}save(t){this.inSMaskMode&&Ar(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ar(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,a,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,s,a,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===ha.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=s[0]=new Path2D;for(let u=0,d=o.length;u<d;)switch(o[u++]){case ul.moveTo:l.moveTo(o[u++],o[u++]);break;case ul.lineTo:l.lineTo(o[u++],o[u++]);break;case ul.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case ul.closePath:l.closePath();break;default:vt(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}it.axialAlignedBoundingBox(a,Zt(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Nn(a),Re.STROKE,t),l){const u=new Path2D;u.addPath(e,a.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,yn.stroke),s&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Re.STROKE,Zt(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,s=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const p=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Nn(a),Re.FILL,t),p){const g=new Path2D;g.addPath(e,a.getTransform().invertSelf().multiplySelf(p)),e=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,yn.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,yn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=pw}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=jm}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:p,path:g}of e)g&&a.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(p,-p));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||Eh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&vt("Invalid font matrix for font "+e),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const l=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const p=a.italic?"italic":"normal";let g=s;s<Pm?g=Pm:s>Bm&&(g=Bm),this.current.fontSizeScale=s/g,this.ctx.font=`${p} ${d} ${g}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,e,s){this.setLeading(t,-s),this.moveText(t,e,s)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=e,s.textMatrixScale=Math.hypot(e[0],e[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),a}paintChar(t,e,s,a,o,l){const u=this.ctx,d=this.current,p=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=g&Ce.FILL_STROKE_MASK,v=!!(g&Ce.ADD_TO_PATH_FLAG),w=d.patternFill&&!p.missingFile,S=d.patternStroke&&!p.missingFile;let _;if((p.disableFontFace||v||w||S)&&!p.missingFile&&(_=p.getPathGenerator(this.commonObjs,e)),_&&(p.disableFontFace||w||S)){u.save(),u.translate(s,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,p);let E;if(b===Ce.FILL||b===Ce.FILL_STROKE)if(o){E=u.getTransform(),u.setTransform(...o);const T=this.#i(_,E,o);u.fill(T)}else u.fill(_);if(b===Ce.STROKE||b===Ce.FILL_STROKE)if(l){E||=u.getTransform(),u.setTransform(...l);const{a:T,b:C,c:N,d:M}=E,B=it.inverseTransform(l),U=it.transform([T,C,N,M,0,0],B);it.singularValueDecompose2dScale(U,sn),u.lineWidth*=Math.max(sn[0],sn[1])/y,u.stroke(this.#i(_,E,l))}else u.lineWidth/=y,u.stroke(_);u.restore()}else(b===Ce.FILL||b===Ce.FILL_STROKE)&&(u.fillText(e,s,a),this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,a,()=>u.measureText(e))),(b===Ce.STROKE||b===Ce.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,a,()=>u.measureText(e)).recordDependencies(t,yn.stroke),u.strokeText(e,s,a));v&&((this.pendingTextPaths||=[]).push({transform:Zt(u),x:s,y:a,fontSize:y,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){s=!0;break}return St(this,"isFontSubpixelAAEnabled",s)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,yn.showText).resetBBox(t),this.current.textRenderingMode&Ce.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,d=s.charSpacing,p=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=e.length,v=a.vertical,w=v?1:-1,S=a.defaultVMetrics,_=o*s.fontMatrix[0],E=s.textRenderingMode===Ce.FILL&&!a.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(y,-1):l.scale(y,1);let T,C;if(s.patternFill){l.save();const V=s.fillColor.getPattern(l,this,Nn(l),Re.FILL,t);T=Zt(l),l.restore(),l.fillStyle=V}if(s.patternStroke){l.save();const V=s.strokeColor.getPattern(l,this,Nn(l),Re.STROKE,t);C=Zt(l),l.restore(),l.strokeStyle=V}let N=s.lineWidth;const M=s.textMatrixScale;if(M===0||N===0){const V=s.textRenderingMode&Ce.FILL_STROKE_MASK;(V===Ce.STROKE||V===Ce.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=M;if(u!==1&&(l.scale(u,u),N/=u),l.lineWidth=N,a.isInvalidPDFjsFont){const V=[];let q=0;for(const Z of e)V.push(Z.unicode),q+=Z.width;const Q=V.join("");if(l.fillText(Q,0,0),this.dependencyTracker!==null){const Z=l.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-Z.actualBoundingBoxLeft,Z.actualBoundingBoxRight,-Z.actualBoundingBoxAscent,Z.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=q*_*y,l.restore(),this.compose();return}let B=0,U;for(U=0;U<b;++U){const V=e[U];if(typeof V=="number"){B+=w*V*o/1e3;continue}let q=!1;const Q=(V.isSpace?p:0)+d,Z=V.fontChar,lt=V.accent;let ht,rt,ct=V.width;if(v){const tt=V.vmetric||S,dt=-(V.vmetric?tt[1]:ct*.5)*_,D=tt[2]*_;ct=tt?-tt[0]:ct,ht=dt/u,rt=(B+D)/u}else ht=B/u,rt=0;let k;if(a.remeasure&&ct>0){k=l.measureText(Z);const tt=k.width*1e3/o*u;if(ct<tt&&this.isFontSubpixelAAEnabled){const dt=ct/tt;q=!0,l.save(),l.scale(dt,1),ht/=dt}else ct!==tt&&(ht+=(ct-tt)/2e3*o/u)}if(this.contentVisible&&(V.isInFont||a.missingFile)){if(E&&!lt)l.fillText(Z,ht,rt),this.dependencyTracker?.recordCharacterBBox(t,l,k?{bbox:null}:a,o/u,ht,rt,()=>k??l.measureText(Z));else if(this.paintChar(t,Z,ht,rt,T,C),lt){const tt=ht+o*lt.offset.x/u,dt=rt-o*lt.offset.y/u;this.paintChar(t,lt.fontChar,tt,dt,T,C)}}const G=v?ct*_-Q*g:ct*_+Q*g;B+=G,q&&l.restore()}v?s.y-=B:s.x+=B*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const s=this.ctx,a=this.current,o=a.font,l=a.fontSize,u=a.fontDirection,d=o.vertical?1:-1,p=a.charSpacing,g=a.wordSpacing,y=a.textHScale*u,b=a.fontMatrix||Eh,v=e.length,w=a.textRenderingMode===Ce.INVISIBLE;let S,_,E,T;if(w||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new Rl(C,t):null,S=0;S<v;++S){if(_=e[S],typeof _=="number"){T=d*_*l/1e3,this.ctx.translate(T,0),a.x+=T*y;continue}const N=(_.isSpace?g:0)+p,M=o.charProcOperatorList[_.operatorListId];M?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...b),this.executeOperatorList(M),this.restore()):vt(`Type3 character "${_.operatorListId}" is not available.`);const B=[_.width,0];it.applyTransform(B,b),E=B[0]*l+N,s.translate(E,0),a.x+=E*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,e,s){}setCharWidthAndBounds(t,e,s,a,o,l,u){const d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,u).recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let s;if(e[0]==="TilingPattern"){const a=this.baseTransform||Zt(this.ctx),o={createCanvasGraphics:(l,u)=>new aa(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Rl(this.dependencyTracker,u,!0):null)};s=new nd(e,this.ctx,o,a)}else s=this._getPattern(t,e[1],e[2]);return s}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,s=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=ow(this.getObject(t,e)),this.cachedPatterns.set(e,a)),s&&(a.matrix=s),a}shadingFill(t,e){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,e);s.fillStyle=a.getPattern(s,this,Nn(s),Re.SHADING,t);const o=Nn(s);if(o){const{width:l,height:u}=s.canvas,d=ia.slice();it.axialAlignedBoundingBox([0,0,l,u],o,d);const[p,g,y,b]=d;this.ctx.fillRect(p,g,y-p,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,yn.transform).recordDependencies(t,yn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Vt("Should not call beginInlineImage")}beginImageData(){Vt("Should not call beginImageData")}paintFormXObjectBegin(t,e,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Zt(this.ctx),s)){it.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,l,u]=s,d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||Nl("TODO: Support non-isolated groups."),e.knockout&&vt("Knockout groups not supported.");const a=Zt(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=ia.slice();it.axialAlignedBoundingBox(e.bbox,Zt(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=it.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,p,g]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,p,g),v=b.context;v.translate(-u,-d),v.transform(...a);let w=new Path2D;const[S,_,E,T]=e.bbox;if(w.rect(S,_,E-S,T-_),e.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(e.matrix)),w=C}v.clip(w),e.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),Ar(s,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Zt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=ia.slice();it.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,s,a,o,l){if(this.#t(),yl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,it.singularValueDecompose2dScale(Zt(this.ctx),sn);const{viewportScale:p}=this,g=Math.ceil(u*this.outputScaleX*p),y=Math.ceil(d*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(sn[0],0,0,-sn[1],0,d*sn[1]),yl(this.ctx)}else{yl(this.ctx),this.endPath(t);const p=new Path2D;p.rect(s[0],s[1],u,d),this.ctx.clip(p)}}this.current=new Um(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(t,e.data,e),e.count=s;const a=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s,a=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const p=Zt(d);d.transform(s,a,o,l,0,0);const g=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,g.offsetX-p[4],g.offsetY-p[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const v=it.transform(p,[s,a,o,l,u[y],u[y+1]]);d.drawImage(g.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+g.canvas.width,v[5],v[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,yn.transformAndFill);for(const l of e){const{data:u,width:d,height:p,transform:g}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,p),b=y.context;b.save();const v=this.getObject(t,u,l);Hm(b,v),b.globalCompositeOperation="source-in",b.fillStyle=o?a.getPattern(b,this,Nn(s),Re.FILL,t):a,b.fillRect(0,0,d,p),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),ml(s,y.canvas,0,0,d,p,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,p),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s){vt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,e,s,a,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){vt("Dependent image isn't ready yet");return}const u=l.width,d=l.height,p=[];for(let g=0,y=o.length;g<y;g+=2)p.push({transform:[s,0,0,a,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const s=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/a);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,a).context;zm(g,e),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Nn(o));o.imageSmoothingEnabled=Im(Zt(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,yn.imageXObject).recordOperation(t),ml(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,p=this.cachedCanvases.getCanvas("inlineImage",l,u).context;zm(p,e),o=this.applyTransferMapsToCanvas(p)}this.dependencyTracker?.resetBBox(t);for(const l of s)a.save(),a.transform(...l.transform),a.scale(1,-1),ml(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,yn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,s){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,s){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===jm?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Zt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:a,d:o}=this.ctx.getTransform();let l,u;if(s===0&&a===0){const d=Math.abs(e),p=Math.abs(o);if(d===p)if(t===0)l=u=1/d;else{const g=d*t;l=u=g<1?1/g:1}else if(t===0)l=1/d,u=1/p;else{const g=d*t,y=p*t;l=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(e*o-s*a),p=Math.hypot(e,s),g=Math.hypot(a,o);if(t===0)l=g/d,u=p/d;else{const y=t*d;l=g>y?g/y:1,u=p>y?p/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(a||1)*o,s.stroke(t);return}const u=s.getLineDash();e&&s.save(),s.scale(o,l),mh.a=1/o,mh.d=1/l;const d=new Path2D;if(d.addPath(t,mh),u.length>0){const p=Math.max(o,l);s.setLineDash(u.map(g=>g/p)),s.lineDashOffset/=p}s.lineWidth=a||1,s.stroke(d),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in ha)aa.prototype[h]!==void 0&&(aa.prototype[ha[h]]=aa.prototype[h]);class ra{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,s={};let a=0;for(const p of ra.strings){const g=e.encode(t[p]);s[p]=g,a+=4+g.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const p of ra.strings){const g=s[p],y=g.length;u.setUint32(d,y),l.set(g,d+4),d+=4+y}return Dt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Dt(t<ra.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class oa{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,s={};let a=0;for(const b of oa.strings){const v=e.encode(t[b]);s[b]=v,a+=4+v.length}a+=4;let o,l,u=1+a;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),p=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,a=0;for(const b of oa.strings){const v=s[b],w=v.length;a+=4+w,g.setUint32(y,w),p.set(v,y+4),y+=4+w}return g.setUint32(y-a-4,a),t.style&&(g.setUint32(y,o.length),p.set(o,y+4),y+=4+o.length,g.setUint32(y,l.length),p.set(l,y+4),y+=4+l.length),Dt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Dt(t<oa.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),s=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class Ht{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:e}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),e&&Object.assign(this,e)}#c(t){Dt(t<Ht.bools.length,"Invalid boolean index");const e=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(e)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Dt(t<Ht.numbers.length,"Invalid number index"),this.#o.getFloat64(Ht.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Ht.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Ht.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Ht.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Dt(t<Ht.strings.length,"Invalid string index");let e=Ht.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const s=this.#o.getUint32(e),a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,e+4,s)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Ht.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=Ht.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Ht.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#s,t+4,a)),new ra(o.buffer)}get systemFontInfo(){let t=Ht.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,t+4,s)),new oa(a.buffer)}static write(t){const e=t.systemFontInfo?oa.write(t.systemFontInfo):null,s=t.cssFontInfo?ra.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const S of Ht.strings)o[S]=a.encode(t[S]),l+=4+o[S].length;const u=Ht.#r+4+l+4+(e?e.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),p=new Uint8Array(d),g=new DataView(d);let y=0;const b=Ht.bools.length;let v=0,w=0;for(let S=0;S<b;S++){const _=t[Ht.bools[S]];v|=(_===void 0?0:_?2:1)<<w,w+=2,(w===8||S===b-1)&&(g.setUint8(y++,v),v=0,w=0)}Dt(y===Ht.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Ht.numbers)g.setFloat64(y,t[S]),y+=8;if(Dt(y===Ht.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Dt(y===Ht.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Dt(y===Ht.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Dt(y===Ht.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Ht.#r,0),y+=4;for(const S of Ht.strings){const _=o[S],E=_.length;g.setUint32(y,E),p.set(_,y+4),y+=4+E}if(g.setUint32(Ht.#r,y-Ht.#r-4),!e)g.setUint32(y,0),y+=4;else{const S=e.byteLength;g.setUint32(y,S),Dt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(e),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Dt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),p.set(t.data,y+4),y+=4+t.data.length),Dt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class ki{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class gw{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const na=Symbol("INTERNAL");class mw{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&en.DISPLAY),this.#e=!!(t&en.PRINT),this.name=e,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==na&&Vt("Internal method `_setVisible` called."),this.#i=s,this.#n=e}}class yw{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=en.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new mw(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(na,!1);for(const s of t.on)this.#e.get(s)._setVisible(na,!0);for(const s of t.off)this.#e.get(s)._setVisible(na,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return vt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Nl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(vt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return vt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return vt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return vt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return vt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return vt(`Unknown optional content policy ${t.policy}.`),!0}return vt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const a=this.#e.get(t);if(!a){vt(`Optional content group not found: ${t}`);return}if(s&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(na,!1,!0);a._setVisible(na,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Oy;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class bw{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Dt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),t.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Dt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new vw(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Aw(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class vw{constructor(t,e,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Pl(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Aw{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Sw(h){let t=!0,e=s("filename\\*","i").exec(h);if(e){e=e[1];let g=u(e);return g=unescape(g),g=d(g),g=p(g),o(g)}if(e=l(h),e){const g=p(e);return o(g)}if(e=s("filename","i").exec(h),e){e=e[1];let g=u(e);return g=p(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),v=zr(y);y=b.decode(v),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function l(g){const y=[];let b;const v=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(g))!==null;){let[,S,_,E]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[_,E]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[_,E]=y[S];E=u(E),_&&(E=unescape(E),S===0&&(E=d(E))),w.push(E)}return w.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const v=y[b].indexOf('"');v!==-1&&(y[b]=y[b].slice(0,v),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),w=g.slice(y+1).replace(/^[^']*'/,"");return a(b,w)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),a(b,w);try{w=atob(w)}catch{}return a(b,w)})}return""}function Hy(h,t){const e=new Headers;if(!h||!t||typeof t!="object")return e;for(const s in t){const a=t[s];a!==void 0&&e.append(s,a)}return e}function Bl(h){return URL.parse(h)?.origin??null}function Iy({responseHeaders:h,isHttp:t,rangeChunkSize:e,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function jy(h){const t=h.get("Content-Disposition");if(t){let e=Sw(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Pl(e))return e}return null}function Vr(h,t){return new Lr(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function Gy(h){return h===200||h===206}function Vy(h,t,e){return{method:"GET",headers:h,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function qy(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(vt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class ww{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Hy(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Ew(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new _w(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Ew{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),a=e.url;fetch(a,Vy(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Bl(o.url),!Gy(o.status))throw Vr(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:d}=Iy({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=jy(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ri("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:qy(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class _w{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${s-1}`);const l=a.url;fetch(l,Vy(o,this._withCredentials,this._abortController)).then(u=>{const d=Bl(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Gy(u.status))throw Vr(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:qy(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const yh=200,bh=206;function xw(h){const t=h.response;return typeof t!="string"?t:zr(t).buffer}class Tw{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Hy(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=bh):a.expectedStatus=yh,e.responseType="arraybuffer",Dt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||yh;if(!(o===yh&&s.expectedStatus===bh)&&o!==s.expectedStatus){s.onError(a.status);return}const u=xw(a);if(o===bh){const d=a.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?s.onDone({begin:parseInt(p[1],10),chunk:u}):(vt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Cw{constructor(t){this._source=t,this._manager=new Tw(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Rw(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new Mw(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Rw{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Bl(e.responseURL);const s=e.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...p]=u.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Iy({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=jy(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Vr(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Mw{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Bl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Vr(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Dw=/^[a-z][a-z0-9\-+.]+:/i;function Lw(h){if(Dw.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class Ow{constructor(t){this.source=t,this.url=Lw(t.url),Dt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Nw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new kw(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Nw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Vr(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ri("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class kw{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Sr=Symbol("INITIAL_DATA");class Xy{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Sr}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const s=this.#t[t];if(!s||s.data===Sr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==Sr}delete(t){const e=this.#t[t];return!e||e.data===Sr?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Sr&&(yield[t,e])}}}const Pw=1e5,Gm=30;let Nr=class bn{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#x=new WeakMap;static#E=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=s.scale*En.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=a,this.#a=o,bn.#M(),Pi(e,s),this.#t.promise.finally(()=>{bn.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=we.platform;return St(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),bn.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*En.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Pi(this.#l,{rotation:a})),s!==this.#h){e?.(),this.#h=s;const o={div:null,properties:null,ctx:bn.#D(this.#r)};for(const l of this.#u)o.properties=this.#g.get(l),o.div=l,this.#_(o)}}cancel(){const t=new ri("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#i)return;this.#s.ctx??=bn.#D(this.#r);const e=this.#u,s=this.#m;for(const a of t){if(e.length>Pw){vt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#w(a)}}#w(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=it.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=bn.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),p=d*bn.#F(u,l,this.#r);let g,y;o===0?(g=a[4],y=a[5]-p):(g=a[4]+p*Math.sin(o),y=a[5]-p*Math.cos(o));const b="calc(var(--total-scale-factor) *",v=e.style;this.#e===this.#l?(v.left=`${(100*g/this.#o).toFixed(2)}%`,v.top=`${(100*y/this.#a).toFixed(2)}%`):(v.left=`${b}${g.toFixed(2)}px)`,v.top=`${b}${y.toFixed(2)}px)`),v.fontSize=`${b}${(bn.#E*d).toFixed(2)}px)`,v.fontFamily=u,s.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);S!==_&&Math.max(S,_)/Math.min(S,_)>1.5&&(w=!0)}if(w&&(s.canvasWidth=l.vertical?t.height:t.width),this.#g.set(e,s),this.#s.div=e,this.#s.properties=s,this.#_(this.#s),s.hasText&&this.#e.append(e),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:e,properties:s,ctx:a}=t,{style:o}=e;let l="";if(bn.#E>1&&(l=`scale(${1/bn.#E})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:p}=s;bn.#R(a,p*this.#h,u);const{width:g}=a.measureText(e.textContent);g>0&&(l=`scaleX(${d*this.#h/g}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let e=this.#b.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#x.set(e,{size:0,family:""})}return e}static#R(t,e,s){const a=this.#x.get(t);e===a.size&&s===a.family||(t.font=`${e}px ${s}`,a.size=e,a.family=s)}static#M(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#F(t,e,s){const a=this.#v.get(t);if(a)return a;const o=this.#D(s);o.canvas.width=o.canvas.height=Gm,this.#R(o,Gm,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return u?p=u/(u+d):(we.platform.isFirefox&&vt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),this.#v.set(t,p),p}};const Bw=100;function id(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new sd,{docId:e}=t,s=h.url?VS(h.url):null,a=h.data?qS(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof ad?h.range:null,p=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof da?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!Ir(h.docBaseUrl)?h.docBaseUrl:null,v=dl(h.cMapUrl),w=h.cMapPacked!==!1,S=h.CMapReaderFactory||(Be?ZS:Mm),_=dl(h.iccUrl),E=dl(h.standardFontDataUrl),T=h.StandardFontDataFactory||(Be?JS:Dm),C=dl(h.wasmUrl),N=h.WasmFactory||(Be?tw:Lm),M=h.stopAtErrors!==!0,B=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,U=h.isEvalSupported!==!1,V=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!Be,q=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!Be&&(we.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,Z=typeof h.disableFontFace=="boolean"?h.disableFontFace:Be,lt=h.fontExtraProperties===!0,ht=h.enableXfa===!0,rt=h.ownerDocument||globalThis.document,ct=h.disableRange===!0,k=h.disableStream===!0,G=h.disableAutoFetch===!0,tt=h.pdfBug===!0,dt=h.CanvasFactory||(Be?QS:$S),D=h.FilterFactory||(Be?KS:WS),$=h.enableHWA===!0,J=h.useWasm!==!1,K=d?d.length:h.length??NaN,et=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!Be&&!Z,yt=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===Mm&&T===Dm&&N===Lm&&v&&E&&C&&_r(v,document.baseURI)&&_r(E,document.baseURI)&&_r(C,document.baseURI)),at=null;xS(y);const wt={canvasFactory:new dt({ownerDocument:rt,enableHWA:$}),filterFactory:new D({docId:e,ownerDocument:rt}),cMapReaderFactory:yt?null:new S({baseUrl:v,isCompressed:w}),standardFontDataFactory:yt?null:new T({baseUrl:E}),wasmFactory:yt?null:new N({baseUrl:C})};g||(g=da.create({verbosity:y,port:ki.workerPort}),t._worker=g);const Rt={docId:e,apiVersion:"5.4.296",data:a,password:u,disableAutoFetch:G,rangeChunkSize:p,length:K,docBaseUrl:b,enableXfa:ht,evaluatorOptions:{maxImageSize:B,disableFontFace:Z,ignoreErrors:M,isEvalSupported:U,isOffscreenCanvasSupported:V,isImageDecoderSupported:q,canvasMaxAreaInBytes:Q,fontExtraProperties:lt,useSystemFonts:et,useWasm:J,useWorkerFetch:yt,cMapUrl:v,iccUrl:_,standardFontDataUrl:E,wasmUrl:C}},Xt={ownerDocument:rt,pdfBug:tt,styleElement:at,loadingParams:{disableAutoFetch:G,enableXfa:ht}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const It=g.messageHandler.sendWithPromise("GetDocRequest",Rt,a?[a.buffer]:null);let Ue;if(d)Ue=new bw(d,{disableRange:ct,disableStream:k});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ye=_r(s)?ww:Be?Ow:Cw;Ue=new Ye({url:s,length:K,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:ct,disableStream:k})}return It.then(Ye=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Mt=new xr(e,Ye,g.port),Bt=new zw(Mt,t,Ue,Xt,wt,$);t._transport=Bt,Mt.send("Ready",null)})}).catch(t._capability.reject),t}class sd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${sd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let ad=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,s=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#r)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#n)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Vt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Fw{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return St(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Uw{#t=!1;constructor(t,e,s,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=a?new wm:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new Xy,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new Hr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return St(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:s,intent:a="display",annotationMode:o=Un.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:p=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:v=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,y,b),{renderingIntent:_,cacheKey:E}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(_);let T=this._intentStates.get(E);T||(T=Object.create(null),this._intentStates.set(E,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const C=!!(_&en.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),M=!this.recordedBBoxes&&(v||N),B=q=>{if(T.renderTasks.delete(U),M){const Q=U.gfx?.dependencyTracker.take();Q&&(U.stepper&&U.stepper.setOperatorBBoxes(Q,U.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=Q))}C&&(this.#t=!0),this.#e(),q?(U.capability.reject(q),this._abortOperatorList({intentState:T,reason:q instanceof Error?q:new Error(q)})):U.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},U=new sa({callback:B,params:{canvas:e,canvasContext:t,dependencyTracker:M?new nw(e,T.operatorList.length,N):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:w});(T.renderTasks||=new Set).add(U);const V=U.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([q,Q])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(Q.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");U.initializeGraphics({transparency:q,optionalContentConfig:Q}),U.operatorListChanged()}).catch(B),V}getOperatorList({intent:t="display",annotationMode:e=Un.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,s,a,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Or.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,a){function o(){l.read().then(function({value:d,done:p}){if(p){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new wm),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,a=t.length;s<a;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),p=this._intentStates.get(e);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();this.#e()}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof kl){let a=Bw;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new ri(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Ni,wn,ni,as,Ml,rs,os,Fe,wl,Yy,$y,Tr,ua,El;const Wt=class Wt{constructor({name:t=null,port:e=null,verbosity:s=TS()}={}){Ln(this,Fe);Ln(this,Ni,Promise.withResolvers());Ln(this,wn,null);Ln(this,ni,null);Ln(this,as,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if($t(Wt,os).has(e))throw new Error("Cannot use more than one PDFWorker per port.");$t(Wt,os).set(e,this),On(this,Fe,Yy).call(this,e)}else On(this,Fe,$y).call(this)}get promise(){return $t(this,Ni).promise}get port(){return $t(this,ni)}get messageHandler(){return $t(this,wn)}destroy(){this.destroyed=!0,$t(this,as)?.terminate(),Ve(this,as,null),$t(Wt,os).delete($t(this,ni)),Ve(this,ni,null),$t(this,wn)?.destroy(),Ve(this,wn,null)}static create(t){const e=$t(this,os).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Wt(t)}static get workerSrc(){if(ki.workerSrc)return ki.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return St(this,"_setupFakeWorkerGlobal",(async()=>$t(this,ua,El)?$t(this,ua,El):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ni=new WeakMap,wn=new WeakMap,ni=new WeakMap,as=new WeakMap,Ml=new WeakMap,rs=new WeakMap,os=new WeakMap,Fe=new WeakSet,wl=function(){$t(this,Ni).resolve(),$t(this,wn).send("configure",{verbosity:this.verbosity})},Yy=function(t){Ve(this,ni,t),Ve(this,wn,new xr("main","worker",t)),$t(this,wn).on("ready",()=>{}),On(this,Fe,wl).call(this)},$y=function(){if($t(Wt,rs)||$t(Wt,ua,El)){On(this,Fe,Tr).call(this);return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new xr("main","worker",e),a=()=>{o.abort(),s.destroy(),e.terminate(),this.destroyed?$t(this,Ni).reject(new Error("Worker was destroyed")):On(this,Fe,Tr).call(this)},o=new AbortController;e.addEventListener("error",()=>{$t(this,as)||a()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}Ve(this,wn,s),Ve(this,ni,e),Ve(this,as,e),On(this,Fe,wl).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{On(this,Fe,Tr).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{Nl("The worker has been disabled.")}On(this,Fe,Tr).call(this)},Tr=function(){$t(Wt,rs)||(vt("Setting up fake worker."),Ve(Wt,rs,!0)),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){$t(this,Ni).reject(new Error("Worker was destroyed"));return}const e=new YS;Ve(this,ni,e);const s=`fake${im(Wt,Ml)._++}`,a=new xr(s+"_worker",s,e);t.setup(a,e),Ve(this,wn,new xr(s,s+"_worker",e)),On(this,Fe,wl).call(this)}).catch(t=>{$t(this,Ni).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ua=new WeakSet,El=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ln(Wt,ua),Ln(Wt,Ml,0),Ln(Wt,rs,!1),Ln(Wt,os,new WeakMap),Be&&(Ve(Wt,rs,!0),ki.workerSrc||="./pdf.worker.mjs"),Wt._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(e,s);return s.origin===a.origin},Wt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Wt.fromPort=t=>{if(PS("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Wt.create(t)};let da=Wt;class zw{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,s,a,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Xy,this.fontLoader=new jS({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,e=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return St(this,"annotationStorage",new Jh)}getRenderingIntent(t,e=Un.ENABLE,s=null,a=!1,o=!1){let l=en.DISPLAY,u=xh;switch(t){case"any":l=en.ANY;break;case"display":break;case"print":l=en.PRINT;break;default:vt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&en.PRINT&&s instanceof Ny?s:this.annotationStorage;switch(e){case Un.DISABLE:l+=en.ANNOTATIONS_DISABLE;break;case Un.ENABLE:break;case Un.ENABLE_FORMS:l+=en.ANNOTATIONS_FORMS;break;case Un.ENABLE_STORAGE:l+=en.ANNOTATIONS_STORAGE,u=d.serializable;break;default:vt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=en.IS_EDITING),o&&(l+=en.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[l,u.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Nr.cleanup(),this._networkStream?.cancelAllRequests(new ri("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,a)=>{Dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}Dt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,a)=>{Dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){a.close();return}Dt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new Fw(s,this))}),t.on("DocException",s=>{e._capability.reject(qe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw qe(s);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(a,s.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const g=o.error;vt(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const l=new Ht(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new GS(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:p}=o;Dt(p,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,y]of g.objs)if(y?.ref===p)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,l])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#i.get(e);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new Uw(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#i.set(e,a),a}getPageIndex(t){return Th(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new yw(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new gw(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Nr.cleanup()}}cachedPageNumber(t){if(!Th(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class Hw{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class sa{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:v=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Hw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(sa.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");sa.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new aa(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),sa.#e.delete(this._canvas),t||=new kl(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),sa.#e.delete(this._canvas),this.callback())))}}const Wy="5.4.296",Ky="f56dc8601";class nn{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return St(this,"_keyboardManager",new jr([[["Escape","mac+Escape"],nn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],nn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],nn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],nn.prototype._moveToPrevious],[["Home","mac+Home"],nn.prototype._moveToBeginning],[["End","mac+End"],nn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",nn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#i,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",rn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",nn.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ct.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#n.lastChild?.focus()}#m(t){nn._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class kr{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,kr.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",kr.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Vm(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function wr(h){return Math.max(0,Math.min(255,255*h))}class qm{static CMYK_G([t,e,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=wr(t),[t,t,t]}static G_HTML([t]){const e=Vm(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(wr)}static RGB_HTML(t){return`#${t.map(Vm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,s,a]){return[wr(1-Math.min(1,t+a)),wr(1-Math.min(1,s+a)),wr(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const a=1-t,o=1-e,l=1-s,u=Math.min(a,o,l);return["CMYK",a,o,l,u]}}class Iw{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Vt("Abstract method `_createSVG` called.")}}class Pr extends Iw{_createSVG(t){return document.createElementNS(ei,t)}}const jw=9,cs=new WeakSet,Gw=new Date().getTimezoneOffset()*60*1e3;class Xm{static create(t){switch(t.data.annotationType){case le.LINK:return new rd(t);case le.TEXT:return new qw(t);case le.WIDGET:switch(t.data.fieldType){case"Tx":return new Xw(t);case"Btn":return t.data.radioButton?new Qy(t):t.data.checkBox?new $w(t):new Ww(t);case"Ch":return new Kw(t);case"Sig":return new Yw(t)}return new fs(t);case le.POPUP:return new Mh(t);case le.FREETEXT:return new Zy(t);case le.LINE:return new Zw(t);case le.SQUARE:return new Jw(t);case le.CIRCLE:return new tE(t);case le.POLYLINE:return new Jy(t);case le.CARET:return new nE(t);case le.INK:return new od(t);case le.POLYGON:return new eE(t);case le.HIGHLIGHT:return new tb(t);case le.UNDERLINE:return new iE(t);case le.SQUIGGLY:return new sE(t);case le.STRIKEOUT:return new aE(t);case le.STAMP:return new eb(t);case le.FILEATTACHMENT:return new rE(t);default:return new te(t)}}}class te{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return te._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:s,rect:a}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>l?(l=e[u+1],o=e[u+2]):e[u+1]===l&&(o=Math.max(o,e[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let d=0,p=u.length;d<p;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Dr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:s})||this.annotationStorage.setValue(`${Dr}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:s}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#i.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof fs)&&!(this instanceof rd)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Mh){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(S>0||_>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof Qy){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(e.borderStyle.style){case ea.SOLID:l.borderStyle="solid";break;case ea.DASHED:l.borderStyle="dashed";break;case ea.BEVELED:vt("Unimplemented border style: beveled");break;case ea.INSET:vt("Unimplemented border style: inset");break;case ea.UNDERLINE:l.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,l.borderColor=it.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const p=it.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:v}=a.rawDims;l.left=`${100*(p[0]-b)/g}%`,l.top=`${100*(p[1]-v)/y}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(l.width=`${100*u/g}%`,l.height=`${100*d/y}%`):this.setRotation(w,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/s}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,a)=>{const o=a.detail[e],l=o[0],u=o.slice(1);a.target.style[s]=qm[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:qm[`${l}_rgb`](u)})};return St(this,"_commonActions",{display:e=>{const{display:s}=e.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||s[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[a,o]of Object.entries(e)){const l=s[a];if(l){const u={detail:{[a]:o},target:t};l(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,E,T]=t.subarray(2,6);if(a===S&&o===_&&e===E&&s===T)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:_}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const d=a-e,p=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const v=g.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let S=2,_=t.length;S<_;S+=8){const E=t[S],T=t[S+1],C=t[S+2],N=t[S+3],M=g.createElement("rect"),B=(C-e)/d,U=(o-T)/p,V=(E-C)/d,q=(T-N)/p;M.setAttribute("x",B),M.setAttribute("y",U),M.setAttribute("width",V),M.setAttribute("height",q),v.append(M),u?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${U}" width="${V}" height="${q}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let s,a;t?(s={str:t.text},a=t.date):(s=e.contentsObj,a=e.modificationDate);const o=this.#i=new Mh({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:s,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Vt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:u}of a){if(o===-1||l===e)continue;const d=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!cs.has(p)){vt(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:p})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&cs.has(a)&&s.push({id:l,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Vw extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class rd extends te{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,s=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),s&&(t.title=s),this.#t()}#e(t,e,s="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:l}=e,u=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:v}of b)g.add(v)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===l&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,p=[];for(const g of u){const{id:y}=g;switch(p.push(y),g.type){case"text":{const v=g.defaultValue||"";d.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=g.defaultValue===g.exportValues;d.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=g.defaultValue||"";d.setValue(y,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!cs.has(b)){vt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class qw extends te{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class fs extends te{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return we.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,a,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,s,a){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":it.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||jw,o=t.style;let l;const u=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(p/(hh*a))||1,y=p/g;l=Math.min(a,d(y/hh))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(a,d(p/hh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=it.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Xw extends fs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=s),o.setValue(l.id,{[a]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),cs.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:p,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;p&&(s.title=p),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let v=w=>{const{formattedValue:S}=d;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:_}=S;if(b&&(_.type=g,y&&(_.step=y)),d.userValue){const E=d.userValue;if(b)if(g==="time"){const T=new Date(E),C=[T.getHours(),T.getMinutes(),T.getSeconds()];_.value=C.map(N=>N.toString().padStart(2,"0")).join(":")}else _.value=new Date(E-Gw).toISOString().split(g==="date"?"T":".",1)[0];else _.value=E}d.lastCommittedValue=_.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(E){d.userValue=E.detail.value??"",b||t.setValue(e,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:T}=E.detail;d.formattedValue=T,T!=null&&E.target!==document.activeElement&&(E.target.value=T);const C={formattedValue:T};b&&(C.value=T),t.setValue(e,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:T}=E.detail,{target:C}=E;if(T===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",T);let N=d.userValue;!N||N.length<=T||(N=N.slice(0,T),C.value=d.userValue=N,t.setValue(e,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(d.commitKey=3),_===-1)return;const{value:E}=S.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=v;v=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:_}=S;let{value:E}=_;if(b){if(E&&g==="time"){const T=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),_.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();_.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:_,target:E}=S,{value:T,selectionStart:C,selectionEnd:N}=E;let M=C,B=N;switch(S.inputType){case"deleteWordBackward":{const U=T.substring(0,C).match(/\w*[^\w]*$/);U&&(M-=U[0].length);break}case"deleteWordForward":{const U=T.substring(C).match(/^[^\w]*\w*/);U&&(B+=U[0].length);break}case"deleteContentBackward":C===N&&(M-=1);break;case"deleteContentForward":C===N&&(B+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:_||"",willCommit:!1,selStart:M,selEnd:B}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(v&&s.addEventListener("blur",v),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Yw extends fs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class $w extends fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return cs.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const p of this._getElementsByName(u,s)){const g=d&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Qy extends fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(s,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(cs.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const p of this._getElementsByName(u,s))t.setValue(p.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:p=>{const g=l===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Ww extends rd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class Kw extends fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");cs.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),l=()=>{g.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:v}=a;return v?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){l?.();const v=b.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const S of a.options)S.selected=w.has(S.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const v=a.options,w=b.detail.remove;v[w].selected=!1,a.remove(w),v.length>0&&Array.prototype.findIndex.call(v,_=>_.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:u(!0),items:p(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(b){const{index:v,displayValue:w,exportValue:S}=b.detail.insert,_=a.children[v],E=document.createElement("option");E.textContent=w,E.value=S,_?_.before(E):a.append(E),t.setValue(e,{value:u(!0),items:p(b)}),d=u(!1)},items(b){const{items:v}=b.detail;for(;a.length!==0;)a.remove(0);for(const w of v){const{displayValue:S,exportValue:_}=w,E=document.createElement("option");E.textContent=S,E.value=_,a.append(E)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:p(b)}),d=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const w of b.target.options)w.selected=v.has(w.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(e,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Mh extends te{constructor(t){const{data:e,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&te._hasPopupData(e)}),this.elements=s,o&&te._hasPopupData(e)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new Qw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${$h}${a}`).join(",")),this.container}}class Qw{#t=null;#e=this.#V.bind(this);#i=this.#z.bind(this);#n=this.#N.bind(this);#r=this.#S.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#v=null;#b=null;#x=null;#E=null;#A=null;#C=!1;#w=null;#_=null;constructor({container:t,color:e,elements:s,titleObj:a,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:p,parentRect:g,open:y,commentManager:b=null}){this.#a=t,this.#E=a,this.#o=l,this.#x=u,this.#d=d,this.#s=e,this.#b=p,this.#h=g,this.#l=s,this.#t=b,this.#w=s[0],this.#c=Tl.toDateObject(o),this.trigger=s.flatMap(v=>v.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,y&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#w.extraPopupElement,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#g=this.#w.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#g=document.createElement("button");l.className="annotationCommentButton";const u=this.#w.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#M(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#M(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:s}=this.#g;s.left=`calc(${t}%)`,s.top=`calc(${e}% - var(--comment-button-dim))`}#F(){this.#w.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:e,opacity:s,creationDate:a,modificationDate:o}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#g}get comment(){return this.#_||=this.#w.commentText,this.#_}set comment(t){t!==this.comment&&(this.#w.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=e)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:s}=this.#g.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#w.layer.getBoundingClientRect();return[(t-a)/l,(e+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,s]=this.#v||this.commentButtonPosition.map(p=>p/100),a=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=a;this.#t.showDialog(null,this,o+e*u,l+s*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const s=t.style.outlineColor=it.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#E?.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=this.#E}if(t.append(e),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),e.append(s)}Kh({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#O(){const t=this.#x,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#x.html||null}get#k(){return this.#O?.attributes?.style?.fontSize||0}get#U(){return this.#O?.attributes?.style?.color||null}#P(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#U,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#F(),this.#_=e.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(s||e?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#x},t&&(this.#u=null),e&&e.text&&(this.#x=this.#P(e.text),this.#c=Tl.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#x}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const w of this.#l)if(!u||it.intersect(w.data.rect,u)!==null){u=w.data.rect,l=!0;break}const d=it.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=l?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];this.#u=[100*(y-a)/e,100*(b-o)/s];const{style:v}=this.#a;v.left=`${this.#u[0]}%`,v.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#z(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#N(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#z(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#m||this.#N(),this.#C=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class Zy extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Zw extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Jw extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class tE extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",s/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Jy extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,y=e.length;g<y;g+=2){const b=e[g]-t[0],v=t[3]-e[g+1];d.push(`${b},${v}`)}d=d.join(" ");const p=this.#t=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",d),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.append(p),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class eE extends Jy{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class od extends te{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?bt.HIGHLIGHT:bt.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#i(e,t),p=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");p.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let y=0,b=s.length;y<b;y++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",s[y].join(",")),g.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(a){const{transform:l,width:u,height:d}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class tb extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=bt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class iE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class sE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class aE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class eb extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class rE extends te{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=we.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let ld=class nb{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:p,annotationStorage:g}){this.div=t,this.#t=e,this.#e=s,this.#r=u||null,this.#s=p||null,this.#i=g||new Jh,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,s){const a=t.firstChild||t,o=a.id=`${$h}${e}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,d]of l)a.setAttribute(u,d);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,s=this.div;Pi(s,this.viewport);const a=new Map,o={data:null,layer:s,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Pr,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===le.POPUP;if(u){const g=a.get(l.id);if(!g)continue;o.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=Xm.create(o);if(!d.isRenderable)continue;if(!u&&l.popupRef){const g=a.get(l.popupRef);g?g.push(d):a.set(l.popupRef,[d])}const p=d.render();l.hidden&&(p.style.visibility="hidden"),await this.#a(p,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#s,svgFactory:new Pr,parent:this};for(const s of t){s.borderStyle||=nb._defaultBorderStyle,e.data=s;const a=Xm.create(e);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,s.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Pi(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:s,rotation:a}=t,o=new Vw({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),l=o.render();return e.append(l),this.#t?.moveElementInDOM(e,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return St(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ea.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const bl=/\r\n?|\n/g;class Ae extends ut{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ae.prototype,e=o=>o.isEmpty(),s=oi.TRANSLATE_SMALL,a=oi.TRANSLATE_BIG;return St(this,"_keyboardManager",new jr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=bt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ae._defaultColor||ut._defaultLineColor,this.#n=t.fontSize||Ae._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){ut.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ct.FREETEXT_SIZE:Ae._defaultFontSize=e;break;case Ct.FREETEXT_COLOR:Ae._defaultColor=e;break}}updateParams(t,e){switch(t){case Ct.FREETEXT_SIZE:this.#r(e);break;case Ct.FREETEXT_COLOR:this.#s(e);break}}static get defaultPropertiesToUpdate(){return[[Ct.FREETEXT_SIZE,Ae._defaultFontSize],[Ct.FREETEXT_COLOR,Ae._defaultColor||ut._defaultLineColor]]}get propertiesToUpdate(){return[[Ct.FREETEXT_SIZE,this.#n],[Ct.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new kr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},s=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const e=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ae._internalPadding*t,-(Ae._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Ae.#c(s)),e=s);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ae._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[p,g]=this.pageDimensions,[y,b]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(l[0]-y)/p,w=e+this.height-(l[1]-b)/g;break;case 90:v=t+(l[0]-y)/p,w=e-(l[1]-b)/g,[u,d]=[d,-u];break;case 180:v=t-this.width+(l[0]-y)/p,w=e-(l[1]-b)/g,[u,d]=[-u,-d];break;case 270:v=t+(l[0]-y-this.height*g)/p,w=e+(l[1]-b-this.width*p)/g,[u,d]=[-d,u];break}this.setAt(v*a,w*o,u,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(bl,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=Ae.#h(e.getData("text")||"").replaceAll(bl,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,p=[],g=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(bl,"")),v!==this.editorDiv){let w=p;for(const S of this.editorDiv.childNodes){if(S===v){w=g;continue}w.push(Ae.#c(S))}}p.push(u.nodeValue.slice(0,d).replaceAll(bl,""))}else if(u===this.editorDiv){let v=p,w=0;for(const S of this.editorDiv.childNodes)w++===d&&(v=g),v.push(Ae.#c(S))}this.#t=`${p.join(`
`)}${a}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(p.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(b<=w){y.setStart(v,b),y.setEnd(v,b);break}b-=w}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ae._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,s){let a=null;if(t instanceof Zy){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:p,id:g,popupRef:y,richText:b,contentsObj:v,creationDate:w,modificationDate:S},textContent:_,textPosition:E,parent:{page:{pageNumber:T}}}=t;if(!_||_.length===0)return null;a=t={annotationType:bt.FREETEXT,color:Array.from(u),fontSize:l,value:_.join(`
`),position:E,pageIndex:T-1,rect:d.slice(0),rotation:p,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:v?.str||null,richText:b,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,e,s);return o.#n=t.fontSize,o.color=it.makeHexColor(...t.color),o.#t=Ae.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ut._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:e,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:s}=e;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class nt{static PRECISION=1e-4;toSVGPath(){Vt("Abstract method `toSVGPath` must be implemented.")}get box(){Vt("Abstract getter `box` must be implemented.")}serialize(t,e){Vt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u]*a,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,e,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u+1]*a,l[u+1]=s+t[u]*o;return l}static _translate(t,e,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,a,o){switch(o){case 90:return[1-e/s,t/a];case 180:return[1-t/s,1-e/a];case 270:return[e/s,1-t/a];default:return[t/s,e/a]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,a,o,l){return[(t+5*s)/6,(e+5*a)/6,(5*s+o)/6,(5*a+l)/6,(s+o)/2,(a+l)/2]}}class ss{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=ss.#m+ss.#p;constructor({x:t,y:e},s,a,o,l,u=0){this.#t=s,this.#h=o*a,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=u,this.#l=ss.#m*a,this.#c=ss.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[s,a,o,l]=this.#t;return[(this.#a+(t[0]-e[0])/2-s)/o,(this.#o+(t[1]-e[1])/2-a)/l,(this.#a+(e[0]-t[0])/2-s)/o,(this.#o+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#a=t,this.#o=e;const[s,a,o,l]=this.#t;let[u,d,p,g]=this.#s.subarray(8,12);const y=t-p,b=e-g,v=Math.hypot(y,b);if(v<this.#c)return!1;const w=v-this.#l,S=w/v,_=S*y,E=S*b;let T=u,C=d;u=p,d=g,p+=_,g+=E,this.#f?.push(t,e);const N=-E/w,M=_/w,B=N*this.#h,U=M*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([p+B,g+U],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([p-B,g-U],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+B,d+U],2),this.#r.push(NaN,NaN,NaN,NaN,(u+B-s)/o,(d+U-a)/l),this.#s.set([u-B,d-U],14),this.#e.push(NaN,NaN,NaN,NaN,(u-B-s)/o,(d-U-a)/l)),this.#s.set([T,C,u,d,p,g],6),!this.isEmpty()):(this.#s.set([T,C,u,d,p,g],6),Math.abs(Math.atan2(C-d,T-u)-Math.atan2(E,_))<Math.PI/2?([u,d,p,g]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+p)/2-s)/o,((d+g)/2-a)/l),[u,d,T,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-s)/o,((C+d)/2-a)/l),!0):([T,C,u,d,p,g]=this.#s.subarray(0,6),this.#r.push(((T+5*u)/6-s)/o,((C+5*d)/6-a)/l,((5*u+p)/6-s)/o,((5*d+g)/6-a)/l,((u+p)/2-s)/o,((d+g)/2-a)/l),[p,g,u,d,T,C]=this.#s.subarray(12,18),this.#e.push(((T+5*u)/6-s)/o,((C+5*d)/6-a)/l,((5*u+p)/6-s)/o,((5*d+g)/6-a)/l,((u+p)/2-s)/o,((d+g)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(s);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?s.push(`L${e[a+4]} ${e[a+5]}`):s.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,e,s,a]=this.#t,[o,l,u,d]=this.#g();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-e)/a} L${(this.#s[4]-t)/s} ${(this.#s[5]-e)/a} L${o} ${l} L${u} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-e)/a} L${(this.#s[14]-t)/s} ${(this.#s[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,s,a,o]=this.#t,l=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[d,p,g,y]=this.#g();t.push(`L${(l[0]-e)/a} ${(l[1]-s)/o} L${d} ${p} L${g} ${y} L${(u[0]-e)/a} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,e,s,a,o,l){return new ib(t,e,s,a,o,l)}getOutlines(){const t=this.#r,e=this.#e,s=this.#s,[a,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/l,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#x(d);const p=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){p[y]=p[y+1]=NaN;continue}p[y]=t[y],p[y+1]=t[y+1]}g=this.#A(p,g);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=e[y+b],p[g+1]=e[y+b+1],g+=2}return this.#E(p,g),this.newFreeDrawOutline(p,d,this.#t,this.#d,this.#i,this.#n)}#x(t){const e=this.#s,[s,a,o,l]=this.#t,[u,d,p,g]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-s)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-s)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(e[16]-s)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-s)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#E(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#A(t,e){const s=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,u,d]=this.#t,[p,g,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-l)/d],e),e+=24}}class ib extends nt{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,e,s,a,o,l){super(),this.#a=t,this.#r=e,this.#t=s,this.#s=a,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,p,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/p,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-u)/p,e[y+1]=(e[y+1]-d)/g}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,s=this.#a.length;e<s;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,a],o){const l=s-t,u=a-e;let d,p;switch(o){case 0:d=nt._rescale(this.#a,t,a,l,-u),p=nt._rescale(this.#r,t,a,l,-u);break;case 90:d=nt._rescaleAndSwap(this.#a,t,e,l,u),p=nt._rescaleAndSwap(this.#r,t,e,l,u);break;case 180:d=nt._rescale(this.#a,s,e,-l,u),p=nt._rescale(this.#r,s,e,-l,u);break;case 270:d=nt._rescaleAndSwap(this.#a,s,a,-l,-u),p=nt._rescaleAndSwap(this.#r,s,a,-l,-u);break}return{outline:Array.from(d),points:[Array.from(p)]}}#o(t){const e=this.#a;let s=e[4],a=e[5];const o=[s,a,s,a];let l=s,u=a,d=s,p=a;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let v=6,w=e.length;v<w;v+=6){const S=e[v+4],_=e[v+5];isNaN(e[v])?(it.pointBoundingBox(S,_,o),u>_?(l=S,u=_):u===_&&(l=g(l,S)),p<_?(d=S,p=_):p===_&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,it.bezierBoundingBox(s,a,...e.slice(v,v+6),y),it.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(l=y[0],u=y[1]):u===y[1]&&(l=g(l,y[0])),p<y[3]?(d=y[2],p=y[3]):p===y[3]&&(d=g(d,y[2]))),s=S,a=_}const b=this.#e;b[0]=o[0]-this.#i,b[1]=o[1]-this.#i,b[2]=o[2]-o[0]+2*this.#i,b[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,u],this.lastPoint=[d,p]}get box(){return this.#e}newOutliner(t,e,s,a,o,l=0){return new ss(t,e,s,a,o,l)}getNewOutline(t,e){const[s,a,o,l]=this.#e,[u,d,p,g]=this.#t,y=o*p,b=l*g,v=s*p+u,w=a*g+d,S=this.newOutliner({x:this.#r[0]*y+v,y:this.#r[1]*b+w},this.#t,this.#s,t,this.#n,e??this.#i);for(let _=2;_<this.#r.length;_+=2)S.add({x:this.#r[_]*y+v,y:this.#r[_+1]*b+w});return S.getOutlines()}}class Dh{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:_,width:E,height:T}of t){const C=Math.floor((S-e)/l)*l,N=Math.ceil((S+E+e)/l)*l,M=Math.floor((_-e)/l)*l,B=Math.ceil((_+T+e)/l)*l,U=[C,M,B,!0],V=[N,M,B,!1];this.#n.push(U,V),it.rectBoundingBox(C,M,N,B,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,p=o[0]-s,g=o[1]-s;let y=a?-1/0:1/0,b=1/0;const v=this.#n.at(a?-1:-2),w=[v[0],v[2]];for(const S of this.#n){const[_,E,T,C]=S;!C&&a?E<b?(b=E,y=_):E===b&&(y=Math.max(y,_)):C&&!a&&(E<b?(b=E,y=_):E===b&&(y=Math.min(y,_))),S[0]=(_-p)/u,S[1]=(E-g)/d,S[2]=(T-g)/d}this.#t=new Float32Array([p,g,u,d]),this.#e=[y,b],this.#i=w}getOutlines(){this.#n.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){const e=[],s=new Set;for(const l of t){const[u,d,p]=l;e.push([u,d,l],[u,p,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const d=e[l][2],p=e[l+1][2];d.push(p),p.push(d),s.add(d),s.add(p)}const a=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,d,p,g,y]=l;s.delete(l);let b=u,v=d;for(o=[u,p],a.push(o);;){let w;if(s.has(g))w=g;else if(s.has(y))w=y;else break;s.delete(w),[u,d,p,g,y]=w,b!==u&&(o.push(b,v,u,v===d?d:p),b=u),v=v===d?p:d}o.push(b,v)}return new oE(a,this.#t,this.#e,this.#i)}#a(t){const e=this.#r;let s=0,a=e.length-1;for(;s<=a;){const o=s+a>>1,l=e[o][0];if(l===t)return o;l<t?s=o+1:a=o-1}return a+1}#o([,t,e]){const s=this.#a(t);this.#r.splice(s,0,[t,e])}#c([,t,e]){const s=this.#a(t);for(let a=s;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}}#l(t){const[e,s,a]=t,o=[[e,s,a]],l=this.#a(a);for(let u=0;u<l;u++){const[d,p]=this.#r[u];for(let g=0,y=o.length;g<y;g++){const[,b,v]=o[g];if(!(p<=b||v<=d)){if(b>=d){if(v>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,v>p&&o.push([e,p,v])}}}return o}}class oE extends nt{#t;#e;constructor(t,e,s,a){super(),this.#e=t,this.#t=e,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[s,a]=e;t.push(`M${s} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],u=e[o+1];l===s?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,e,s,a],o){const l=[],u=s-t,d=a-e;for(const p of this.#e){const g=new Array(p.length);for(let y=0;y<p.length;y+=2)g[y]=t+p[y]*u,g[y+1]=a-p[y+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Lh extends ss{newFreeDrawOutline(t,e,s,a,o,l){return new lE(t,e,s,a,o,l)}}class lE extends ib{newOutliner(t,e,s,a,o,l=0){return new Lh(t,e,s,a,o,l)}}class ce extends ut{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ce.prototype;return St(this,"_keyboardManager",new jr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ce._defaultColor,this.#g=t.thickness||ce._defaultThickness,this.opacity=t.opacity||ce._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Dh(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Dh(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#s;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#l=t;const a=1.5;if(this.#s=t.getNewOutline(this.#g/2+a,.0025),e>=0)this.#d=e,this.#n=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ce.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ce.#_(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/y,this.height=d*y/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/y,this.height=d*y/b;break}}const{firstPoint:p}=t;this.#f=[(p[0]-o)/u,(p[1]-l)/d];const{lastPoint:g}=this.#s;this.#m=[(g[0]-o)/u,(g[1]-l)/d]}static initialize(t,e){ut.initialize(t,e),ce._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ct.HIGHLIGHT_COLOR:ce._defaultColor=e;break;case Ct.HIGHLIGHT_THICKNESS:ce._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Ct.HIGHLIGHT_COLOR:this.#x(e);break;case Ct.HIGHLIGHT_THICKNESS:this.#E(e);break}}static get defaultPropertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,ce._defaultColor],[Ct.HIGHLIGHT_THICKNESS,ce._defaultThickness]]}get propertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,this.color||ce._defaultColor],[Ct.HIGHLIGHT_THICKNESS,this.#g||ce._defaultThickness],[Ct.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#x(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,ce._defaultOpacity),undo:e.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#E(t){const e=this.#g,s=a=>{this.#g=a,this.#A(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new nn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,s,a],o){switch(o){case 90:return[1-e-a,t,a,s];case 180:return[1-t-s,1-e-a,s,a];case 270:return[e,1-t-s,a,s]}return[t,e,s,a]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ce.#_(this.#l.box,t)):s=ce.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:ce.#_(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),Ly(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){ce._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#F(){if(this.#h)return null;const[t,e]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:p,width:g,height:y}of o){const b=d*t+s,v=(1-p)*e+a;l[u]=l[u+4]=b,l[u+1]=l[u+3]=v,l[u+2]=l[u+6]=b+g*t,l[u+5]=l[u+7]=v-y*e,u+=8}return l}#O(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:s,x:a,y:o}){const{x:l,y:u,width:d,height:p}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=v=>{g.abort(),this.#U(t,v)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",Jt,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",rn,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Lh({x:a,y:o},[l,u,d,p],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#U(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let a=null;if(t instanceof tb){const{data:{quadPoints:w,rect:S,rotation:_,id:E,color:T,opacity:C,popupRef:N,richText:M,contentsObj:B,creationDate:U,modificationDate:V},parent:{page:{pageNumber:q}}}=t;a=t={annotationType:bt.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:w,boxes:null,pageIndex:q-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:M,comment:B?.str||null,creationDate:U,modificationDate:V}}else if(t instanceof od){const{data:{inkLists:w,rect:S,rotation:_,id:E,color:T,borderStyle:{rawWidth:C},popupRef:N,richText:M,contentsObj:B,creationDate:U,modificationDate:V},parent:{page:{pageNumber:q}}}=t;a=t={annotationType:bt.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:w,boxes:null,pageIndex:q-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:M,comment:B?.str||null,creationDate:U,modificationDate:V}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,p=await super.deserialize(t,e,s);p.color=it.makeHexColor(...o),p.opacity=d||1,u&&(p.#g=t.thickness),p._initialData=a,t.comment&&p.setCommentData(t);const[g,y]=p.pageDimensions,[b,v]=p.pageTranslation;if(l){const w=p.#i=[];for(let S=0;S<l.length;S+=8)w.push({x:(l[S]-b)/g,y:1-(l[S+1]-v)/y,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/y});p.#v(),p.#w(),p.rotate(p.rotation)}else if(u){p.#h=!0;const w=u[0],S={x:w[0]-b,y:y-(w[1]-v)},_=new Lh(S,[0,0,g,y],1,p.#g/2,!0,.001);for(let C=0,N=w.length;C<N;C+=2)S.x=w[C]-b,S.y=y-(w[C+1]-v),_.add(S);const{id:E,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);p.#b({highlightOutlines:_.getOutlines(),highlightId:E,clipPathId:T}),p.#w(),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:e,opacity:this.opacity,thickness:this.#g,quadPoints:this.#F(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#P(s)?null:(s.id=this.annotationElementId,s)}#P(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class sb{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Vt("Not implemented")}}class gt extends ut{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:s}=e.drawLayer.draw(gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Vt("Not implemented")}static get typesMap(){Vt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(gt.#i.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,e[a]]);return t}_updateProperty(t,e,s){const a=this._drawingOptions,o=a[e],l=u=>{a.updateProperty(e,u);const d=this.#t.updateProperty(e,u);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,e,s,a]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[e,1-t,s*(l/o),a*(o/l)];case 180:return[1-t,1-e,s,a];case 270:return[1-e,t,s*(l/o),a*(o/l)];default:return[t,e,s,a]}}#p(){const{x:t,y:e,width:s,height:a,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-e,t,s*(o/l),a*(l/o)];case 180:return[1-t,1-e,s,a];case 270:return[e,1-t,s*(o/l),a*(l/o)];default:return[t,e,s,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:t,y:e,width:s,height:a,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,s];case 2:return[1-t-s,1-e-a,s,a];case 3:return[e,1-t-s,a,s];case 4:return[t,e-s*(u/d),a*(d/u),s*(u/d)];case 5:return[1-e,t,s*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-e,a*(d/u),s*(u/d)];case 7:return[e-s*(u/d),1-t-a*(d/u),s*(u/d),a*(d/u)];case 8:return[t-s,e-a,s,a];case 9:return[1-e,t-s,a,s];case 10:return[1-t,1-e,s,a];case 11:return[e-a,1-t,a,s];case 12:return[t-a*(d/u),e,a*(d/u),s*(u/d)];case 13:return[1-e-s*(u/d),t-a*(d/u),s*(u/d),a*(d/u)];case 14:return[1-t,1-e-s*(u/d),a*(d/u),s*(u/d)];case 15:return[e,1-t,s*(u/d),a*(d/u)];default:return[t,e,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,a,o){Vt("Not implemented")}static startDrawing(t,e,s,a){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:p}=a;if(gt.#a&&gt.#a!==p)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),v=gt.#n=new AbortController,w=t.combinedSignal(v);if(gt.#s||=d,gt.#a??=p,window.addEventListener("pointerup",S=>{gt.#s===S.pointerId?this._endDraw(S):gt.#o?.delete(S.pointerId)},{signal:w}),window.addEventListener("pointercancel",S=>{gt.#s===S.pointerId?this._currentParent.endDrawingSession():gt.#o?.delete(S.pointerId)},{signal:w}),window.addEventListener("pointerdown",S=>{gt.#a===S.pointerType&&((gt.#o||=new Set).add(S.pointerId),gt.#i.isCancellable()&&(gt.#i.removeLastElement(),gt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",rn,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{S.timeStamp===gt.#c&&Jt(S)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),gt.#i){t.drawLayer.updateProperties(this._currentDrawId,gt.#i.startNew(l,u,y,b,g));return}e.updateUIForDefaultProperties(this),gt.#i=this.createDrawerInstance(l,u,y,b,g),gt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(gt.#r.toSVGProperties(),gt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(gt.#c=-1,!gt.#i)return;const{offsetX:e,offsetY:s,pointerId:a}=t;if(gt.#s===a){if(gt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,gt.#i.add(e,s)),gt.#c=t.timeStamp,Jt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,gt.#i=null,gt.#r=null,gt.#a=null,gt.#c=NaN),gt.#n&&(gt.#n.abort(),gt.#n=null,gt.#s=NaN,gt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,gt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=gt.#i,a=this._currentDrawId,o=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ct.DRAW_STEP),!gt.#i.isEmpty()){const{pageDimensions:[s,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:gt.#i.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:gt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,a,o,l){Vt("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:u}}=e.viewport,d=this.deserializeDraw(l,u,a,o,this._INNER_MARGIN,t),p=await super.deserialize(t,e,s);return p.createDrawingOptions(t),p.#l({drawOutlines:d}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[e,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class cE{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new qr;#l;#d;constructor(t,e,s,a,o,l){this.#l=s,this.#d=a,this.#n=o,this.#r=l,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return nt._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#h(t,e);const[s,a,o,l]=this.#t.subarray(2,6),u=t-o,d=e-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#s.push(t,e),isNaN(s)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,l,t,e],0),this.#e.push(...nt.createBezierPoints(s,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,a,o){this.#l=s,this.#d=a,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:s,points:a}=this.#i[t];this.#e=s,this.#s=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=nt.svgRound(this.#e[4]),e=nt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const a=nt.svgRound(this.#e[10]),o=nt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,u,d,p,g,y]=this.#e.slice(a,a+6).map(nt.svgRound);s.push(`C${l} ${u} ${d} ${p} ${g} ${y}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,s,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,s,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class qr extends nt{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,e,s,a,o,l,u){this.#r=e,this.#s=s,this.#a=a,this.#o=o,this.#c=l,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${nt.svgRound(e[4])} ${nt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${nt.svgRound(e[10])} ${nt.svgRound(e[11])}`);continue}for(let s=6,a=e.length;s<a;s+=6){const[o,l,u,d,p,g]=e.subarray(s,s+6).map(nt.svgRound);t.push(`C${o} ${l} ${u} ${d} ${p} ${g}`)}}return t.join("")}serialize([t,e,s,a],o){const l=[],u=[],[d,p,g,y]=this.#d();let b,v,w,S,_,E,T,C,N;switch(this.#o){case 0:N=nt._rescale,b=t,v=e+a,w=s,S=-a,_=t+d*s,E=e+(1-p-y)*a,T=t+(d+g)*s,C=e+(1-p)*a;break;case 90:N=nt._rescaleAndSwap,b=t,v=e,w=s,S=a,_=t+p*s,E=e+d*a,T=t+(p+y)*s,C=e+(d+g)*a;break;case 180:N=nt._rescale,b=t+s,v=e,w=-s,S=a,_=t+(1-d-g)*s,E=e+p*a,T=t+(1-d)*s,C=e+(p+y)*a;break;case 270:N=nt._rescaleAndSwap,b=t+s,v=e+a,w=-s,S=-a,_=t+(1-p-y)*s,E=e+(1-d-g)*a,T=t+(1-p)*s,C=e+(1-d)*a;break}for(const{line:M,points:B}of this.#n)l.push(N(M,b,v,w,S,o?new Array(M.length):null)),u.push(N(B,b,v,w,S,o?new Array(B.length):null));return{lines:l,points:u,rect:[_,E,T,C]}}static deserialize(t,e,s,a,o,{paths:{lines:l,points:u},rotation:d,thickness:p}){const g=[];let y,b,v,w,S;switch(d){case 0:S=nt._rescale,y=-t/s,b=e/a+1,v=1/s,w=-1/a;break;case 90:S=nt._rescaleAndSwap,y=-e/a,b=-t/s,v=1/a,w=1/s;break;case 180:S=nt._rescale,y=t/s+1,b=-e/a,v=-1/s,w=1/a;break;case 270:S=nt._rescaleAndSwap,y=e/a+1,b=t/s+1,v=-1/a,w=-1/s;break}if(!l){l=[];for(const E of u){const T=E.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(T-2));l.push(C);let[N,M,B,U]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,N,M],0);for(let V=4;V<T;V+=2){const q=E[V],Q=E[V+1];C.set(nt.createBezierPoints(N,M,B,U,q,Q),(V-2)*3),[N,M,B,U]=[B,U,q,Q]}}}for(let E=0,T=l.length;E<T;E++)g.push({line:S(l[E].map(C=>C??NaN),y,b,v,w),points:S(u[E].map(C=>C??NaN),y,b,v,w)});const _=new this.prototype.constructor;return _.build(g,s,a,1,d,p,o),_}#l(t=this.#c){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,s,a]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,s-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)it.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],l=a[5];for(let u=6,d=a.length;u<d;u+=6){const[p,g,y,b,v,w]=a.subarray(u,u+6);it.bezierBoundingBox(o,l,p,g,y,b,v,w,t),o=v,l=w}}const[e,s]=this.#l();t[0]=Oe(t[0]-e,0,1),t[1]=Oe(t[1]-s,0,1),t[2]=Oe(t[2]+e,0,1),t[3]=Oe(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,u]=[a-e,o-s],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,e],s){const[a,o]=this.#l();this.#r=t,this.#s=e,this.#a=s;const[l,u]=this.#l(),d=l-a,p=u-o,g=this.#t;return g[0]-=d,g[1]-=p,g[2]+=2*d,g[3]+=2*p,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(nt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,a=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,u=t;break;case 180:s=-1,l=-1,u=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${s} ${a} ${o} ${l} ${nt.svgRound(u)} ${nt.svgRound(d)})`}getPathResizingSVGProperties([t,e,s,a]){const[o,l]=this.#l(),[u,d,p,g]=this.#t;if(Math.abs(p-o)<=nt.PRECISION||Math.abs(g-l)<=nt.PRECISION){const S=t+s/2-(u+p/2),_=e+a/2-(d+g/2);return{path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${_})`}}}const y=(s-2*o)/(p-2*o),b=(a-2*l)/(g-2*l),v=p/s,w=g/a;return{path:{"transform-origin":`${nt.svgRound(u)} ${nt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${nt.svgRound(o)} ${nt.svgRound(l)}) scale(${y} ${b}) translate(${nt.svgRound(-o)} ${nt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,s,a]){const[o,l]=this.#l(),u=this.#t,[d,p,g,y]=u;if(u[0]=t,u[1]=e,u[2]=s,u[3]=a,Math.abs(g-o)<=nt.PRECISION||Math.abs(y-l)<=nt.PRECISION){const _=t+s/2-(d+g/2),E=e+a/2-(p+y/2);for(const{line:T,points:C}of this.#n)nt._translate(T,_,E,T),nt._translate(C,_,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),v=(a-2*l)/(y-2*l),w=-b*(d+o)+t+o,S=-v*(p+l)+e+l;if(b!==1||v!==1||w!==0||S!==0)for(const{line:_,points:E}of this.#n)nt._rescale(_,w,S,b,v,_),nt._rescale(E,w,S,b,v,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[a,o]=s,l=this.#t,u=t-l[0],d=e-l[1];if(this.#r===a&&this.#s===o)for(const{line:p,points:g}of this.#n)nt._translate(p,u,d,p),nt._translate(g,u,d,g);else{const p=this.#r/a,g=this.#s/o;this.#r=a,this.#s=o;for(const{line:y,points:b}of this.#n)nt._rescale(y,u,d,p,g,y),nt._rescale(b,u,d,p,g,b);l[2]*=p,l[3]*=g}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t[0])} ${nt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Fl extends sb{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ut._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Fl(this._viewParameters);return t.updateAll(this),t}}class cd extends gt{static _type="ink";static _editorType=bt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ut.initialize(t,e),this._defaultDrawingOptions=new Fl(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return St(this,"typesMap",new Map([[Ct.INK_THICKNESS,"stroke-width"],[Ct.INK_COLOR,"stroke"],[Ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,a,o){return new cE(t,e,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,a,o,l){return qr.deserialize(t,e,s,a,o,l)}static async deserialize(t,e,s){let a=null;if(t instanceof od){const{data:{inkLists:l,rect:u,rotation:d,id:p,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:v,richText:w,contentsObj:S,creationDate:_,modificationDate:E},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:bt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:v,richText:w,comment:S?.str||null,creationDate:_,modificationDate:E}}const o=await super.deserialize(t,e,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new kr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=cd.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:ut._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:e,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Oh extends qr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const vl=8,Er=3;class is{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,a){return s-=t,a-=e,s===0?a>0?0:4:s===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let p=0;p<8;p++){const g=(-p+d-u+16)%8,y=this.#i[2*g],b=this.#i[2*g+1];if(t[(s+y)*e+(a+b)]!==0)return g}return-1}static#r(t,e,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let p=0;p<8;p++){const g=(p+d+u+16)%8,y=this.#i[2*g],b=this.#i[2*g+1];if(t[(s+y)*e+(a+b)]!==0)return g}return-1}static#s(t,e,s,a){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=a?1:0;for(let g=1;g<s-1;g++)l[g*e]=l[g*e+e-1]=0;for(let g=0;g<e;g++)l[g]=l[e*s-1-g]=0;let u=1,d;const p=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<e-1;y++){const b=g*e+y,v=l[b];if(v===0)continue;let w=g,S=y;if(v===1&&l[b-1]===0)u+=1,S-=1;else if(v>=1&&l[b+1]===0)u+=1,S+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const _=[y,g],E=S===y+1,T={isHole:E,points:_,id:u,parent:0};p.push(T);let C;for(const Z of p)if(Z.id===d){C=Z;break}C?C.isHole?T.parent=E?C.parent:d:T.parent=E?d:C.parent:T.parent=E?d:0;const N=this.#n(l,e,g,y,w,S,0);if(N===-1){l[b]=-u,l[b]!==1&&(d=Math.abs(l[b]));continue}let M=this.#i[2*N],B=this.#i[2*N+1];const U=g+M,V=y+B;w=U,S=V;let q=g,Q=y;for(;;){const Z=this.#r(l,e,q,Q,w,S,1);M=this.#i[2*Z],B=this.#i[2*Z+1];const lt=q+M,ht=Q+B;_.push(ht,lt);const rt=q*e+Q;if(l[rt+1]===0?l[rt]=-u:l[rt]===1&&(l[rt]=u),lt===g&&ht===y&&q===U&&Q===V){l[b]!==1&&(d=Math.abs(l[b]));break}else w=q,S=Q,q=lt,Q=ht}}}return p}static#a(t,e,s,a){if(s-e<=4){for(let U=e;U<s-2;U+=2)a.push(t[U],t[U+1]);return}const o=t[e],l=t[e+1],u=t[s-4]-o,d=t[s-3]-l,p=Math.hypot(u,d),g=u/p,y=d/p,b=g*l-y*o,v=d/u,w=1/p,S=Math.atan(v),_=Math.cos(S),E=Math.sin(S),T=w*(Math.abs(_)+Math.abs(E)),C=w*(1-T+T**2),N=Math.max(Math.atan(Math.abs(E+_)*C),Math.atan(Math.abs(E-_)*C));let M=0,B=e;for(let U=e+2;U<s-2;U+=2){const V=Math.abs(b-g*t[U+1]+y*t[U]);V>M&&(B=U,M=V)}M>(p*N)**2?(this.#a(t,e,B+2,a),this.#a(t,B,s,a)):a.push(o,l)}static#o(t){const e=[],s=t.length;return this.#a(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#c(t,e,s,a,o,l){const u=new Float32Array(l**2),d=-2*a**2,p=l>>1;for(let S=0;S<l;S++){const _=(S-p)**2;for(let E=0;E<l;E++)u[S*l+E]=Math.exp((_+(E-p)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,v=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let _=0;_<e;_++){const E=S*e+_,T=t[E];let C=0,N=0;for(let B=0;B<l;B++){const U=S+B-p;if(!(U<0||U>=s))for(let V=0;V<l;V++){const q=_+V-p;if(q<0||q>=e)continue;const Q=t[U*e+q],Z=u[B*l+V]*g[Math.abs(Q-T)];C+=Q*Z,N+=Z}}const M=v[E]=Math.round(C/N);w[M]++}return[v,w]}static#l(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#d(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const p=s[u]=t[u<<2];a=Math.max(a,p),o=Math.min(o,p)}const l=255/(a-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let e,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(e=o;e<256;e++){const d=t[e];d>s&&(e-l>a&&(a=e-l,u=e-1),s=d,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let l=s,u=a;if(s>o||a>o){let b=s,v=a,w=Math.log2(Math.max(s,a)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){l=Math.ceil(b/2),u=Math.ceil(v/2);const T=new OffscreenCanvas(l,u);T.getContext("2d").drawImage(t,0,0,b,v,0,0,l,u),b=l,v=u,t!==e&&t.close(),t=T.transferToImageBitmap()}const _=Math.min(o/l,o/u);l=Math.round(l*_),u=Math.round(u*_)}const p=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,l,u),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,l,u);const g=p.getImageData(0,0,l,u).data;return[this.#d(g),l,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:a},o,l,u,d){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:E,fontBoundingBoxDescent:T,width:C}=g.measureText(t),N=1.5,M=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||0,C)*N),B=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||y,Math.abs(E)+Math.abs(T)||y)*N);p=new OffscreenCanvas(M,B),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,M,B),g.fillStyle="black",g.fillText(t,M*(N-1)/2,B*(3-N)/2);const U=this.#d(g.getImageData(0,0,M,B).data),V=this.#l(U),q=this.#h(V),Q=this.#s(U,M,B,q);return this.processDrawnLines({lines:{curves:Q,width:M,height:B},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,s,a,o){const[l,u,d]=this.#f(t),[p,g]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#s(p,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:l,areContours:u}){a%180!==0&&([e,s]=[s,e]);const{curves:d,width:p,height:g}=t,y=t.thickness??0,b=[],v=Math.min(e/p,s/g),w=v/e,S=v/s,_=[];for(const{points:T}of d){const C=l?this.#o(T):T;if(!C)continue;_.push(C);const N=C.length,M=new Float32Array(N),B=new Float32Array(3*(N===2?2:N-2));if(b.push({line:B,points:M}),N===2){M[0]=C[0]*w,M[1]=C[1]*S,B.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[U,V,q,Q]=C;U*=w,V*=S,q*=w,Q*=S,M.set([U,V,q,Q],0),B.set([NaN,NaN,NaN,NaN,U,V],0);for(let Z=4;Z<N;Z+=2){const lt=M[Z]=C[Z]*w,ht=M[Z+1]=C[Z+1]*S;B.set(nt.createBezierPoints(U,V,q,Q,lt,ht),(Z-2)*3),[U,V,q,Q]=[q,Q,lt,ht]}}if(b.length===0)return null;const E=u?new Oh:new qr;return E.build(b,e,s,1,a,u?0:y,o),{outline:E,newCurves:_,areContours:u,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:a,height:o}){let l=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let N=2,M=C.length;N<M;N++){const B=C[N]-C[N-2];l=Math.min(l,B),u=Math.max(u,B)}}let p;l>=-128&&u<=127?p=Int8Array:l>=-32768&&u<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=vl+Er*g,b=new Uint32Array(y);let v=0;b[v++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*p.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=a,b[v++]=o,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(s??0)),b[v++]=g,b[v++]=p.BYTES_PER_ELEMENT;for(const C of t)b[v++]=C.length-2,b[v++]=C[0],b[v++]=C[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const _=p.prototype.constructor;for(const C of t){const N=new _(C.length-2);for(let M=2,B=C.length;M<B;M++)N[M-2]=C[M]-C[M-2];S.write(N)}S.close();const E=await new Response(w.readable).arrayBuffer(),T=new Uint8Array(E);return _y(T)}static async decompressSignature(t){try{const e=kS(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const C of s)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,u),u+=C.length;const d=new Uint32Array(l.buffer,0,l.length>>2),p=d[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=d[2],y=d[3],b=d[4]===0,v=d[5],w=d[6],S=d[7],_=[],E=(vl+Er*w)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,E);break}u=0;for(let C=0;C<w;C++){const N=d[Er*C+vl],M=new Float32Array(N+2);_.push(M);for(let B=0;B<Er-1;B++)M[B]=d[Er*C+vl+B+1];for(let B=0;B<N;B++)M[B+2]=M[B]+T[u++]}return{areContours:b,thickness:v,outlines:_,width:g,height:y}}catch(e){return vt(`decompressSignature: ${e}`),null}}}class ud extends sb{constructor(){super(),super.updateProperties({fill:ut._defaultLineColor,"stroke-width":0})}clone(){const t=new ud;return t.updateAll(this),t}}class hd extends Fl{constructor(t){super(t),super.updateProperties({stroke:ut._defaultLineColor,"stroke-width":1})}clone(){const t=new hd(this._viewParameters);return t.updateAll(this),t}}class Pn extends gt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=bt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ut.initialize(t,e),this._defaultDrawingOptions=new ud,this._defaultDrawnSignatureOptions=new hd(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return St(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:p}=this.#i,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,v=is.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:b,innerMargin:Pn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(v,p,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:a,height:o}=this.#i,l=Math.max(a,o),u=is.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,a){const{x:o,y:l}=this,{outline:u}=this.#i=t;this.#t=u instanceof Oh,this.description=s;let d;this.#t?d=Pn.getDefaultDrawingOptions():(d=Pn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,p]=this.pageDimensions;let g=e/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return is.process(t,e,s,a,Pn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return is.extractContoursFromText(t,e,s,a,o,Pn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return is.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:Pn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Pn.getDefaultDrawingOptions():(this._drawingOptions=Pn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,s,a,o,l){return l.areContours?Oh.deserialize(t,e,s,a,o,l):qr.deserialize(t,e,s,a,o,l)}static async deserialize(t,e,s){const a=await super.deserialize(t,e,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class uE extends ut{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=bt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ut.initialize(t,e)}static isHandlingMimeForPasting(t){return Cl.includes(t)}static paste(t,e){e.pasteEditor({mode:bt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Cl.join(",");const e=this._uiManager._signal;this.#i=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:e,height:s}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,s=this.height*o;else if(e>l*a||s>l*o){const d=Math.min(l*a/e,l*o/s);e*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new En;let u=this.#t,d=a,p=o,g=null;if(e){if(a>e||o>e){const B=Math.min(e/a,e/o);d=Math.floor(a*B),p=Math.floor(o*B)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*l.sx),v=g.height=Math.ceil(p*l.sy);this.#l||(u=this.#u(b,v));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":FS.isDarkMode&&(S="#8f8f9d",_="#42414d");const E=15,T=E*l.sx,C=E*l.sy,N=new OffscreenCanvas(T*2,C*2),M=N.getContext("2d");M.fillStyle=S,M.fillRect(0,0,T*2,C*2),M.fillStyle=_,M.fillRect(0,0,T,C),M.fillRect(T,C,T,C),w.fillStyle=w.createPattern(N,"repeat"),w.fillRect(0,0,b,v),w.drawImage(u,0,0,u.width,u.height,0,0,b,v)}let y=null;if(s){let b,v;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,v=u.height;else if(u=this.#t,a>t||o>t){const _=Math.min(t/a,t/o);b=Math.floor(a*_),v=Math.floor(o*_),this.#l||(u=this.#u(b,v))}const S=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,v),y={width:b,height:v,data:S.getImageData(0,0,b,v).data}}return{canvas:g,width:d,height:p,imageData:y}}#u(t,e){const{width:s,height:a}=this.#t;let o=s,l=a,u=this.#t;for(;o>2*t||l>2*e;){const d=o,p=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(u,0,0,d,p,0,0,o,l),u=g.transferToImageBitmap()}return u}#g(){const[t,e]=this.parentDimensions,{width:s,height:a}=this,o=new En,l=Math.ceil(s*t*o.sx),u=Math.ceil(a*e*o.sy),d=this.#a;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const p=this.#l?this.#t:this.#u(l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,l,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,s]=this.pageDimensions,a=Math.round(this.width*e*ls.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ls.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let a=null,o=!1;if(t instanceof eb){const{data:{rect:S,rotation:_,id:E,structParent:T,popupRef:C,richText:N,contentsObj:M,creationDate:B,modificationDate:U},container:V,parent:{page:{pageNumber:q}},canvas:Q}=t;let Z,lt;Q?(delete t.canvas,{id:Z,bitmap:lt}=s.imageManager.getFromCanvas(V.id,Q),Q.remove()):(o=!0,t._hasNoCanvas=!0);const ht=(await e._structTree.getAriaAttributes(`${$h}${E}`))?.get("aria-label")||"";a=t={annotationType:bt.STAMP,bitmapId:Z,bitmap:lt,pageIndex:q-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:ht},isSvg:!1,structParent:T,popupRef:C,richText:N,comment:M?.str||null,creationDate:B,modificationDate:U}}const l=await super.deserialize(t,e,s),{rect:u,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#n=p,l.#l=y;const[v,w]=l.pageDimensions;return l.width=(u[2]-u[0])/v,l.height=(u[3]-u[1])/w,b&&(l.altTextData=b),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(e===null)return s;e.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Fn{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([Ae,cd,uE,ce,Pn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:p,l10n:g}){const y=[...Fn.#g.values()];if(!Fn._initialized){Fn._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=s,this.#t=o,this.#i=l,this.viewport=p,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===bt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case bt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===bt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const s of Fn.#g.values())e.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=this.#i;if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const s=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:d}=a,p=this.#p;if(d-p>500){this.#p=d;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const y=document.elementsFromPoint(l,u);if(g.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const v=new RegExp(`^${Dr}[0-9]+$`);for(const S of y)if(v.test(S.id)){b=S.id;break}if(!b)return;const w=this.#s.get(b);w?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),w.dblclick(a))},{signal:s,capture:!0})}const t=this.#i;if(t){const s=new Map,a=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let d=a.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=s.get(u),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const s of Fn.#g.values())e.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:s}=we.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ce.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ut.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getEditorByUID(t){for(const e of this.#s.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return Fn.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#x(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#E(),o=this.getNextId(),l=this.#x({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Fn.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,s={}){const a=this.getNextId(),o=this.#x({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#E(){const{x:t,y:e,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,e+a),p=(o+u)/2-t,g=(l+d)/2-e,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=we.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===bt.STAMP||s===bt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=we.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,s){const a=this.#u.findParent(e,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Pi(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Pi(this.div,{rotation:s}),e!==s)for(const a of this.#s.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Se{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return St(this,"_svgFactory",new Pr)}static#r(t,[e,s,a,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=Se._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const s=Se._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${e}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Se._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[s,a]of Object.entries(e))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,e=!1,s=!1){const a=Se.#n++,o=this.#s(),l=Se._svgFactory.createElement("defs");o.append(l);const u=Se._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,u);const p=s?this.#a(l,d):null,g=Se._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${p})`}}drawOutline(t,e){const s=Se.#n++,a=this.#s(),o=Se._svgFactory.createElement("defs");a.append(o);const l=Se._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Se._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Se._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=Se._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const p=Se._svgFactory.createElement("use");a.append(p),p.setAttribute("href",`#${u}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return a.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:a,rootClass:o,path:l}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),a&&Se.#r(u,a),o){const{classList:d}=u;for(const[p,g]of Object.entries(o))d.toggle(p,g)}if(l){const p=u.firstChild.firstChild;this.#o(p,l)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Dh};globalThis.pdfjsLib={AbortException:ri,AnnotationEditorLayer:Fn,AnnotationEditorParamsType:Ct,AnnotationEditorType:bt,AnnotationEditorUIManager:oi,AnnotationLayer:ld,AnnotationMode:Un,AnnotationType:le,applyOpacity:My,build:Ky,ColorPicker:nn,createValidAbsoluteUrl:qh,CSSConstants:Ry,DOMSVGFactory:Pr,DrawLayer:Se,FeatureTest:we,fetchData:ba,findContrastColor:Dy,getDocument:id,getFilenameFromUrl:xy,getPdfFilenameFromUrl:Ty,getRGB:va,getUuid:Yh,getXfaPageViewport:Cy,GlobalWorkerOptions:ki,ImageKind:Cr,InvalidPDFException:xl,isDataScheme:Ir,isPdfFile:Pl,isValidExplicitDest:ky,MathClamp:Oe,noContextMenu:rn,normalizeUnicode:Ey,OPS:ha,OutputScale:En,PasswordResponses:Sy,PDFDataRangeTransport:ad,PDFDateString:Tl,PDFWorker:da,PermissionFlag:Ay,PixelsPerInch:ls,RenderingCancelledException:kl,renderRichText:Kh,ResponseException:Lr,setLayerDimensions:Pi,shadow:St,SignatureExtractor:is,stopEvent:Jt,SupportedImageMimeTypes:Cl,TextLayer:Nr,TouchManager:Gr,updateUrlHash:Xh,Util:it,VerbosityLevel:Ur,version:Wy,XfaLayer:Wh};const hE=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ri,AnnotationEditorLayer:Fn,AnnotationEditorParamsType:Ct,AnnotationEditorType:bt,AnnotationEditorUIManager:oi,AnnotationLayer:ld,AnnotationMode:Un,AnnotationType:le,CSSConstants:Ry,ColorPicker:nn,DOMSVGFactory:Pr,DrawLayer:Se,FeatureTest:we,GlobalWorkerOptions:ki,ImageKind:Cr,InvalidPDFException:xl,MathClamp:Oe,OPS:ha,OutputScale:En,PDFDataRangeTransport:ad,PDFDateString:Tl,PDFWorker:da,PasswordResponses:Sy,PermissionFlag:Ay,PixelsPerInch:ls,RenderingCancelledException:kl,ResponseException:Lr,SignatureExtractor:is,SupportedImageMimeTypes:Cl,TextLayer:Nr,TouchManager:Gr,Util:it,VerbosityLevel:Ur,XfaLayer:Wh,applyOpacity:My,build:Ky,createValidAbsoluteUrl:qh,fetchData:ba,findContrastColor:Dy,getDocument:id,getFilenameFromUrl:xy,getPdfFilenameFromUrl:Ty,getRGB:va,getUuid:Yh,getXfaPageViewport:Cy,isDataScheme:Ir,isPdfFile:Pl,isValidExplicitDest:ky,noContextMenu:rn,normalizeUnicode:Ey,renderRichText:Kh,setLayerDimensions:Pi,shadow:St,stopEvent:Jt,updateUrlHash:Xh,version:Wy},Symbol.toStringTag,{value:"Module"}));function ab(h){var t,e,s="";if(typeof h=="string"||typeof h=="number")s+=h;else if(typeof h=="object")if(Array.isArray(h)){var a=h.length;for(t=0;t<a;t++)h[t]&&(e=ab(h[t]))&&(s&&(s+=" "),s+=e)}else for(e in h)h[e]&&(s&&(s+=" "),s+=e);return s}function Ul(){for(var h,t,e=0,s="",a=arguments.length;e<a;e++)(h=arguments[e])&&(t=ab(h))&&(s&&(s+=" "),s+=t);return s}var Ym=Object.prototype.hasOwnProperty;function $m(h,t,e){for(e of h.keys())if(la(e,t))return e}function la(h,t){var e,s,a;if(h===t)return!0;if(h&&t&&(e=h.constructor)===t.constructor){if(e===Date)return h.getTime()===t.getTime();if(e===RegExp)return h.toString()===t.toString();if(e===Array){if((s=h.length)===t.length)for(;s--&&la(h[s],t[s]););return s===-1}if(e===Set){if(h.size!==t.size)return!1;for(s of h)if(a=s,a&&typeof a=="object"&&(a=$m(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(h.size!==t.size)return!1;for(s of h)if(a=s[0],a&&typeof a=="object"&&(a=$m(t,a),!a)||!la(s[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)h=new Uint8Array(h),t=new Uint8Array(t);else if(e===DataView){if((s=h.byteLength)===t.byteLength)for(;s--&&h.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(h)){if((s=h.byteLength)===t.byteLength)for(;s--&&h[s]===t[s];);return s===-1}if(!e||typeof h=="object"){s=0;for(e in h)if(Ym.call(h,e)&&++s&&!Ym.call(t,e)||!(e in t)||!la(h[e],t[e]))return!1;return Object.keys(t).length===s}}return h!==h&&t!==t}function Xr(h){let t=!1;return{promise:new Promise((s,a)=>{h.then(o=>!t&&s(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const dE=["onCopy","onCut","onPaste"],fE=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],pE=["onFocus","onBlur"],gE=["onInput","onInvalid","onReset","onSubmit"],mE=["onLoad","onError"],yE=["onKeyDown","onKeyPress","onKeyUp"],bE=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],vE=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],AE=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],SE=["onSelect"],wE=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],EE=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],_E=["onScroll"],xE=["onWheel"],TE=["onAnimationStart","onAnimationEnd","onAnimationIteration"],CE=["onTransitionEnd"],RE=["onToggle"],ME=["onChange"],DE=[...dE,...fE,...pE,...gE,...mE,...yE,...bE,...vE,...AE,...SE,...wE,...EE,..._E,...xE,...TE,...CE,...ME,...RE];function rb(h,t){const e={};for(const s of DE){const a=h[s];a&&(t?e[s]=(o=>a(o,t(s))):e[s]=a)}return e}var LE="Invariant failed";function Gt(h,t){if(!h)throw new Error(LE)}var vh,Wm;function OE(){if(Wm)return vh;Wm=1;var h=function(){};return vh=h,vh}var NE=OE();const Ne=Ov(NE),ob=L.createContext(null),kE="noopener noreferrer nofollow";class PE{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Gt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Gt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,s){t.href=e,t.rel=this.externalLinkRel||kE,t.target=s?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{Gt(this.pdfDocument),Gt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Gt(Array.isArray(e));const s=e[0];new Promise(a=>{Gt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{a(o)}).catch(()=>{Gt(!1)}):typeof s=="number"?a(s):Gt(!1)}).then(a=>{const o=a+1;Gt(this.pdfViewer),Gt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}goToPage(t){const e=t-1;Gt(this.pdfViewer),Gt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function ca({children:h,type:t}){return I.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:h})}const Km={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function BE(h,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return h}}function fa(){return L.useReducer(BE,{value:void 0,error:void 0})}const zl=typeof window<"u",lb=zl&&window.location.protocol==="file:";function FE(h){return typeof h<"u"}function ns(h){return FE(h)&&h!==null}function UE(h){return typeof h=="string"}function zE(h){return h instanceof ArrayBuffer}function HE(h){return Gt(zl),h instanceof Blob}function Nh(h){return UE(h)&&/^data:/.test(h)}function Qm(h){Gt(Nh(h));const[t="",e=""]=h.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function IE(){return zl&&window.devicePixelRatio||1}const cb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Zm(){Ne(!lb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${cb}`)}function jE(){Ne(!lb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${cb}`)}function us(h){h?.cancel&&h.cancel()}function kh(h,t){return Object.defineProperty(h,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(h,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(h,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(h,"originalHeight",{get(){return this.view[3]},configurable:!0}),h}function GE(h){return h.name==="RenderingCancelledException"}function VE(h){return new Promise((t,e)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return e(new Error("Error while reading a file."));t(s.result)},s.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},s.readAsArrayBuffer(h)})}const{PDFDataRangeTransport:qE}=hE,XE=(h,t)=>{switch(t){case Km.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");h(e);break}case Km.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");h(e);break}}};function Jm(h){return typeof h=="object"&&h!==null&&("data"in h||"range"in h||"url"in h)}const YE=L.forwardRef(function({children:t,className:e,error:s="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:d,loading:p="Loading PDF",noData:g="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:v,onLoadSuccess:w,onPassword:S=XE,onSourceError:_,onSourceSuccess:E,options:T,renderMode:C,rotate:N,scale:M,...B},U){const[V,q]=fa(),{value:Q,error:Z}=V,[lt,ht]=fa(),{value:rt,error:ct}=lt,k=L.useRef(new PE),G=L.useRef([]),tt=L.useRef(void 0),dt=L.useRef(void 0);l&&l!==tt.current&&Jm(l)&&(Ne(!la(l,tt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),tt.current=l),T&&T!==dt.current&&(Ne(!la(T,dt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),dt.current=T);const D=L.useRef({scrollPageIntoView:Mt=>{const{dest:Bt,pageNumber:ae,pageIndex:ue=ae-1}=Mt;if(y){y({dest:Bt,pageIndex:ue,pageNumber:ae});return}const Ee=G.current[ue];if(Ee){Ee.scrollIntoView();return}Ne(!1,`An internal link leading to page ${ae} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});L.useImperativeHandle(U,()=>({linkService:k,pages:G,viewer:D}),[]);function $(){E&&E()}function J(){Z&&(Ne(!1,Z.toString()),_&&_(Z))}function K(){q({type:"RESET"})}L.useEffect(K,[l,q]);const et=L.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Nh(l)?{data:Qm(l)}:(Zm(),{url:l});if(l instanceof qE)return{range:l};if(zE(l))return{data:l};if(zl&&HE(l))return{data:await VE(l)};if(Gt(typeof l=="object"),Gt(Jm(l)),"url"in l&&typeof l.url=="string"){if(Nh(l.url)){const{url:Mt,...Bt}=l;return{data:Qm(Mt),...Bt}}Zm()}return l},[l]);L.useEffect(()=>{const Mt=Xr(et());return Mt.promise.then(Bt=>{q({type:"RESOLVE",value:Bt})}).catch(Bt=>{q({type:"REJECT",error:Bt})}),()=>{us(Mt)}},[et,q]),L.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){J();return}$()}},[Q]);function yt(){rt&&(w&&w(rt),G.current=new Array(rt.numPages),k.current.setDocument(rt))}function at(){ct&&(Ne(!1,ct.toString()),b&&b(ct))}L.useEffect(function(){ht({type:"RESET"})},[ht,Q]),L.useEffect(function(){if(!Q)return;const Bt=T?{...Q,...T}:Q,ae=id(Bt);v&&(ae.onProgress=v),S&&(ae.onPassword=S);const ue=ae,Ee=ue.promise.then(Bi=>{ht({type:"RESOLVE",value:Bi})}).catch(Bi=>{ue.destroyed||ht({type:"REJECT",error:Bi})});return()=>{Ee.finally(()=>ue.destroy())}},[T,ht,Q]),L.useEffect(()=>{if(!(typeof rt>"u")){if(rt===!1){at();return}yt()}},[rt]),L.useEffect(function(){k.current.setViewer(D.current),k.current.setExternalLinkRel(a),k.current.setExternalLinkTarget(o)},[a,o]);const wt=L.useCallback((Mt,Bt)=>{G.current[Mt]=Bt},[]),Rt=L.useCallback(Mt=>{delete G.current[Mt]},[]),Xt=L.useMemo(()=>({imageResourcesPath:d,linkService:k.current,onItemClick:y,pdf:rt,registerPage:wt,renderMode:C,rotate:N,scale:M,unregisterPage:Rt}),[d,y,rt,wt,C,N,M,Rt]),It=L.useMemo(()=>rb(B,()=>rt),[B,rt]);function Ue(){function Mt(ae){return!!ae?.pdf}if(!Mt(Xt))throw new Error("pdf is undefined");const Bt=typeof t=="function"?t(Xt):t;return I.jsx(ob.Provider,{value:Xt,children:Bt})}function Ye(){return l?rt==null?I.jsx(ca,{type:"loading",children:typeof p=="function"?p():p}):rt===!1?I.jsx(ca,{type:"error",children:typeof s=="function"?s():s}):Ue():I.jsx(ca,{type:"no-data",children:typeof g=="function"?g():g})}return I.jsx("div",{className:Ul("react-pdf__Document",e),ref:u,...It,children:Ye()})});function ub(){return L.useContext(ob)}function hb(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];var e=h.filter(Boolean);if(e.length<=1){var s=e[0];return s||null}return function(o){for(var l=0,u=e;l<u.length;l++){var d=u[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const db=L.createContext(null);function Hl(){return L.useContext(db)}function $E(){const h=ub(),t=Hl();Gt(t);const e={...h,...t},{imageResourcesPath:s,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:p,pdf:g,renderForms:y,rotate:b,scale:v=1}=e;Gt(g),Gt(p),Gt(a);const[w,S]=fa(),{value:_,error:E}=w,T=L.useRef(null);Ne(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){_&&l&&l(_)}function N(){E&&(Ne(!1,E.toString()),o&&o(E))}L.useEffect(function(){S({type:"RESET"})},[S,p]),L.useEffect(function(){if(!p)return;const q=Xr(p.getAnnotations()),Q=q;return q.promise.then(Z=>{S({type:"RESOLVE",value:Z})}).catch(Z=>{S({type:"REJECT",error:Z})}),()=>{us(Q)}},[S,p]),L.useEffect(()=>{if(_!==void 0){if(_===!1){N();return}C()}},[_]);function M(){d&&d()}function B(V){Ne(!1,`${V}`),u&&u(V)}const U=L.useMemo(()=>p.getViewport({scale:v,rotation:b}),[p,b,v]);return L.useEffect(function(){if(!g||!p||!a||!_)return;const{current:q}=T;if(!q)return;const Q=U.clone({dontFlip:!0}),Z={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:q,l10n:null,linkService:a,page:p,structTreeLayer:null,viewport:Q},lt={annotations:_,annotationStorage:g.annotationStorage,div:q,imageResourcesPath:s,linkService:a,page:p,renderForms:y,viewport:Q};q.innerHTML="";try{new ld(Z).render(lt),M()}catch(ht){B(ht)}return()=>{}},[_,s,a,p,g,y,U]),I.jsx("div",{className:Ul("react-pdf__Page__annotations","annotationLayer"),ref:T})}const fb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},WE=/^H(\d+)$/;function KE(h){return h in fb}function Il(h){return"children"in h}function pb(h){return Il(h)?h.children.length===1&&0 in h.children&&"id"in h.children[0]:!1}function QE(h){const t={};if(Il(h)){const{role:e}=h,s=e.match(WE);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(KE(e)){const a=fb[e];a&&(t.role=a)}}return t}function gb(h){const t={};if(Il(h)){if(h.alt!==void 0&&(t["aria-label"]=h.alt),h.lang!==void 0&&(t.lang=h.lang),pb(h)){const[e]=h.children;if(e){const s=gb(e);return{...t,...s}}}}else"id"in h&&(t["aria-owns"]=h.id);return t}function ZE(h){return h?{...QE(h),...gb(h)}:null}function mb({className:h,node:t}){const e=L.useMemo(()=>ZE(t),[t]),s=L.useMemo(()=>!Il(t)||pb(t)?null:t.children.map((a,o)=>I.jsx(mb,{node:a},o)),[t]);return I.jsx("span",{className:h,...e,children:s})}function JE(){const h=Hl();Gt(h);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=h,[s,a]=fa(),{value:o,error:l}=s,{customTextRenderer:u,page:d}=h;function p(){o&&e&&e(o)}function g(){l&&(Ne(!1,l.toString()),t&&t(l))}return L.useEffect(function(){a({type:"RESET"})},[a,d]),L.useEffect(function(){if(u||!d)return;const b=Xr(d.getStructTree()),v=b;return b.promise.then(w=>{a({type:"RESOLVE",value:w})}).catch(w=>{a({type:"REJECT",error:w})}),()=>us(v)},[u,d,a]),L.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?I.jsx(mb,{className:"react-pdf__Page__structTree structTree",node:o}):null}const ty=Un;function t1(h){const t=Hl();Gt(t);const e={...t,...h},{_className:s,canvasBackground:a,devicePixelRatio:o=IE(),onRenderError:l,onRenderSuccess:u,page:d,renderForms:p,renderTextLayer:g,rotate:y,scale:b}=e,{canvasRef:v}=h;Gt(d);const w=L.useRef(null);function S(){d&&u&&u(kh(d,b))}function _(N){GE(N)||(Ne(!1,N.toString()),l&&l(N))}const E=L.useMemo(()=>d.getViewport({scale:b*o,rotation:y}),[o,d,y,b]),T=L.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);L.useEffect(function(){if(!d)return;d.cleanup();const{current:M}=w;if(!M)return;M.width=E.width,M.height=E.height,M.style.width=`${Math.floor(T.width)}px`,M.style.height=`${Math.floor(T.height)}px`,M.style.visibility="hidden";const B={annotationMode:p?ty.ENABLE_FORMS:ty.ENABLE,canvas:M,canvasContext:M.getContext("2d",{alpha:!1}),viewport:E};a&&(B.background=a);const U=d.render(B),V=U;return U.promise.then(()=>{M.style.visibility="",S()}).catch(_),()=>us(V)},[a,d,p,E,T]);const C=L.useCallback(()=>{const{current:N}=w;N&&(N.width=0,N.height=0)},[]);return L.useEffect(()=>C,[C]),I.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:hb(v,w),style:{display:"block",userSelect:"none"},children:g?I.jsx(JE,{}):null})}function e1(h){return"str"in h}function n1(){const h=Hl();Gt(h);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:d,rotate:p,scale:g}=h;Gt(l);const[y,b]=fa(),{value:v,error:w}=y,S=L.useRef(null);Ne(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){v&&s&&s(v)}function E(){w&&(Ne(!1,w.toString()),e&&e(w))}L.useEffect(function(){b({type:"RESET"})},[l,b]),L.useEffect(function(){if(!l)return;const V=Xr(l.getTextContent()),q=V;return V.promise.then(Q=>{b({type:"RESOLVE",value:Q})}).catch(Q=>{b({type:"REJECT",error:Q})}),()=>us(q)},[l,b]),L.useEffect(()=>{if(v!==void 0){if(v===!1){E();return}_()}},[v]);const T=L.useCallback(()=>{o&&o()},[o]),C=L.useCallback(U=>{Ne(!1,U.toString()),a&&a(U)},[a]);function N(){const U=S.current;U&&U.classList.add("selecting")}function M(){const U=S.current;U&&U.classList.remove("selecting")}const B=L.useMemo(()=>l.getViewport({scale:g,rotation:p}),[l,p,g]);return L.useLayoutEffect(function(){if(!l||!v)return;const{current:V}=S;if(!V)return;V.innerHTML="";const q=l.streamTextContent({includeMarkedContent:!0}),Q={container:V,textContentSource:q,viewport:B},Z=new Nr(Q),lt=Z;return Z.render().then(()=>{const ht=document.createElement("div");ht.className="endOfContent",V.append(ht);const rt=V.querySelectorAll('[role="presentation"]');if(t){let ct=0;v.items.forEach((k,G)=>{if(!e1(k))return;const tt=rt[ct];if(!tt)return;const dt=t({pageIndex:u,pageNumber:d,itemIndex:G,...k});tt.innerHTML=dt,ct+=k.str&&k.hasEOL?2:1})}T()}).catch(C),()=>us(lt)},[t,C,T,l,u,d,v,B]),I.jsx("div",{className:Ul("react-pdf__Page__textContent","textLayer"),onMouseUp:M,onMouseDown:N,ref:S})}const ey=1;function i1(h){const e={...ub(),...h},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:u,className:d,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",height:v,inputRef:w,loading:S="Loading page",noData:_="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:N,onGetTextError:M,onGetTextSuccess:B,onLoadError:U,onLoadSuccess:V,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:Q,onRenderError:Z,onRenderSuccess:lt,onRenderTextLayerError:ht,onRenderTextLayerSuccess:rt,pageIndex:ct,pageNumber:k,pdf:G,registerPage:tt,renderAnnotationLayer:dt=!0,renderForms:D=!1,renderMode:$="canvas",renderTextLayer:J=!0,rotate:K,scale:et=ey,unregisterPage:yt,width:at,...wt}=e,[Rt,Xt]=fa(),{value:It,error:Ue}=Rt,Ye=L.useRef(null);Gt(G);const Mt=ns(k)?k-1:ct??null,Bt=k??(ns(ct)?ct+1:null),ae=K??(It?It.rotate:null),ue=L.useMemo(()=>{if(!It)return null;let ee=1;const ke=et??ey;if(at||v){const ne=It.getViewport({scale:1,rotation:ae});at?ee=at/ne.width:v&&(ee=v/ne.height)}return ke*ee},[v,It,ae,et,at]);L.useEffect(function(){return()=>{ns(Mt)&&a&&yt&&yt(Mt)}},[a,G,Mt,yt]);function Ee(){if(V){if(!It||!ue)return;V(kh(It,ue))}if(a&&tt){if(!ns(Mt)||!Ye.current)return;tt(Mt,Ye.current)}}function Bi(){Ue&&(Ne(!1,Ue.toString()),U&&U(Ue))}L.useEffect(function(){Xt({type:"RESET"})},[Xt,G,Mt]),L.useEffect(function(){if(!G||!Bt)return;const ke=Xr(G.getPage(Bt)),ne=ke;return ke.promise.then(Aa=>{Xt({type:"RESOLVE",value:Aa})}).catch(Aa=>{Xt({type:"REJECT",error:Aa})}),()=>us(ne)},[Xt,G,Bt]),L.useEffect(()=>{if(It!==void 0){if(It===!1){Bi();return}Ee()}},[It,ue]);const ps=L.useMemo(()=>ns(Mt)&&Bt&&ns(ae)&&ns(ue)?{_className:s,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:N,onGetTextError:M,onGetTextSuccess:B,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:Q,onRenderError:Z,onRenderSuccess:lt,onRenderTextLayerError:ht,onRenderTextLayerSuccess:rt,page:It,pageIndex:Mt,pageNumber:Bt,renderForms:D,renderTextLayer:J,rotate:ae,scale:ue}:null,[s,o,g,y,E,T,C,N,M,B,q,Q,Z,lt,ht,rt,It,Mt,Bt,D,J,ae,ue]),Yr=L.useMemo(()=>rb(wt,()=>It&&(ue?kh(It,ue):void 0)),[wt,It,ue]),zn=`${Mt}@${ue}/${ae}`;function jl(){switch($){case"custom":return Gt(p),I.jsx(p,{},`${zn}_custom`);case"none":return null;case"canvas":default:return I.jsx(t1,{canvasRef:l},`${zn}_canvas`)}}function $r(){return J?I.jsx(n1,{},`${zn}_text`):null}function Gl(){return dt?I.jsx($E,{},`${zn}_annotations`):null}function Vl(){function ee(ne){return!!ne?.page}if(!ee(ps))throw new Error("page is undefined");const ke=typeof u=="function"?u(ps):u;return I.jsxs(db.Provider,{value:ps,children:[jl(),$r(),Gl(),ke]})}function Fi(){return Bt?G===null||It===void 0||It===null?I.jsx(ca,{type:"loading",children:typeof S=="function"?S():S}):G===!1||It===!1?I.jsx(ca,{type:"error",children:typeof b=="function"?b():b}):Vl():I.jsx(ca,{type:"no-data",children:typeof _=="function"?_():_})}return I.jsx("div",{className:Ul(s,d),"data-page-number":Bt,ref:hb(w,Ye),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ue}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Yr,children:Fi()})}jE();ki.workerSrc="pdf.worker.mjs";const s1="/assets/pdf.worker-9aISQa3R.mjs";ki.workerSrc=s1;function a1({data:h}){const[t,e]=L.useState(),[s,a]=L.useState(null),[o,l]=L.useState(0),u=L.useRef(null);return L.useEffect(()=>{(async()=>{const p=await fetch(`${ii}/images/${h.content?.pdfPath}`,{credentials:"include"});if(!p.ok)throw new Error(`Failed to fetch PDF: ${p.statusText}`);const g=await p.arrayBuffer();a(g)})().catch(console.error)},[h.content?.pdfPath]),L.useEffect(()=>{if(!u.current)return;const d=new ResizeObserver(([p])=>{l(p.contentRect.width)});return d.observe(u.current),()=>d.disconnect()},[]),I.jsxs("div",{className:"h-screen flex flex-col bg-gray-900 overflow-hidden",children:[I.jsx(Vh,{number:25}),I.jsxs("div",{className:"bg-red-900/80 shadow-2xl rounded-3xl border-2 border-green-400 w-full max-w-full sm:max-w-3xl h-[90vh] flex flex-col p-4 sm:p-6 text-center",children:[I.jsx("h1",{className:"text-3xl text-yellow-400 font-bold mb-4 text-center shrink-0",children:h.content?.header}),I.jsx("p",{className:"text-white text-lg md:text-xl leading-relaxed whitespace-pre-line text-center mb-4 shrink-0",children:h.content?.text}),I.jsx("div",{ref:u,className:"flex-1 flex justify-center overflow-auto",children:I.jsx(YE,{file:s,onLoadSuccess:({numPages:d})=>e(d),className:"bg-white rounded-xl shadow-xl w-full",children:I.jsx(i1,{pageNumber:1,width:o,renderTextLayer:!1,renderAnnotationLayer:!1})})}),I.jsxs("p",{className:"text-white mt-2 text-center shrink-0",children:["(Seite 1 von ",t,")"]})]})]})}function r1(){const{windows:h,isAdmin:t,checkAdmin:e}=ya(),{day:s}=cy(),a=Number(s);if(L.useEffect(()=>{e()},[e]),isNaN(a)||a<1||a>24)return I.jsx(dy,{to:"/",replace:!0});if(!h)return I.jsx("p",{children:"Loading..."});const o=h?.find(l=>l.day===a);if(!o)return I.jsx("p",{children:"Window not found"});if(o.locked&&!t)return I.jsxs("h3",{className:"text-center text-2xl",children:[wS(fS)," "]});switch(o.type){case"text":return I.jsx(ES,{data:o});case"image":return I.jsx(SS,{data:o});case"audio":return I.jsx(_S,{data:o});case"pdf":return I.jsx(a1,{data:o});default:return I.jsx("h1",{children:"Unknown window type"})}}function o1(){const{authenticateAdmin:h}=ya(),t=ma(),[e,s]=L.useState(""),[a,o]=L.useState("");async function l(u){if(u.preventDefault(),!await h(e)){o("Wrong password");return}t("/admin")}return I.jsxs("form",{onSubmit:l,className:"mx-auto flex flex-col max-w-md h-100 justify-center",children:[I.jsx("input",{type:"password",placeholder:"password",className:"bg-white text-black",value:e,onChange:u=>s(u.target.value)}),I.jsx("button",{children:"Login"}),a&&I.jsx("p",{children:a})]})}function l1({children:h}){const[t,e]=oS(),s=t.get("token")||"",{authenticate:a,checkAuthenticated:o,isAuthenticated:l}=ya(),[u,d]=L.useState(!0);return L.useEffect(()=>{(async()=>{try{if(await o()){d(!1);return}s&&await a(s)}catch(p){console.error("Authentication failed",p)}finally{d(!1)}})()},[a,o,s]),u?I.jsx("div",{className:"flex items-center justify-center h-screen",children:I.jsx("h1",{className:"text-5xl font-bold",children:"Am lade..."})}):l?I.jsx(I.Fragment,{children:h}):I.jsx("div",{className:"flex items-center justify-center h-screen",children:I.jsx("h1",{className:"text-5xl font-bold",children:"Nt fr dini ouge :)"})})}function c1(){const{windows:h}=ya();return I.jsx(I.Fragment,{children:I.jsx(nS,{children:I.jsx(l1,{children:I.jsxs(OA,{children:[I.jsx(Oi,{index:!0,element:I.jsx(pS,{windows:h})}),I.jsx(Oi,{path:"/window/:day",element:I.jsx(r1,{})}),I.jsxs(Oi,{path:"/admin",children:[I.jsx(Oi,{index:!0,element:I.jsx(bS,{})}),I.jsx(Oi,{path:"login",element:I.jsx(o1,{})}),I.jsx(Oi,{path:"edit/:day",element:I.jsx(AS,{})})]}),I.jsx(Oi,{path:"*",element:I.jsx(dy,{to:"/",replace:!0})})]})})})})}jv.createRoot(document.getElementById("root")).render(I.jsx(L.StrictMode,{children:I.jsx(yS,{children:I.jsx(c1,{})})}));
